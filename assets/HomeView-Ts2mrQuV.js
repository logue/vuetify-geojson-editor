import{a as wx,m as Ln,b as Lr,R as Cr,V as _t,u as ps,c as aa,d as Qu,M as ec,e as tc,f as Mg,g as nc,h as ic,i as rc,j as Rg,k as Lh,l as sc,n as Og,o as Vg,p as oc,q as xx,r as Dg,s as Gg,t as Bg,v as Ng,w as Ug,x as on,y as gs,z as Cx,A as Wg,B as ac,C as zg,D as $g,E as jg,F as la,G as Sr,H as Ui,I as lc,J as Ih,K as uc,L as cc,N as Xg,O as Mh,P as Sx,Q as Ex,S as Hg,T as vr,U as kx,W as Tx,X as Px,Y as Ax,Z as Fx,_ as Ee,$ as Lx,a0 as Ix,a1 as Mx,a2 as Rx,a3 as Ox,a4 as Vx,a5 as Dx,a6 as ua,a7 as Gx,a8 as $n,a9 as Ir,aa as Bx,ab as Nx}from"./index-DwqOuWuh.js";import{J as fc,b as se,f as te,n as F,v as oe,P as Rh,j as qg,c as dc,y as ee,N as qe,q as Ye,D as ei,t as ve,p as hc,o as gc,s as tt,R as Jn,F as ct,d as Mr,H as At,u as Tn,X as Ux,z as mc,B as ca,w as nt,Y as fa,S as vi,E as Wx,a7 as zx,a as Oh,a3 as he,h as yi,a8 as $x,I as jx,_ as Xx,V as vn,U as Pn,Z as H,a9 as Hx,aa as da,a0 as $l,O as qx,ab as Kx}from"./vue-D7AvnbEy.js";import{R as Kg,G as Yg,M as ha,a as vc,b as Zg,P as Gi,L as _r,c as bt,F as et,g as an,d as Pt,e as Go,f as Jg,l as Yx,o as Zx,h as Jx,i as Qx,j as eC,k as tC,m as Rr,n as Qg,p as ys,q as em,T as Er,C as Au,r as ht,s as Vi,V as Kn,t as bn,u as nC,v as Xo,w as _c,I as tm,E as _i,x as qt,y as iC,z as vt,A as Ho,B as Vh,D as Fu,H as pc,J as Or,K as nm,N as rC,O as kr,Q as sC,S as oC,U as yc,W as im,X as pn,Y as qo,Z as hi,_ as jl,$ as He,a0 as gn,a1 as ms,a2 as Ko,a3 as rm,a4 as bc,a5 as aC,a6 as sm,a7 as lC,a8 as wc,a9 as uC,aa as Dh,ab as Tr,ac as xc,ad as Gh,ae as kn,af as pr,ag as cC,ah as Bo,ai as yr,aj as Vr,ak as Ri,al as fC,am as dC,an as hC,ao as Lu,ap as Yo,aq as om,ar as gC,as as mC,at as vC,au as am,av as Oe,aw as Iu,ax as No,ay as us,az as Yt,aA as ga,aB as _C,aC as Cc,aD as Uo,aE as pC,aF as Pr,aG as Sc,aH as yC,aI as bC,aJ as wC,aK as xC,aL as Mu,aM as Wo,aN as Xl,aO as Ru,aP as br,aQ as CC,aR as SC,aS as fi,aT as EC,aU as lm,aV as gi,aW as um,aX as kC,aY as TC,aZ as PC,a_ as AC,a$ as Ou,b0 as FC,b1 as cm,b2 as or,b3 as fm,b4 as LC,b5 as IC,b6 as _o,b7 as po,b8 as MC,b9 as RC,ba as OC,bb as VC,bc as DC,bd as dm,be as hm,bf as Xn,bg as yo,bh as Vu,bi as Kt,bj as mn,bk as gm,bl as GC,bm as BC,bn as NC,bo as UC,bp as WC,bq as zC,br as Bh,bs as $C,bt as Hl,bu as bo}from"./ol-CsFT7DcR.js";import{e as Me,p as Pe,ag as hr,ao as jC,ai as Zo,ap as XC,a4 as HC,a9 as mm,j as rt,aq as ma,u as Ge,m as bi,J as Yn,n as fs,I as ut,k as pt,h as va,ar as bs,w as An,ac as Du,N as Wi,as as ws,at as Ec,g as vm,l as _m,R as Gu,f as Dr,z as xs,L as qC,Y as pm,x as Jo,au as KC,B as pi,_ as YC,av as Qo,O as ql,aw as ZC,ax as JC,r as mi,ay as QC,y as Kl,M as eS,ah as tS,az as Nh,aA as nS,G as iS,aB as ym,aC as Uh,D as rS,aD as wo,s as bm}from"./vuetify-NlZ2bSCw.js";import{m as sS,j as oS,a as aS}from"./codemirror-lang-Cvk4E6gq.js";import{K as wm}from"./codemirror-DT_E8Zgp.js";import{V as lS}from"./VContainer-DSzQlqtP.js";function uS(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function cS(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function fS(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function Hn(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function dS(t,e){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}function hS(t,e={}){var n=typeof e=="object"?e.mutate:e;if(!t)throw new Error("geojson is required");var r=dS(t),o=[];switch(r){case"LineString":o=Yl(t,r);break;case"MultiLineString":case"Polygon":Hn(t).forEach(function(l){o.push(Yl(l,r))});break;case"MultiPolygon":Hn(t).forEach(function(l){var c=[];l.forEach(function(f){c.push(Yl(f,r))}),o.push(c)});break;case"Point":return t;case"MultiPoint":var a={};Hn(t).forEach(function(l){var c=l.join("-");Object.prototype.hasOwnProperty.call(a,c)||(o.push(l),a[c]=!0)});break;default:throw new Error(r+" geometry not supported")}return t.coordinates?n===!0?(t.coordinates=o,t):{type:r,coordinates:o}:n===!0?(t.geometry.coordinates=o,t):uS({type:r,coordinates:o},t.properties,{bbox:t.bbox,id:t.id})}function Yl(t,e){var n=Hn(t);if(n.length===2&&!Wh(n[0],n[1]))return n;var r=[],o=n.length-1,a=r.length;r.push(n[0]);for(var l=1;l<o;l++){var c=r[r.length-1];n[l][0]===c[0]&&n[l][1]===c[1]||(r.push(n[l]),a=r.length,a>2&&zh(r[a-3],r[a-1],r[a-2])&&r.splice(r.length-2,1))}if(r.push(n[n.length-1]),a=r.length,(e==="Polygon"||e==="MultiPolygon")&&Wh(n[0],n[n.length-1])&&a<4)throw new Error("invalid polygon");return e==="LineString"&&a<3||zh(r[a-3],r[a-1],r[a-2])&&r.splice(r.length-2,1),r}function Wh(t,e){return t[0]===e[0]&&t[1]===e[1]}function zh(t,e,n){var r=n[0],o=n[1],a=t[0],l=t[1],c=e[0],f=e[1],g=r-a,h=o-l,m=c-a,v=f-l,p=g*v-h*m;return p!==0?!1:Math.abs(m)>=Math.abs(v)?m>0?a<=r&&r<=c:c<=r&&r<=a:v>0?l<=o&&o<=f:f<=o&&o<=l}var gS=hS;function mS(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return xm(t);case"FeatureCollection":return vS(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return kc(t);default:throw new Error("unknown GeoJSON type")}}function xm(t){const e={type:"Feature"};return Object.keys(t).forEach(n=>{switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=Cm(t.properties),t.geometry==null?e.geometry=null:e.geometry=kc(t.geometry),e}function Cm(t){const e={};return t&&Object.keys(t).forEach(n=>{const r=t[n];typeof r=="object"?r===null?e[n]=null:Array.isArray(r)?e[n]=r.map(o=>o):e[n]=Cm(r):e[n]=r}),e}function vS(t){const e={type:"FeatureCollection"};return Object.keys(t).forEach(n=>{switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(n=>xm(n)),e}function kc(t){const e={type:t.type};return t.bbox&&(e.bbox=t.bbox),t.type==="GeometryCollection"?(e.geometries=t.geometries.map(n=>kc(n)),e):(e.coordinates=Sm(t.coordinates),e)}function Sm(t){const e=t;return typeof e[0]!="object"?e.slice():e.map(n=>Sm(n))}function Bu(t){const e=Hn(t);let n=0,r=1,o,a;for(;r<e.length;)o=a||e[0],a=e[r],n+=(a[0]-o[0])*(a[1]+o[1]),r++;return n>0}function $h(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var n=0;n<t.features.length&&e(t.features[n],n)!==!1;n++);}function Em(t,e){var n,r,o,a,l,c,f,g,h,m,v=0,p=t.type==="FeatureCollection",y=t.type==="Feature",x=p?t.features.length:1;for(n=0;n<x;n++){for(c=p?t.features[n].geometry:y?t.geometry:t,g=p?t.features[n].properties:y?t.properties:{},h=p?t.features[n].bbox:y?t.bbox:void 0,m=p?t.features[n].id:y?t.id:void 0,f=c?c.type==="GeometryCollection":!1,l=f?c.geometries.length:1,o=0;o<l;o++){if(a=f?c.geometries[o]:c,a===null){if(e(null,v,g,h,m)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(a,v,g,h,m)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<a.geometries.length;r++)if(e(a.geometries[r],v,g,h,m)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function _S(t,e={}){var n,r;if(e=e||{},!fS(e))throw new Error("options is invalid");const o=(n=e.mutate)!=null?n:!1,a=(r=e.reverse)!=null?r:!1;if(!t)throw new Error("<geojson> is required");if(typeof a!="boolean")throw new Error("<reverse> must be a boolean");if(typeof o!="boolean")throw new Error("<mutate> must be a boolean");!o&&t.type!=="Point"&&t.type!=="MultiPoint"&&(t=mS(t));const l=[];switch(t.type){case"GeometryCollection":return Em(t,function(c){zo(c,a)}),t;case"FeatureCollection":return $h(t,function(c){const f=zo(c,a);$h(f,function(g){l.push(g)})}),cS(l)}return zo(t,a)}function zo(t,e){switch(t.type==="Feature"?t.geometry.type:t.type){case"GeometryCollection":return Em(t,function(r){zo(r,e)}),t;case"LineString":return jh(Hn(t),e),t;case"Polygon":return Xh(Hn(t),e),t;case"MultiLineString":return Hn(t).forEach(function(r){jh(r,e)}),t;case"MultiPolygon":return Hn(t).forEach(function(r){Xh(r,e)}),t;case"Point":case"MultiPoint":return t}}function jh(t,e){Bu(t)===e&&t.reverse()}function Xh(t,e){Bu(t[0])!==e&&t[0].reverse();for(let n=1;n<t.length;n++)Bu(t[n])===e&&t[n].reverse()}var km=_S,Tc=Object.prototype.hasOwnProperty;function pS(t){var e=1/0,n=1/0,r=-1/0,o=-1/0;function a(m){m!=null&&Tc.call(l,m.type)&&l[m.type](m)}var l={GeometryCollection:function(m){m.geometries.forEach(a)},Point:function(m){c(m.coordinates)},MultiPoint:function(m){m.coordinates.forEach(c)},LineString:function(m){f(m.arcs)},MultiLineString:function(m){m.arcs.forEach(f)},Polygon:function(m){m.arcs.forEach(f)},MultiPolygon:function(m){m.arcs.forEach(g)}};function c(m){var v=m[0],p=m[1];v<e&&(e=v),v>r&&(r=v),p<n&&(n=p),p>o&&(o=p)}function f(m){m.forEach(c)}function g(m){m.forEach(f)}for(var h in t)a(t[h]);return r>=e&&o>=n?[e,n,r,o]:void 0}function yS(t,e,n,r,o){arguments.length===3&&(r=Array,o=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),l=t-1,c=0;c<t;++c)a[c]=o;function f(m){for(var v=e(m)&l,p=a[v],y=0;p!=o;){if(n(p,m))return!0;if(++y>=t)throw new Error("full hashset");p=a[v=v+1&l]}return a[v]=m,!0}function g(m){for(var v=e(m)&l,p=a[v],y=0;p!=o;){if(n(p,m))return!0;if(++y>=t)break;p=a[v=v+1&l]}return!1}function h(){for(var m=[],v=0,p=a.length;v<p;++v){var y=a[v];y!=o&&m.push(y)}return m}return{add:f,has:g,values:h}}function Pc(t,e,n,r,o,a){arguments.length===3&&(r=a=Array,o=null);for(var l=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),c=new a(t),f=t-1,g=0;g<t;++g)l[g]=o;function h(y,x){for(var b=e(y)&f,S=l[b],T=0;S!=o;){if(n(S,y))return c[b]=x;if(++T>=t)throw new Error("full hashmap");S=l[b=b+1&f]}return l[b]=y,c[b]=x,x}function m(y,x){for(var b=e(y)&f,S=l[b],T=0;S!=o;){if(n(S,y))return c[b];if(++T>=t)throw new Error("full hashmap");S=l[b=b+1&f]}return l[b]=y,c[b]=x,x}function v(y,x){for(var b=e(y)&f,S=l[b],T=0;S!=o;){if(n(S,y))return c[b];if(++T>=t)break;S=l[b=b+1&f]}return x}function p(){for(var y=[],x=0,b=l.length;x<b;++x){var S=l[x];S!=o&&y.push(S)}return y}return{set:h,maybeSet:m,get:v,keys:p}}function Oi(t,e){return t[0]===e[0]&&t[1]===e[1]}var Tm=new ArrayBuffer(16),Hh=new Float64Array(Tm),xo=new Uint32Array(Tm);function Nu(t){Hh[0]=t[0],Hh[1]=t[1];var e=xo[0]^xo[1];return e=e<<5^e>>7^xo[2]^xo[3],e&2147483647}function bS(t){var e=t.coordinates,n=t.lines,r=t.rings,o=V(),a=new Int32Array(e.length),l=new Int32Array(e.length),c=new Int32Array(e.length),f=new Int8Array(e.length),g=0,h,m,v,p,y;for(h=0,m=e.length;h<m;++h)a[h]=l[h]=c[h]=-1;for(h=0,m=n.length;h<m;++h){var x=n[h],b=x[0],S=x[1];for(p=o[b],y=o[++b],++g,f[p]=1;++b<=S;)k(h,v=p,p=y,y=o[b]);++g,f[y]=1}for(h=0,m=e.length;h<m;++h)a[h]=-1;for(h=0,m=r.length;h<m;++h){var T=r[h],L=T[0]+1,P=T[1];for(v=o[P-1],p=o[L-1],y=o[L],k(h,v,p,y);++L<=P;)k(h,v=p,p=y,y=o[L])}function k(q,K,W,Q){if(a[W]!==q){a[W]=q;var ie=l[W];if(ie>=0){var le=c[W];(ie!==K||le!==Q)&&(ie!==Q||le!==K)&&(++g,f[W]=1)}else l[W]=K,c[W]=Q}}function V(){for(var q=Pc(e.length*1.4,E,M,Int32Array,-1,Int32Array),K=new Int32Array(e.length),W=0,Q=e.length;W<Q;++W)K[W]=q.maybeSet(W,W);return K}function E(q){return Nu(e[q])}function M(q,K){return Oi(e[q],e[K])}a=l=c=null;var U=yS(g*1.4,Nu,Oi),N;for(h=0,m=e.length;h<m;++h)f[N=o[h]]&&U.add(e[N]);return U}function wS(t){var e=bS(t),n=t.coordinates,r=t.lines,o=t.rings,a,l,c;for(l=0,c=r.length;l<c;++l)for(var f=r[l],g=f[0],h=f[1];++g<h;)e.has(n[g])&&(a={0:g,1:f[1]},f[1]=g,f=f.next=a);for(l=0,c=o.length;l<c;++l)for(var m=o[l],v=m[0],p=v,y=m[1],x=e.has(n[v]);++p<y;)e.has(n[p])&&(x?(a={0:p,1:m[1]},m[1]=p,m=m.next=a):(xS(n,v,y,y-p),n[y]=n[v],x=!0,p=v));return t}function xS(t,e,n,r){Zl(t,e,n),Zl(t,e,e+r),Zl(t,e+r,n)}function Zl(t,e,n){for(var r=e+(n---e>>1),o;e<r;++e,--n)o=t[e],t[e]=t[n],t[n]=o}function CS(t){var e=t.coordinates,n=t.lines,r,o=t.rings,a,l=n.length+o.length,c,f;for(delete t.lines,delete t.rings,c=0,f=n.length;c<f;++c)for(r=n[c];r=r.next;)++l;for(c=0,f=o.length;c<f;++c)for(a=o[c];a=a.next;)++l;var g=Pc(l*2*1.4,Nu,Oi),h=t.arcs=[];for(c=0,f=n.length;c<f;++c){r=n[c];do m(r);while(r=r.next)}for(c=0,f=o.length;c<f;++c)if(a=o[c],a.next)do m(a);while(a=a.next);else v(a);function m(T){var L,P,k,V,E,M,U,N;if(k=g.get(L=e[T[0]])){for(U=0,N=k.length;U<N;++U)if(V=k[U],p(V,T)){T[0]=V[0],T[1]=V[1];return}}if(E=g.get(P=e[T[1]])){for(U=0,N=E.length;U<N;++U)if(M=E[U],y(M,T)){T[1]=M[0],T[0]=M[1];return}}k?k.push(T):g.set(L,[T]),E?E.push(T):g.set(P,[T]),h.push(T)}function v(T){var L,P,k,V,E;if(P=g.get(L=e[T[0]]))for(V=0,E=P.length;V<E;++V){if(k=P[V],x(k,T)){T[0]=k[0],T[1]=k[1];return}if(b(k,T)){T[0]=k[1],T[1]=k[0];return}}if(P=g.get(L=e[T[0]+S(T)]))for(V=0,E=P.length;V<E;++V){if(k=P[V],x(k,T)){T[0]=k[0],T[1]=k[1];return}if(b(k,T)){T[0]=k[1],T[1]=k[0];return}}P?P.push(T):g.set(L,[T]),h.push(T)}function p(T,L){var P=T[0],k=L[0],V=T[1],E=L[1];if(P-V!==k-E)return!1;for(;P<=V;++P,++k)if(!Oi(e[P],e[k]))return!1;return!0}function y(T,L){var P=T[0],k=L[0],V=T[1],E=L[1];if(P-V!==k-E)return!1;for(;P<=V;++P,--E)if(!Oi(e[P],e[E]))return!1;return!0}function x(T,L){var P=T[0],k=L[0],V=T[1],E=L[1],M=V-P;if(M!==E-k)return!1;for(var U=S(T),N=S(L),q=0;q<M;++q)if(!Oi(e[P+(q+U)%M],e[k+(q+N)%M]))return!1;return!0}function b(T,L){var P=T[0],k=L[0],V=T[1],E=L[1],M=V-P;if(M!==E-k)return!1;for(var U=S(T),N=M-S(L),q=0;q<M;++q)if(!Oi(e[P+(q+U)%M],e[E-(q+N)%M]))return!1;return!0}function S(T){for(var L=T[0],P=T[1],k=L,V=k,E=e[k];++k<P;){var M=e[k];(M[0]<E[0]||M[0]===E[0]&&M[1]<E[1])&&(V=k,E=M)}return V-L}return t}function SS(t){var e=-1,n=[],r=[],o=[];function a(m){m&&Tc.call(l,m.type)&&l[m.type](m)}var l={GeometryCollection:function(m){m.geometries.forEach(a)},LineString:function(m){m.arcs=c(m.arcs)},MultiLineString:function(m){m.arcs=m.arcs.map(c)},Polygon:function(m){m.arcs=m.arcs.map(f)},MultiPolygon:function(m){m.arcs=m.arcs.map(g)}};function c(m){for(var v=0,p=m.length;v<p;++v)o[++e]=m[v];var y={0:e-p+1,1:e};return n.push(y),y}function f(m){for(var v=0,p=m.length;v<p;++v)o[++e]=m[v];var y={0:e-p+1,1:e};return r.push(y),y}function g(m){return m.map(f)}for(var h in t)a(t[h]);return{type:"Topology",coordinates:o,lines:n,rings:r,objects:t}}function ES(t){var e={},n;for(n in t)e[n]=kS(t[n]);return e}function kS(t){return t==null?{type:null}:(t.type==="FeatureCollection"?TS:t.type==="Feature"?Pm:Ac)(t)}function TS(t){var e={type:"GeometryCollection",geometries:t.features.map(Pm)};return t.bbox!=null&&(e.bbox=t.bbox),e}function Pm(t){var e=Ac(t.geometry),n;t.id!=null&&(e.id=t.id),t.bbox!=null&&(e.bbox=t.bbox);for(n in t.properties){e.properties=t.properties;break}return e}function Ac(t){if(t==null)return{type:null};var e=t.type==="GeometryCollection"?{type:"GeometryCollection",geometries:t.geometries.map(Ac)}:t.type==="Point"||t.type==="MultiPoint"?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return t.bbox!=null&&(e.bbox=t.bbox),e}function qh(t,e){var n=pS(t=ES(t)),r=CS(wS(SS(t))),o=r.coordinates,a=Pc(r.arcs.length*1.4,PS,AS);t=r.objects,r.bbox=n,r.arcs=r.arcs.map(function(m,v){return a.set(m,v),o.slice(m[0],m[1]+1)}),delete r.coordinates,o=null;function l(m){m&&Tc.call(c,m.type)&&c[m.type](m)}var c={GeometryCollection:function(m){m.geometries.forEach(l)},LineString:function(m){m.arcs=f(m.arcs)},MultiLineString:function(m){m.arcs=m.arcs.map(f)},Polygon:function(m){m.arcs=m.arcs.map(f)},MultiPolygon:function(m){m.arcs=m.arcs.map(g)}};function f(m){var v=[];do{var p=a.get(m);v.push(m[0]<m[1]?p:~p)}while(m=m.next);return v}function g(m){return m.map(f)}for(var h in t)l(t[h]);return r}function PS(t){var e=t[0],n=t[1],r;return n<e&&(r=e,e=n,n=r),e+31*n}function AS(t,e){var n=t[0],r=t[1],o=e[0],a=e[1],l;return r<n&&(l=n,n=r,r=l),a<o&&(l=o,o=a,a=l),n===o&&r===a}const _a=fc("geojson-editor",()=>{const t=se({type:"FeatureCollection",features:[]}),e=te(()=>qh({data:t.value})),n=se(!0);function r(c="geojson",f=!1,g=!1){t.value.type==="FeatureCollection"&&t.value.features.forEach(v=>(delete v.id,v));let h=km(t.value);g&&(h=gS(h));const m=JSON.stringify(c==="topojson"?{$schema:"https://raw.githubusercontent.com/Casyfill/TopoJSON_schema/master/topology.json",...qh({data:h})}:{$schema:"https://json.schemastore.org/geojson.json",...h},null,f?2:0);return new Blob([m],{type:"application/geo+json"})}function o(c){t.value=c}function a(){t.value={type:"FeatureCollection",features:[]},n.value=!0}function l(c=!0){n.value=c}return{geojson:t,topojson:e,requestRefresh:n,exportBlob:r,setGeoJson:o,clear:a,setRefresh:l}},{persist:{storage:window.localStorage}}),FS=fc("map-location-marker",()=>{const t=se({type:"FeatureCollection",features:[]}),e=void 0;async function n(o){if(t.value.features.length!==0)return;const a=await wx.get(`./data/${o}.geojson`);t.value=a.data}function r(){t.value={type:"FeatureCollection",features:[]}}return{geojson:t,lastModified:e,init:n,clear:r}},{persist:{key:"map-location-marker",storage:window.localStorage}}),Fc=fc("map-cursor",()=>{const t=se([0,0]),e=se(1),n=se(0);function r(l){t.value=l}function o(l){e.value=l}function a(l){n.value=l}return{level:n,zoom:e,coordinate:t,setCoordinate:r,setZoom:o,setLevel:a}}),LS=Pe({target:[Object,Array]},"v-dialog-transition"),Jl=new WeakMap,Lc=Me()({name:"VDialogTransition",props:LS(),setup(t,e){let{slots:n}=e;const r={onBeforeEnter(o){o.style.pointerEvents="none",o.style.visibility="hidden"},async onEnter(o,a){await new Promise(p=>requestAnimationFrame(p)),await new Promise(p=>requestAnimationFrame(p)),o.style.visibility="";const l=Yh(t.target,o),{x:c,y:f,sx:g,sy:h,speed:m}=l;Jl.set(o,l);const v=hr(o,[{transform:`translate(${c}px, ${f}px) scale(${g}, ${h})`,opacity:0},{}],{duration:225*m,easing:XC});Kh(o)?.forEach(p=>{hr(p,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*m,easing:Zo})}),v.finished.then(()=>a())},onAfterEnter(o){o.style.removeProperty("pointer-events")},onBeforeLeave(o){o.style.pointerEvents="none"},async onLeave(o,a){await new Promise(p=>requestAnimationFrame(p));let l;!Jl.has(o)||Array.isArray(t.target)||t.target.offsetParent||t.target.getClientRects().length?l=Yh(t.target,o):l=Jl.get(o);const{x:c,y:f,sx:g,sy:h,speed:m}=l;hr(o,[{},{transform:`translate(${c}px, ${f}px) scale(${g}, ${h})`,opacity:0}],{duration:125*m,easing:jC}).finished.then(()=>a()),Kh(o)?.forEach(p=>{hr(p,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*m,easing:Zo})})},onAfterLeave(o){o.style.removeProperty("pointer-events")}};return()=>t.target?F(Rh,oe({name:"dialog-transition"},r,{css:!1}),n):F(Rh,{name:"dialog-transition"},n)}});function Kh(t){const e=t.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return e&&[...e]}function Yh(t,e){const n=HC(t),r=mm(e),[o,a]=getComputedStyle(e).transformOrigin.split(" ").map(S=>parseFloat(S)),[l,c]=getComputedStyle(e).getPropertyValue("--v-overlay-anchor-origin").split(" ");let f=n.left+n.width/2;l==="left"||c==="left"?f-=n.width/2:(l==="right"||c==="right")&&(f+=n.width/2);let g=n.top+n.height/2;l==="top"||c==="top"?g-=n.height/2:(l==="bottom"||c==="bottom")&&(g+=n.height/2);const h=n.width/r.width,m=n.height/r.height,v=Math.max(1,h,m),p=h/v||0,y=m/v||0,x=r.width*r.height/(window.innerWidth*window.innerHeight),b=x>.12?Math.min(1.5,(x-.12)*10+1):1;return{x:f-(o+r.left),y:g-(a+r.top),sx:p,sy:y,speed:b}}const Am=ma.reduce((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t),{}),Fm=ma.reduce((t,e)=>{const n="offset"+dc(e);return t[n]={type:[String,Number],default:null},t},{}),Lm=ma.reduce((t,e)=>{const n="order"+dc(e);return t[n]={type:[String,Number],default:null},t},{}),Zh={col:Object.keys(Am),offset:Object.keys(Fm),order:Object.keys(Lm)};function IS(t,e,n){let r=t;if(!(n==null||n===!1)){if(e){const o=e.replace(t,"");r+=`-${o}`}return t==="col"&&(r="v-"+r),t==="col"&&(n===""||n===!0)||(r+=`-${n}`),r.toLowerCase()}}const MS=["auto","start","end","center","baseline","stretch"],RS=Pe({cols:{type:[Boolean,String,Number],default:!1},...Am,offset:{type:[String,Number],default:null},...Fm,order:{type:[String,Number],default:null},...Lm,alignSelf:{type:String,default:null,validator:t=>MS.includes(t)},...rt(),...Ln()},"VCol"),ar=Me()({name:"VCol",props:RS(),setup(t,e){let{slots:n}=e;const r=te(()=>{const o=[];let a;for(a in Zh)Zh[a].forEach(c=>{const f=t[c],g=IS(a,c,f);g&&o.push(g)});const l=o.some(c=>c.startsWith("v-col-"));return o.push({"v-col":!l||!t.cols,[`v-col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),o});return()=>qg(t.tag,{class:[r.value,t.class],style:t.style},n.default?.())}}),Ic=["start","end","center"],Im=["space-between","space-around","space-evenly"];function Mc(t,e){return ma.reduce((n,r)=>{const o=t+dc(r);return n[o]=e(),n},{})}const OS=[...Ic,"baseline","stretch"],Mm=t=>OS.includes(t),Rm=Mc("align",()=>({type:String,default:null,validator:Mm})),VS=[...Ic,...Im],Om=t=>VS.includes(t),Vm=Mc("justify",()=>({type:String,default:null,validator:Om})),DS=[...Ic,...Im,"stretch"],Dm=t=>DS.includes(t),Gm=Mc("alignContent",()=>({type:String,default:null,validator:Dm})),Jh={align:Object.keys(Rm),justify:Object.keys(Vm),alignContent:Object.keys(Gm)},GS={align:"align",justify:"justify",alignContent:"align-content"};function BS(t,e,n){let r=GS[t];if(n!=null){if(e){const o=e.replace(t,"");r+=`-${o}`}return r+=`-${n}`,r.toLowerCase()}}const NS=Pe({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:Mm},...Rm,justify:{type:String,default:null,validator:Om},...Vm,alignContent:{type:String,default:null,validator:Dm},...Gm,...rt(),...Ln()},"VRow"),US=Me()({name:"VRow",props:NS(),setup(t,e){let{slots:n}=e;const r=te(()=>{const o=[];let a;for(a in Jh)Jh[a].forEach(l=>{const c=t[l],f=BS(a,l,c);f&&o.push(f)});return o.push({"v-row--no-gutters":t.noGutters,"v-row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),o});return()=>qg(t.tag,{class:["v-row",r.value,t.class],style:t.style},n.default?.())}}),WS=Pe({text:String,onClick:Yn(),...rt(),...bi()},"VLabel"),Rc=Me()({name:"VLabel",props:WS(),setup(t,e){let{slots:n}=e;return Ge(()=>ee("label",{class:Ye(["v-label",{"v-label--clickable":!!t.onClick},t.class]),style:qe(t.style),onClick:t.onClick},[t.text,n.default?.()])),{}}}),Bm=Symbol.for("vuetify:selection-control-group"),Oc=Pe({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:ut,trueIcon:ut,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:fs},...rt(),...Lr(),...bi()},"SelectionControlGroup"),zS=Pe({...Oc({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),$S=Me()({name:"VSelectionControlGroup",props:zS(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=pt(t,"modelValue"),o=ei(),a=ve(()=>t.id||`v-selection-control-group-${o}`),l=ve(()=>t.name||a.value),c=new Set;return hc(Bm,{modelValue:r,forceUpdate:()=>{c.forEach(f=>f())},onForceUpdate:f=>{c.add(f),gc(()=>{c.delete(f)})}}),va({[t.defaultsTarget]:{color:ve(()=>t.color),disabled:ve(()=>t.disabled),density:ve(()=>t.density),error:ve(()=>t.error),inline:ve(()=>t.inline),modelValue:r,multiple:ve(()=>!!t.multiple||t.multiple==null&&Array.isArray(r.value)),name:l,falseIcon:ve(()=>t.falseIcon),trueIcon:ve(()=>t.trueIcon),readonly:ve(()=>t.readonly),ripple:ve(()=>t.ripple),type:ve(()=>t.type),valueComparator:ve(()=>t.valueComparator)}}),Ge(()=>ee("div",{class:Ye(["v-selection-control-group",{"v-selection-control-group--inline":t.inline},t.class]),style:qe(t.style),role:t.type==="radio"?"radiogroup":void 0},[n.default?.()])),{}}}),pa=Pe({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...rt(),...Oc()},"VSelectionControl");function jS(t){const e=Mr(Bm,void 0),{densityClasses:n}=ps(t),r=pt(t,"modelValue"),o=te(()=>t.trueValue!==void 0?t.trueValue:t.value!==void 0?t.value:!0),a=te(()=>t.falseValue!==void 0?t.falseValue:!1),l=te(()=>!!t.multiple||t.multiple==null&&Array.isArray(r.value)),c=te({get(){const p=e?e.modelValue.value:r.value;return l.value?An(p).some(y=>t.valueComparator(y,o.value)):t.valueComparator(p,o.value)},set(p){if(t.readonly)return;const y=p?o.value:a.value;let x=y;l.value&&(x=p?[...An(r.value),y]:An(r.value).filter(b=>!t.valueComparator(b,o.value))),e?e.modelValue.value=x:r.value=x}}),{textColorClasses:f,textColorStyles:g}=aa(()=>{if(!(t.error||t.disabled))return c.value?t.color:t.baseColor}),{backgroundColorClasses:h,backgroundColorStyles:m}=Qu(()=>c.value&&!t.error&&!t.disabled?t.color:t.baseColor),v=te(()=>c.value?t.trueIcon:t.falseIcon);return{group:e,densityClasses:n,trueValue:o,falseValue:a,model:c,textColorClasses:f,textColorStyles:g,backgroundColorClasses:h,backgroundColorStyles:m,icon:v}}const Bi=Me()({name:"VSelectionControl",directives:{vRipple:Cr},inheritAttrs:!1,props:pa(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const{group:o,densityClasses:a,icon:l,model:c,textColorClasses:f,textColorStyles:g,backgroundColorClasses:h,backgroundColorStyles:m,trueValue:v}=jS(t),p=ei(),y=tt(!1),x=tt(!1),b=se(),S=ve(()=>t.id||`input-${p}`),T=ve(()=>!t.disabled&&!t.readonly);o?.onForceUpdate(()=>{b.value&&(b.value.checked=c.value)});function L(E){T.value&&(y.value=!0,Du(E.target,":focus-visible")!==!1&&(x.value=!0))}function P(){y.value=!1,x.value=!1}function k(E){E.stopPropagation()}function V(E){if(!T.value){b.value&&(b.value.checked=c.value);return}t.readonly&&o&&At(()=>o.forceUpdate()),c.value=E.target.checked}return Ge(()=>{const E=r.label?r.label({label:t.label,props:{for:S.value}}):t.label,[M,U]=bs(n),N=ee("input",oe({ref:b,checked:c.value,disabled:!!t.disabled,id:S.value,onBlur:P,onFocus:L,onInput:V,"aria-disabled":!!t.disabled,"aria-label":t.label,type:t.type,value:v.value,name:t.name,"aria-checked":t.type==="checkbox"?c.value:void 0},U),null);return ee("div",oe({class:["v-selection-control",{"v-selection-control--dirty":c.value,"v-selection-control--disabled":t.disabled,"v-selection-control--error":t.error,"v-selection-control--focused":y.value,"v-selection-control--focus-visible":x.value,"v-selection-control--inline":t.inline},a.value,t.class]},M,{style:t.style}),[ee("div",{class:Ye(["v-selection-control__wrapper",f.value]),style:qe(g.value)},[r.default?.({backgroundColorClasses:h,backgroundColorStyles:m}),Jn(ee("div",{class:["v-selection-control__input"]},[r.input?.({model:c,textColorClasses:f,textColorStyles:g,backgroundColorClasses:h,backgroundColorStyles:m,inputNode:N,icon:l.value,props:{onFocus:L,onBlur:P,id:S.value}})??ee(ct,null,[l.value&&F(_t,{key:"icon",icon:l.value},null),N])]),[[Cr,t.ripple&&[!t.disabled&&!t.readonly,null,["center","circle"]]]])]),E&&F(Rc,{for:S.value,onClick:k},{default:()=>[E]})])}),{isFocused:y,input:b}}}),XS=Pe({indeterminate:Boolean,indeterminateIcon:{type:ut,default:"$checkboxIndeterminate"},...pa({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),HS=Me()({name:"VCheckboxBtn",props:XS(),emits:{"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,e){let{slots:n}=e;const r=pt(t,"indeterminate"),o=pt(t,"modelValue");function a(f){r.value&&(r.value=!1)}const l=ve(()=>r.value?t.indeterminateIcon:t.falseIcon),c=ve(()=>r.value?t.indeterminateIcon:t.trueIcon);return Ge(()=>{const f=Wi(Bi.filterProps(t),["modelValue"]);return F(Bi,oe(f,{modelValue:o.value,"onUpdate:modelValue":[g=>o.value=g,a],class:["v-checkbox-btn",t.class],style:t.style,type:"checkbox",falseIcon:l.value,trueIcon:c.value,"aria-checked":r.value?"mixed":void 0}),n)}),{}}});function Nm(t){const{t:e}=ws();function n(r){let{name:o,color:a,...l}=r;const c={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[o],f=t[`onClick:${o}`];function g(m){m.key!=="Enter"&&m.key!==" "||(m.preventDefault(),m.stopPropagation(),Ec(f,new PointerEvent("click",m)))}const h=f&&c?e(`$vuetify.input.${c}`,t.label??""):void 0;return F(_t,oe({icon:t[`${o}Icon`],"aria-label":h,onClick:f,onKeydown:g,color:a},l),null)}return{InputIcon:n}}const qS=Pe({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...rt(),...tc({transition:{component:Mg,leaveAbsolute:!0,group:!0}})},"VMessages"),KS=Me()({name:"VMessages",props:qS(),setup(t,e){let{slots:n}=e;const r=te(()=>An(t.messages)),{textColorClasses:o,textColorStyles:a}=aa(()=>t.color);return Ge(()=>F(ec,{transition:t.transition,tag:"div",class:Ye(["v-messages",o.value,t.class]),style:qe([a.value,t.style])},{default:()=>[t.active&&r.value.map((l,c)=>ee("div",{class:"v-messages__message",key:`${c}-${r.value}`},[n.message?n.message({message:l}):l]))]})),{}}}),Um=Pe({focused:Boolean,"onUpdate:focused":Yn()},"focus");function ya(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vm();const n=pt(t,"focused"),r=ve(()=>({[`${e}--focused`]:n.value}));function o(){n.value=!0}function a(){n.value=!1}return{focusClasses:r,isFocused:n,focus:o,blur:a}}const YS=Symbol.for("vuetify:form");function Wm(t){const e=Mr(YS,null);return{...e,isReadonly:te(()=>!!(t?.readonly??e?.isReadonly.value)),isDisabled:te(()=>!!(t?.disabled??e?.isDisabled.value))}}const ZS=Symbol.for("vuetify:rules");function JS(t){const e=Mr(ZS,null);return e?e(t):ve(t)}const QS=Pe({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...Um()},"validation");function e2(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vm(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ei();const r=pt(t,"modelValue"),o=te(()=>t.validationValue===void 0?r.value:t.validationValue),a=Wm(t),l=JS(()=>t.rules),c=se([]),f=tt(!0),g=te(()=>!!(An(r.value===""?null:r.value).length||An(o.value===""?null:o.value).length)),h=te(()=>t.errorMessages?.length?An(t.errorMessages).concat(c.value).slice(0,Math.max(0,Number(t.maxErrors))):c.value),m=te(()=>{let P=(t.validateOn??a.validateOn?.value)||"input";P==="lazy"&&(P="input lazy"),P==="eager"&&(P="input eager");const k=new Set(P?.split(" ")??[]);return{input:k.has("input"),blur:k.has("blur")||k.has("input")||k.has("invalid-input"),invalidInput:k.has("invalid-input"),lazy:k.has("lazy"),eager:k.has("eager")}}),v=te(()=>t.error||t.errorMessages?.length?!1:t.rules.length?f.value?c.value.length||m.value.lazy?null:!0:!c.value.length:!0),p=tt(!1),y=te(()=>({[`${e}--error`]:v.value===!1,[`${e}--dirty`]:g.value,[`${e}--disabled`]:a.isDisabled.value,[`${e}--readonly`]:a.isReadonly.value})),x=_m("validation"),b=te(()=>t.name??Tn(n));Ux(()=>{a.register?.({id:b.value,vm:x,validate:L,reset:S,resetValidation:T})}),mc(()=>{a.unregister?.(b.value)}),ca(async()=>{m.value.lazy||await L(!m.value.eager),a.update?.(b.value,v.value,h.value)}),Gu(()=>m.value.input||m.value.invalidInput&&v.value===!1,()=>{nt(o,()=>{if(o.value!=null)L();else if(t.focused){const P=nt(()=>t.focused,k=>{k||L(),P()})}})}),Gu(()=>m.value.blur,()=>{nt(()=>t.focused,P=>{P||L()})}),nt([v,h],()=>{a.update?.(b.value,v.value,h.value)});async function S(){r.value=null,await At(),await T()}async function T(){f.value=!0,m.value.lazy?c.value=[]:await L(!m.value.eager)}async function L(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const k=[];p.value=!0;for(const V of l.value){if(k.length>=Number(t.maxErrors??1))break;const M=await(typeof V=="function"?V:()=>V)(o.value);M!==!0&&(M!==!1&&typeof M!="string"||k.push(M||""))}return c.value=k,p.value=!1,f.value=P,c.value}return{errorMessages:h,isDirty:g,isDisabled:a.isDisabled,isReadonly:a.isReadonly,isPristine:f,isValid:v,isValidating:p,reset:S,resetValidation:T,validate:L,validationClasses:y}}const Cs=Pe({id:String,appendIcon:ut,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:ut,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:t=>["horizontal","vertical"].includes(t)},"onClick:prepend":Yn(),"onClick:append":Yn(),...rt(),...Lr(),...qC(ic(),["maxWidth","minWidth","width"]),...bi(),...QS()},"VInput"),Qn=Me()({name:"VInput",props:{...Cs()},emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r,emit:o}=e;const{densityClasses:a}=ps(t),{dimensionStyles:l}=nc(t),{themeClasses:c}=Dr(t),{rtlClasses:f}=xs(),{InputIcon:g}=Nm(t),h=ei(),m=te(()=>t.id||`input-${h}`),v=te(()=>`${m.value}-messages`),{errorMessages:p,isDirty:y,isDisabled:x,isReadonly:b,isPristine:S,isValid:T,isValidating:L,reset:P,resetValidation:k,validate:V,validationClasses:E}=e2(t,"v-input",m),M=te(()=>({id:m,messagesId:v,isDirty:y,isDisabled:x,isReadonly:b,isPristine:S,isValid:T,isValidating:L,reset:P,resetValidation:k,validate:V})),U=ve(()=>t.error||t.disabled?void 0:t.focused?t.color:t.baseColor),N=ve(()=>{if(t.iconColor)return t.iconColor===!0?U.value:t.iconColor}),q=te(()=>t.errorMessages?.length||!S.value&&p.value.length?p.value:t.hint&&(t.persistentHint||t.focused)?t.hint:t.messages);return Ge(()=>{const K=!!(r.prepend||t.prependIcon),W=!!(r.append||t.appendIcon),Q=q.value.length>0,ie=!t.hideDetails||t.hideDetails==="auto"&&(Q||!!r.details);return ee("div",{class:Ye(["v-input",`v-input--${t.direction}`,{"v-input--center-affix":t.centerAffix,"v-input--focused":t.focused,"v-input--glow":t.glow,"v-input--hide-spin-buttons":t.hideSpinButtons},a.value,c.value,f.value,E.value,t.class]),style:qe([l.value,t.style])},[K&&ee("div",{key:"prepend",class:"v-input__prepend"},[r.prepend?.(M.value),t.prependIcon&&F(g,{key:"prepend-icon",name:"prepend",color:N.value},null)]),r.default&&ee("div",{class:"v-input__control"},[r.default?.(M.value)]),W&&ee("div",{key:"append",class:"v-input__append"},[t.appendIcon&&F(g,{key:"append-icon",name:"append",color:N.value},null),r.append?.(M.value)]),ie&&ee("div",{id:v.value,class:"v-input__details",role:"alert","aria-live":"polite"},[F(KS,{active:Q,messages:q.value},{message:r.message}),r.details?.(M.value)])])}),{reset:P,resetValidation:k,validate:V,isValid:T,errorMessages:p}}});function t2(t){let{selectedElement:e,containerElement:n,isRtl:r,isHorizontal:o}=t;const a=vs(o,n),l=zm(o,r,n),c=vs(o,e),f=$m(o,e),g=c*.4;return l>f?f-g:l+a<f+c?f-a+c+g:l}function n2(t){let{selectedElement:e,containerElement:n,isHorizontal:r}=t;const o=vs(r,n),a=$m(r,e),l=vs(r,e);return a-o/2+l/2}function Qh(t,e){return e?.[t?"scrollWidth":"scrollHeight"]||0}function i2(t,e){return e?.[t?"clientWidth":"clientHeight"]||0}function zm(t,e,n){if(!n)return 0;const{scrollLeft:r,offsetWidth:o,scrollWidth:a}=n;return t?e?a-o+r:r:n.scrollTop}function vs(t,e){return e?.[t?"offsetWidth":"offsetHeight"]||0}function $m(t,e){return e?.[t?"offsetLeft":"offsetTop"]||0}const r2=Symbol.for("vuetify:v-slide-group"),Vc=Pe({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:r2},nextIcon:{type:ut,default:"$next"},prevIcon:{type:ut,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["always","desktop","mobile"].includes(t)},...rt(),...YC({mobile:null}),...Ln(),...Rg({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),ea=Me()({name:"VSlideGroup",props:Vc(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{isRtl:r}=xs(),{displayClasses:o,mobile:a}=pm(t),l=rc(t,t.symbol),c=tt(!1),f=tt(0),g=tt(0),h=tt(0),m=te(()=>t.direction==="horizontal"),{resizeRef:v,contentRect:p}=Jo(),{resizeRef:y,contentRect:x}=Jo(),b=KC(),S=te(()=>({container:v.el,duration:200,easing:"easeOutQuart"})),T=te(()=>l.selected.value.length?l.items.value.findIndex(R=>R.id===l.selected.value[0]):-1),L=te(()=>l.selected.value.length?l.items.value.findIndex(R=>R.id===l.selected.value[l.selected.value.length-1]):-1);if(pi){let R=-1;nt(()=>[l.selected.value,p.value,x.value,m.value],()=>{cancelAnimationFrame(R),R=requestAnimationFrame(()=>{if(p.value&&x.value){const B=m.value?"width":"height";g.value=p.value[B],h.value=x.value[B],c.value=g.value+1<h.value}if(T.value>=0&&y.el){const B=y.el.children[L.value];k(B,t.centerActive)}})})}const P=tt(!1);function k(R,B){let J=0;B?J=n2({containerElement:v.el,isHorizontal:m.value,selectedElement:R}):J=t2({containerElement:v.el,isHorizontal:m.value,isRtl:r.value,selectedElement:R}),V(J)}function V(R){if(!pi||!v.el)return;const B=vs(m.value,v.el),J=zm(m.value,r.value,v.el);if(!(Qh(m.value,v.el)<=B||Math.abs(R-J)<16)){if(m.value&&r.value&&v.el){const{scrollWidth:ue,offsetWidth:we}=v.el;R=ue-we-R}m.value?b.horizontal(R,S.value):b(R,S.value)}}function E(R){const{scrollTop:B,scrollLeft:J}=R.target;f.value=m.value?J:B}function M(R){if(P.value=!0,!(!c.value||!y.el)){for(const B of R.composedPath())for(const J of y.el.children)if(J===B){k(J);return}}}function U(R){P.value=!1}let N=!1;function q(R){!N&&!P.value&&!(R.relatedTarget&&y.el?.contains(R.relatedTarget))&&ie(),N=!1}function K(){N=!0}function W(R){if(!y.el)return;function B(J){R.preventDefault(),ie(J)}m.value?R.key==="ArrowRight"?B(r.value?"prev":"next"):R.key==="ArrowLeft"&&B(r.value?"next":"prev"):R.key==="ArrowDown"?B("next"):R.key==="ArrowUp"&&B("prev"),R.key==="Home"?B("first"):R.key==="End"&&B("last")}function Q(R,B){if(!R)return;let J=R;do J=J?.[B==="next"?"nextElementSibling":"previousElementSibling"];while(J?.hasAttribute("disabled"));return J}function ie(R){if(!y.el)return;let B;if(!R)B=Qo(y.el)[0];else if(R==="next"){if(B=Q(y.el.querySelector(":focus"),R),!B)return ie("first")}else if(R==="prev"){if(B=Q(y.el.querySelector(":focus"),R),!B)return ie("last")}else R==="first"?(B=y.el.firstElementChild,B?.hasAttribute("disabled")&&(B=Q(B,"next"))):R==="last"&&(B=y.el.lastElementChild,B?.hasAttribute("disabled")&&(B=Q(B,"prev")));B&&B.focus({preventScroll:!0})}function le(R){const B=m.value&&r.value?-1:1,J=(R==="prev"?-B:B)*g.value;let Be=f.value+J;if(m.value&&r.value&&v.el){const{scrollWidth:ue,offsetWidth:we}=v.el;Be+=ue-we}V(Be)}const ye=te(()=>({next:l.next,prev:l.prev,select:l.select,isSelected:l.isSelected})),ce=te(()=>{switch(t.showArrows){case"always":return!0;case"desktop":return!a.value;case!0:return c.value||Math.abs(f.value)>0;case"mobile":return a.value||c.value||Math.abs(f.value)>0;default:return!a.value&&(c.value||Math.abs(f.value)>0)}}),pe=te(()=>Math.abs(f.value)>1),G=te(()=>{if(!v.value)return!1;const R=Qh(m.value,v.el),B=i2(m.value,v.el);return R-B-Math.abs(f.value)>1});return Ge(()=>F(t.tag,{class:Ye(["v-slide-group",{"v-slide-group--vertical":!m.value,"v-slide-group--has-affixes":ce.value,"v-slide-group--is-overflowing":c.value},o.value,t.class]),style:qe(t.style),tabindex:P.value||l.selected.value.length?-1:0,onFocus:q},{default:()=>[ce.value&&ee("div",{key:"prev",class:Ye(["v-slide-group__prev",{"v-slide-group__prev--disabled":!pe.value}]),onMousedown:K,onClick:()=>pe.value&&le("prev")},[n.prev?.(ye.value)??F(Lh,null,{default:()=>[F(_t,{icon:r.value?t.nextIcon:t.prevIcon},null)]})]),ee("div",{key:"container",ref:v,class:"v-slide-group__container",onScroll:E},[ee("div",{ref:y,class:"v-slide-group__content",onFocusin:M,onFocusout:U,onKeydown:W},[n.default?.(ye.value)])]),ce.value&&ee("div",{key:"next",class:Ye(["v-slide-group__next",{"v-slide-group__next--disabled":!G.value}]),onMousedown:K,onClick:()=>G.value&&le("next")},[n.next?.(ye.value)??F(Lh,null,{default:()=>[F(_t,{icon:r.value?t.prevIcon:t.nextIcon},null)]})])]})),{selected:l.selected,scrollTo:le,scrollOffset:f,focus:ie,hasPrev:pe,hasNext:G}}}),jm=Symbol.for("vuetify:v-chip-group"),s2=Pe({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:fs},...Vc(),...rt(),...Rg({selectedClass:"v-chip--selected"}),...Ln(),...bi(),...sc({variant:"tonal"})},"VChipGroup");Me()({name:"VChipGroup",props:s2(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:r}=Dr(t),{isSelected:o,select:a,next:l,prev:c,selected:f}=rc(t,jm);return va({VChip:{baseColor:ve(()=>t.baseColor),color:ve(()=>t.color),disabled:ve(()=>t.disabled),filter:ve(()=>t.filter),variant:ve(()=>t.variant)}}),Ge(()=>{const g=ea.filterProps(t);return F(ea,oe(g,{class:["v-chip-group",{"v-chip-group--column":t.column},r.value,t.class],style:t.style}),{default:()=>[n.default?.({isSelected:o,select:a,next:l,prev:c,selected:f.value})]})}),{}}});const o2=Pe({activeClass:String,appendAvatar:String,appendIcon:ut,baseColor:String,closable:Boolean,closeIcon:{type:ut,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:ut,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:ut,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:Yn(),onClickOnce:Yn(),...jg(),...rt(),...Lr(),...$g(),...zg(),...ac(),...Wg(),...Cx(),...Ln({tag:"span"}),...bi(),...sc({variant:"tonal"})},"VChip"),Xm=Me()({name:"VChip",directives:{vRipple:Cr},props:o2(),emits:{"click:close":t=>!0,"update:modelValue":t=>!0,"group:selected":t=>!0,click:t=>!0},setup(t,e){let{attrs:n,emit:r,slots:o}=e;const{t:a}=ws(),{borderClasses:l}=Og(t),{densityClasses:c}=ps(t),{elevationClasses:f}=Vg(t),{roundedClasses:g}=oc(t),{sizeClasses:h}=xx(t),{themeClasses:m}=Dr(t),v=pt(t,"modelValue"),p=Dg(t,jm,!1),y=Gg(t,n),x=ve(()=>t.link!==!1&&y.isLink.value),b=te(()=>!t.disabled&&t.link!==!1&&(!!p||t.link||y.isClickable.value)),S=ve(()=>({"aria-label":a(t.closeLabel),onClick(E){E.preventDefault(),E.stopPropagation(),v.value=!1,r("click:close",E)}})),{colorClasses:T,colorStyles:L,variantClasses:P}=Bg(()=>({color:!p||p.isSelected.value?t.color??t.baseColor:t.baseColor,variant:t.variant}));function k(E){r("click",E),b.value&&(y.navigate?.(E),p?.toggle())}function V(E){(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),k(E))}return()=>{const E=y.isLink.value?"a":t.tag,M=!!(t.appendIcon||t.appendAvatar),U=!!(M||o.append),N=!!(o.close||t.closable),q=!!(o.filter||t.filter)&&p,K=!!(t.prependIcon||t.prependAvatar),W=!!(K||o.prepend);return v.value&&Jn(F(E,oe({class:["v-chip",{"v-chip--disabled":t.disabled,"v-chip--label":t.label,"v-chip--link":b.value,"v-chip--filter":q,"v-chip--pill":t.pill,[`${t.activeClass}`]:t.activeClass&&y.isActive?.value},m.value,l.value,T.value,c.value,f.value,g.value,h.value,P.value,p?.selectedClass.value,t.class],style:[L.value,t.style],disabled:t.disabled||void 0,draggable:t.draggable,tabindex:b.value?0:void 0,onClick:k,onKeydown:b.value&&!x.value&&V},y.linkProps),{default:()=>[Ng(b.value,"v-chip"),q&&F(Ug,{key:"filter"},{default:()=>[Jn(ee("div",{class:"v-chip__filter"},[o.filter?F(on,{key:"filter-defaults",disabled:!t.filterIcon,defaults:{VIcon:{icon:t.filterIcon}}},o.filter):F(_t,{key:"filter-icon",icon:t.filterIcon},null)]),[[fa,p.isSelected.value]])]}),W&&ee("div",{key:"prepend",class:"v-chip__prepend"},[o.prepend?F(on,{key:"prepend-defaults",disabled:!K,defaults:{VAvatar:{image:t.prependAvatar,start:!0},VIcon:{icon:t.prependIcon,start:!0}}},o.prepend):ee(ct,null,[t.prependIcon&&F(_t,{key:"prepend-icon",icon:t.prependIcon,start:!0},null),t.prependAvatar&&F(gs,{key:"prepend-avatar",image:t.prependAvatar,start:!0},null)])]),ee("div",{class:"v-chip__content","data-no-activator":""},[o.default?.({isSelected:p?.isSelected.value,selectedClass:p?.selectedClass.value,select:p?.select,toggle:p?.toggle,value:p?.value.value,disabled:t.disabled})??vi(t.text)]),U&&ee("div",{key:"append",class:"v-chip__append"},[o.append?F(on,{key:"append-defaults",disabled:!M,defaults:{VAvatar:{end:!0,image:t.appendAvatar},VIcon:{end:!0,icon:t.appendIcon}}},o.append):ee(ct,null,[t.appendIcon&&F(_t,{key:"append-icon",end:!0,icon:t.appendIcon},null),t.appendAvatar&&F(gs,{key:"append-avatar",end:!0,image:t.appendAvatar},null)])]),N&&ee("button",oe({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},S.value),[o.close?F(on,{key:"close-defaults",defaults:{VIcon:{icon:t.closeIcon,size:"x-small"}}},o.close):F(_t,{key:"close-icon",icon:t.closeIcon,size:"x-small"},null)])]}),[[Cr,b.value&&t.ripple,null]])}}}),a2=Pe({id:String,submenu:Boolean,...Wi(lc({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Lc}}),["absolute"])},"VMenu"),Hm=Me()({name:"VMenu",props:a2(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=pt(t,"modelValue"),{scopeId:o}=la(),{isRtl:a}=xs(),l=ei(),c=ve(()=>t.id||`v-menu-${l}`),f=se(),g=Mr(Ih,null),h=tt(new Set);hc(Ih,{register(){h.value.add(l)},unregister(){h.value.delete(l)},closeParents(b){setTimeout(()=>{!h.value.size&&!t.persistent&&(b==null||f.value?.contentEl&&!JC(b,f.value.contentEl))&&(r.value=!1,g?.closeParents())},40)}}),mc(()=>{g?.unregister(),document.removeEventListener("focusin",m)}),Wx(()=>r.value=!1);async function m(b){const S=b.relatedTarget,T=b.target;await At(),r.value&&S!==T&&f.value?.contentEl&&f.value?.globalTop&&![document,f.value.contentEl].includes(T)&&!f.value.contentEl.contains(T)&&Qo(f.value.contentEl)[0]?.focus()}nt(r,b=>{b?(g?.register(),pi&&document.addEventListener("focusin",m,{once:!0})):(g?.unregister(),pi&&document.removeEventListener("focusin",m))},{immediate:!0});function v(b){g?.closeParents(b)}function p(b){if(!t.disabled)if(b.key==="Tab"||b.key==="Enter"&&!t.closeOnContentClick){if(b.key==="Enter"&&(b.target instanceof HTMLTextAreaElement||b.target instanceof HTMLInputElement&&b.target.closest("form")))return;b.key==="Enter"&&b.preventDefault(),ZC(Qo(f.value?.contentEl,!1),b.shiftKey?"prev":"next",T=>T.tabIndex>=0)||(r.value=!1,f.value?.activatorEl?.focus())}else t.submenu&&b.key===(a.value?"ArrowRight":"ArrowLeft")&&(r.value=!1,f.value?.activatorEl?.focus())}function y(b){if(t.disabled)return;const S=f.value?.contentEl;S&&r.value?b.key==="ArrowDown"?(b.preventDefault(),b.stopImmediatePropagation(),ql(S,"next")):b.key==="ArrowUp"?(b.preventDefault(),b.stopImmediatePropagation(),ql(S,"prev")):t.submenu&&(b.key===(a.value?"ArrowRight":"ArrowLeft")?r.value=!1:b.key===(a.value?"ArrowLeft":"ArrowRight")&&(b.preventDefault(),ql(S,"first"))):(t.submenu?b.key===(a.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(b.key))&&(r.value=!0,b.preventDefault(),setTimeout(()=>setTimeout(()=>y(b))))}const x=te(()=>oe({"aria-haspopup":"menu","aria-expanded":String(r.value),"aria-controls":c.value,onKeydown:y},t.activatorProps));return Ge(()=>{const b=Sr.filterProps(t);return F(Sr,oe({ref:f,id:c.value,class:["v-menu",t.class],style:t.style},b,{modelValue:r.value,"onUpdate:modelValue":S=>r.value=S,absolute:!0,activatorProps:x.value,location:t.location??(t.submenu?"end":"bottom"),"onClick:outside":v,onKeydown:p},o),{activator:n.activator,default:function(){for(var S=arguments.length,T=new Array(S),L=0;L<S;L++)T[L]=arguments[L];return F(on,{root:"VMenu"},{default:()=>[n.default?.(...T)]})}})}),Ui({id:c,ΨopenChildren:h},f)}}),l2=Pe({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...rt(),...tc({transition:{component:Mg}})},"VCounter"),qm=Me()({name:"VCounter",functional:!0,props:l2(),setup(t,e){let{slots:n}=e;const r=ve(()=>t.max?`${t.value} / ${t.max}`:String(t.value));return Ge(()=>F(ec,{transition:t.transition},{default:()=>[Jn(ee("div",{class:Ye(["v-counter",{"text-error":t.max&&!t.disabled&&parseFloat(t.value)>parseFloat(t.max)},t.class]),style:qe(t.style)},[n.default?n.default({counter:r.value,max:t.max,value:t.value}):r.value]),[[fa,t.active]])]})),{}}}),u2=Pe({floating:Boolean,...rt()},"VFieldLabel"),Co=Me()({name:"VFieldLabel",props:u2(),setup(t,e){let{slots:n}=e;return Ge(()=>F(Rc,{class:Ye(["v-field-label",{"v-field-label--floating":t.floating},t.class]),style:qe(t.style),"aria-hidden":t.floating||void 0},n)),{}}}),c2=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Dc=Pe({appendInnerIcon:ut,bgColor:String,clearable:Boolean,clearIcon:{type:ut,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:ut,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:t=>c2.includes(t)},"onClick:clear":Yn(),"onClick:appendInner":Yn(),"onClick:prependInner":Yn(),...rt(),...Xg(),...ac(),...bi()},"VField"),ta=Me()({name:"VField",inheritAttrs:!1,props:{id:String,...Um(),...Dc()},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:o}=e;const{themeClasses:a}=Dr(t),{loaderClasses:l}=uc(t),{focusClasses:c,isFocused:f,focus:g,blur:h}=ya(t),{InputIcon:m}=Nm(t),{roundedClasses:v}=oc(t),{rtlClasses:p}=xs(),y=ve(()=>t.dirty||t.active),x=ve(()=>!!(t.label||o.label)),b=ve(()=>!t.singleLine&&x.value),S=ei(),T=te(()=>t.id||`input-${S}`),L=ve(()=>`${T.value}-messages`),P=se(),k=se(),V=se(),E=te(()=>["plain","underlined"].includes(t.variant)),M=te(()=>t.error||t.disabled?void 0:y.value&&f.value?t.color:t.baseColor),U=te(()=>{if(!(!t.iconColor||t.glow&&!f.value))return t.iconColor===!0?M.value:t.iconColor}),{backgroundColorClasses:N,backgroundColorStyles:q}=Qu(()=>t.bgColor),{textColorClasses:K,textColorStyles:W}=aa(M);nt(y,le=>{if(b.value){const ye=P.value.$el,ce=k.value.$el;requestAnimationFrame(()=>{const pe=mm(ye),G=ce.getBoundingClientRect(),R=G.x-pe.x,B=G.y-pe.y-(pe.height/2-G.height/2),J=G.width/.75,Be=Math.abs(J-pe.width)>1?{maxWidth:mi(J)}:void 0,ue=getComputedStyle(ye),we=getComputedStyle(ce),De=parseFloat(ue.transitionDuration)*1e3||150,$e=parseFloat(we.getPropertyValue("--v-field-label-scale")),be=we.getPropertyValue("color");ye.style.visibility="visible",ce.style.visibility="hidden",hr(ye,{transform:`translate(${R}px, ${B}px) scale(${$e})`,color:be,...Be},{duration:De,easing:Zo,direction:le?"normal":"reverse"}).finished.then(()=>{ye.style.removeProperty("visibility"),ce.style.removeProperty("visibility")})})}},{flush:"post"});const Q=te(()=>({isActive:y,isFocused:f,controlRef:V,blur:h,focus:g}));function ie(le){le.target!==document.activeElement&&le.preventDefault()}return Ge(()=>{const le=t.variant==="outlined",ye=!!(o["prepend-inner"]||t.prependInnerIcon),ce=!!(t.clearable||o.clear)&&!t.disabled,pe=!!(o["append-inner"]||t.appendInnerIcon||ce),G=()=>o.label?o.label({...Q.value,label:t.label,props:{for:T.value}}):t.label;return ee("div",oe({class:["v-field",{"v-field--active":y.value,"v-field--appended":pe,"v-field--center-affix":t.centerAffix??!E.value,"v-field--disabled":t.disabled,"v-field--dirty":t.dirty,"v-field--error":t.error,"v-field--glow":t.glow,"v-field--flat":t.flat,"v-field--has-background":!!t.bgColor,"v-field--persistent-clear":t.persistentClear,"v-field--prepended":ye,"v-field--reverse":t.reverse,"v-field--single-line":t.singleLine,"v-field--no-label":!G(),[`v-field--variant-${t.variant}`]:!0},a.value,N.value,c.value,l.value,v.value,p.value,t.class],style:[q.value,t.style],onClick:ie},n),[ee("div",{class:"v-field__overlay"},null),F(cc,{name:"v-field",active:!!t.loading,color:t.error?"error":typeof t.loading=="string"?t.loading:t.color},{default:o.loader}),ye&&ee("div",{key:"prepend",class:"v-field__prepend-inner"},[t.prependInnerIcon&&F(m,{key:"prepend-icon",name:"prependInner",color:U.value},null),o["prepend-inner"]?.(Q.value)]),ee("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(t.variant)&&b.value&&F(Co,{key:"floating-label",ref:k,class:Ye([K.value]),floating:!0,for:T.value,style:qe(W.value)},{default:()=>[G()]}),x.value&&F(Co,{key:"label",ref:P,for:T.value},{default:()=>[G()]}),o.default?.({...Q.value,props:{id:T.value,class:"v-field__input","aria-describedby":L.value},focus:g,blur:h})??ee("div",{id:T.value,class:"v-field__input","aria-describedby":L.value},null)]),ce&&F(Ug,{key:"clear"},{default:()=>[Jn(ee("div",{class:"v-field__clearable",onMousedown:R=>{R.preventDefault(),R.stopPropagation()}},[F(on,{defaults:{VIcon:{icon:t.clearIcon}}},{default:()=>[o.clear?o.clear({...Q.value,props:{onFocus:g,onBlur:h,onClick:t["onClick:clear"],tabindex:-1}}):F(m,{name:"clear",onFocus:g,onBlur:h,tabindex:-1},null)]})]),[[fa,t.dirty]])]}),pe&&ee("div",{key:"append",class:"v-field__append-inner"},[o["append-inner"]?.(Q.value),t.appendInnerIcon&&F(m,{key:"append-icon",name:"appendInner",color:U.value},null)]),ee("div",{class:Ye(["v-field__outline",K.value]),style:qe(W.value)},[le&&ee(ct,null,[ee("div",{class:"v-field__outline__start"},null),b.value&&ee("div",{class:"v-field__outline__notch"},[F(Co,{ref:k,floating:!0,for:T.value},{default:()=>[G()]})]),ee("div",{class:"v-field__outline__end"},null)]),E.value&&b.value&&F(Co,{ref:k,floating:!0,for:T.value},{default:()=>[G()]})])])}),{controlRef:V,fieldIconColor:U}}}),f2=["color","file","time","date","datetime-local","week","month"],Km=Pe({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Cs(),...Dc()},"VTextField"),di=Me()({name:"VTextField",directives:{vIntersect:Mh},inheritAttrs:!1,props:Km(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:o}=e;const a=pt(t,"modelValue"),{isFocused:l,focus:c,blur:f}=ya(t),g=te(()=>typeof t.counterValue=="function"?t.counterValue(a.value):typeof t.counterValue=="number"?t.counterValue:(a.value??"").toString().length),h=te(()=>{if(n.maxlength)return n.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter}),m=te(()=>["plain","underlined"].includes(t.variant));function v(V,E){!t.autofocus||!V||E[0].target?.focus?.()}const p=se(),y=se(),x=se(),b=te(()=>f2.includes(t.type)||t.persistentPlaceholder||l.value||t.active);function S(){x.value!==document.activeElement&&x.value?.focus(),l.value||c()}function T(V){r("mousedown:control",V),V.target!==x.value&&(S(),V.preventDefault())}function L(V){S(),r("click:control",V)}function P(V,E){V.stopPropagation(),S(),At(()=>{a.value=null,E(),Ec(t["onClick:clear"],V)})}function k(V){const E=V.target;if(a.value=E.value,t.modelModifiers?.trim&&["text","search","password","tel","url"].includes(t.type)){const M=[E.selectionStart,E.selectionEnd];At(()=>{E.selectionStart=M[0],E.selectionEnd=M[1]})}}return Ge(()=>{const V=!!(o.counter||t.counter!==!1&&t.counter!=null),E=!!(V||o.details),[M,U]=bs(n),{modelValue:N,...q}=Qn.filterProps(t),K=ta.filterProps(t);return F(Qn,oe({ref:p,modelValue:a.value,"onUpdate:modelValue":W=>a.value=W,class:["v-text-field",{"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-input--plain-underlined":m.value},t.class],style:t.style},M,q,{centerAffix:!m.value,focused:l.value}),{...o,default:W=>{let{id:Q,isDisabled:ie,isDirty:le,isReadonly:ye,isValid:ce,reset:pe}=W;return F(ta,oe({ref:y,onMousedown:T,onClick:L,"onClick:clear":G=>P(G,pe),"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"],role:t.role},K,{id:Q.value,active:b.value||le.value,dirty:le.value||t.dirty,disabled:ie.value,focused:l.value,error:ce.value===!1}),{...o,default:G=>{let{props:{class:R,...B}}=G;const J=Jn(ee("input",oe({ref:x,value:a.value,onInput:k,autofocus:t.autofocus,readonly:ye.value,disabled:ie.value,name:t.name,placeholder:t.placeholder,size:1,type:t.type,onFocus:S,onBlur:f},B,U),null),[[Mh,{handler:v},null,{once:!0}]]);return ee(ct,null,[t.prefix&&ee("span",{class:"v-text-field__prefix"},[ee("span",{class:"v-text-field__prefix__text"},[t.prefix])]),o.default?ee("div",{class:Ye(R),"data-no-activator":""},[o.default(),J]):zx(J,{class:R}),t.suffix&&ee("span",{class:"v-text-field__suffix"},[ee("span",{class:"v-text-field__suffix__text"},[t.suffix])])])}})},details:E?W=>ee(ct,null,[o.details?.(W),V&&ee(ct,null,[ee("span",null,null),F(qm,{active:t.persistentCounter||l.value,value:g.value,max:h.value,disabled:t.disabled},o.counter)])]):void 0})}),Ui({},p,y,x)}}),d2=Pe({renderless:Boolean,...rt()},"VVirtualScrollItem"),h2=Me()({name:"VVirtualScrollItem",inheritAttrs:!1,props:d2(),emits:{"update:height":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:o}=e;const{resizeRef:a,contentRect:l}=Jo(void 0,"border");nt(()=>l.value?.height,c=>{c!=null&&r("update:height",c)}),Ge(()=>t.renderless?ee(ct,null,[o.default?.({itemRef:a})]):ee("div",oe({ref:a,class:["v-virtual-scroll__item",t.class],style:t.style},n),[o.default?.()]))}}),g2=-1,m2=1,Ql=100,v2=Pe({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function _2(t,e){const n=pm(),r=tt(0);Oh(()=>{r.value=parseFloat(t.itemHeight||0)});const o=tt(0),a=tt(Math.ceil((parseInt(t.height)||n.height.value)/(r.value||16))||1),l=tt(0),c=tt(0),f=se(),g=se();let h=0;const{resizeRef:m,contentRect:v}=Jo();Oh(()=>{m.value=f.value});const p=te(()=>f.value===document.documentElement?n.height.value:v.value?.height||parseInt(t.height)||0),y=te(()=>!!(f.value&&g.value&&p.value&&r.value));let x=Array.from({length:e.value.length}),b=Array.from({length:e.value.length});const S=tt(0);let T=-1;function L(G){return x[G]||r.value}const P=QC(()=>{const G=performance.now();b[0]=0;const R=e.value.length;for(let B=1;B<=R-1;B++)b[B]=(b[B-1]||0)+L(B-1);S.value=Math.max(S.value,performance.now()-G)},S),k=nt(y,G=>{G&&(k(),h=g.value.offsetTop,P.immediate(),le(),~T&&At(()=>{pi&&window.requestAnimationFrame(()=>{ce(T),T=-1})}))});gc(()=>{P.clear()});function V(G,R){const B=x[G],J=r.value;r.value=J?Math.min(r.value,R):R,(B!==R||J!==r.value)&&(x[G]=R,P())}function E(G){return G=Kl(G,0,e.value.length-1),b[G]||0}function M(G){return p2(b,G)}let U=0,N=0,q=0;nt(p,(G,R)=>{R&&(le(),G<R&&requestAnimationFrame(()=>{N=0,le()}))});let K=-1;function W(){if(!f.value||!g.value)return;const G=f.value.scrollTop,R=performance.now();R-q>500?(N=Math.sign(G-U),h=g.value.offsetTop):N=G-U,U=G,q=R,window.clearTimeout(K),K=window.setTimeout(Q,500),le()}function Q(){!f.value||!g.value||(N=0,q=0,window.clearTimeout(K),le())}let ie=-1;function le(){cancelAnimationFrame(ie),ie=requestAnimationFrame(ye)}function ye(){if(!f.value||!p.value)return;const G=U-h,R=Math.sign(N),B=Math.max(0,G-Ql),J=Kl(M(B),0,e.value.length),Be=G+p.value+Ql,ue=Kl(M(Be)+1,J+1,e.value.length);if((R!==g2||J<o.value)&&(R!==m2||ue>a.value)){const we=E(o.value)-E(J),De=E(ue)-E(a.value);Math.max(we,De)>Ql?(o.value=J,a.value=ue):(J<=0&&(o.value=J),ue>=e.value.length&&(a.value=ue))}l.value=E(o.value),c.value=E(e.value.length)-E(a.value)}function ce(G){const R=E(G);!f.value||G&&!R?T=G:f.value.scrollTop=R}const pe=te(()=>e.value.slice(o.value,a.value).map((G,R)=>{const B=R+o.value;return{raw:G,index:B,key:eS(G,t.itemKey,B)}}));return nt(e,()=>{x=Array.from({length:e.value.length}),b=Array.from({length:e.value.length}),P.immediate(),le()},{deep:1}),{calculateVisibleItems:le,containerRef:f,markerRef:g,computedItems:pe,paddingTop:l,paddingBottom:c,scrollToIndex:ce,handleScroll:W,handleScrollend:Q,handleItemResize:V}}function p2(t,e){let n=t.length-1,r=0,o=0,a=null,l=-1;if(t[n]<e)return n;for(;r<=n;)if(o=r+n>>1,a=t[o],a>e)n=o-1;else if(a<e)l=o,r=o+1;else return a===e?o:r;return l}const y2=Pe({items:{type:Array,default:()=>[]},renderless:Boolean,...v2(),...rt(),...ic()},"VVirtualScroll"),b2=Me()({name:"VVirtualScroll",props:y2(),setup(t,e){let{slots:n}=e;const r=_m("VVirtualScroll"),{dimensionStyles:o}=nc(t),{calculateVisibleItems:a,containerRef:l,markerRef:c,handleScroll:f,handleScrollend:g,handleItemResize:h,scrollToIndex:m,paddingTop:v,paddingBottom:p,computedItems:y}=_2(t,ve(()=>t.items));return Gu(()=>t.renderless,()=>{function x(){const S=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";l.value===document.documentElement?(document[S]("scroll",f,{passive:!0}),document[S]("scrollend",g)):(l.value?.[S]("scroll",f,{passive:!0}),l.value?.[S]("scrollend",g))}ca(()=>{l.value=tS(r.vnode.el,!0),x(!0)}),gc(x)}),Ge(()=>{const x=y.value.map(b=>F(h2,{key:b.key,renderless:t.renderless,"onUpdate:height":S=>h(b.index,S)},{default:S=>n.default?.({item:b.raw,index:b.index,...S})}));return t.renderless?ee(ct,null,[ee("div",{ref:c,class:"v-virtual-scroll__spacer",style:qe({paddingTop:mi(v.value)})},null),x,ee("div",{class:"v-virtual-scroll__spacer",style:qe({paddingBottom:mi(p.value)})},null)]):ee("div",{ref:l,class:Ye(["v-virtual-scroll",t.class]),onScrollPassive:f,onScrollend:g,style:qe([o.value,t.style])},[ee("div",{ref:c,class:"v-virtual-scroll__container",style:qe({paddingTop:mi(v.value),paddingBottom:mi(p.value)})},[x])])}),{calculateVisibleItems:a,scrollToIndex:m}}});function w2(t,e){const n=tt(!1);let r;function o(c){cancelAnimationFrame(r),n.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{n.value=!1})})}async function a(){await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>{if(n.value){const f=nt(n,()=>{f(),c()})}else c()})}async function l(c){if(c.key==="Tab"&&e.value?.focus(),!["PageDown","PageUp","Home","End"].includes(c.key))return;const f=t.value?.$el;if(!f)return;(c.key==="Home"||c.key==="End")&&f.scrollTo({top:c.key==="Home"?0:f.scrollHeight,behavior:"smooth"}),await a();const g=f.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(c.key==="PageDown"||c.key==="Home"){const h=f.getBoundingClientRect().top;for(const m of g)if(m.getBoundingClientRect().top>=h){m.focus();break}}else{const h=f.getBoundingClientRect().bottom;for(const m of[...g].reverse())if(m.getBoundingClientRect().bottom<=h){m.focus();break}}}return{onScrollPassive:o,onKeydown:l}}const x2=Pe({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ut,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Ex({itemChildren:!1})},"Select"),C2=Pe({...x2(),...Wi(Km({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...tc({transition:{component:Lc}})},"VSelect"),S2=Me()({name:"VSelect",props:C2(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,e){let{slots:n}=e;const{t:r}=ws(),o=se(),a=se(),l=se(),{items:c,transformIn:f,transformOut:g}=Sx(t),h=pt(t,"modelValue",[],G=>f(G===null?[null]:An(G)),G=>{const R=g(G);return t.multiple?R:R[0]??null}),m=te(()=>typeof t.counterValue=="function"?t.counterValue(h.value):typeof t.counterValue=="number"?t.counterValue:h.value.length),v=Wm(t),p=te(()=>h.value.map(G=>G.value)),y=tt(!1);let x="",b=-1,S;const T=te(()=>t.hideSelected?c.value.filter(G=>!h.value.some(R=>(t.valueComparator||fs)(R,G))):c.value),L=te(()=>t.hideNoData&&!T.value.length||v.isReadonly.value||v.isDisabled.value),P=pt(t,"menu"),k=te({get:()=>P.value,set:G=>{P.value&&!G&&a.value?.ΨopenChildren.size||G&&L.value||(P.value=G)}}),V=ve(()=>k.value?t.closeText:t.openText),E=te(()=>({...t.menuProps,activatorProps:{...t.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),M=se(),U=w2(M,o);function N(G){t.openOnClear&&(k.value=!0)}function q(){L.value||(k.value=!k.value)}function K(G){Nh(G)&&W(G)}function W(G){if(!G.key||v.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(G.key)&&G.preventDefault(),["Enter","ArrowDown"," "].includes(G.key)&&(k.value=!0),["Escape","Tab"].includes(G.key)&&(k.value=!1),G.key==="Home"?M.value?.focus("first"):G.key==="End"&&M.value?.focus("last");const R=1e3;if(!Nh(G))return;const B=performance.now();B-S>R&&(x="",b=-1),x+=G.key.toLowerCase(),S=B;const J=T.value;function Be(){let be=ue();return be||x.at(-1)===x.at(-2)&&(x=x.slice(0,-1),be=ue(),be)||(b=-1,be=ue(),be)?be:(x=G.key.toLowerCase(),ue())}function ue(){for(let be=b+1;be<J.length;be++){const Ze=J[be];if(Ze.title.toLowerCase().startsWith(x))return[Ze,be]}}const we=Be();if(!we)return;const[De,$e]=we;b=$e,M.value?.focus($e),t.multiple||(h.value=[De])}function Q(G){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!G.props.disabled)if(t.multiple){const B=h.value.findIndex(Be=>(t.valueComparator||fs)(Be.value,G.value)),J=R??!~B;if(~B){const Be=J?[...h.value,G]:[...h.value];Be.splice(B,1),h.value=Be}else J&&(h.value=[...h.value,G])}else{const B=R!==!1;h.value=B?[G]:[],At(()=>{k.value=!1})}}function ie(G){M.value?.$el.contains(G.relatedTarget)||(k.value=!1)}function le(){t.eager&&l.value?.calculateVisibleItems()}function ye(){y.value&&o.value?.focus()}function ce(G){y.value=!0}function pe(G){if(G==null)h.value=[];else if(Du(o.value,":autofill")||Du(o.value,":-webkit-autofill")){const R=c.value.find(B=>B.title===G);R&&Q(R)}else o.value&&(o.value.value="")}return nt(k,()=>{if(!t.hideSelected&&k.value&&h.value.length){const G=T.value.findIndex(R=>h.value.some(B=>(t.valueComparator||fs)(B.value,R.value)));pi&&window.requestAnimationFrame(()=>{G>=0&&l.value?.scrollToIndex(G)})}}),nt(()=>t.items,(G,R)=>{k.value||y.value&&!R.length&&G.length&&(k.value=!0)}),Ge(()=>{const G=!!(t.chips||n.chip),R=!!(!t.hideNoData||T.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),B=h.value.length>0,J=di.filterProps(t),Be=B||!y.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return F(di,oe({ref:o},J,{modelValue:h.value.map(ue=>ue.props.value).join(", "),"onUpdate:modelValue":pe,focused:y.value,"onUpdate:focused":ue=>y.value=ue,validationValue:h.externalValue,counterValue:m.value,dirty:B,class:["v-select",{"v-select--active-menu":k.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":h.value.length,"v-select--selection-slot":!!n.selection},t.class],style:t.style,inputmode:"none",placeholder:Be,"onClick:clear":N,"onMousedown:control":q,onBlur:ie,onKeydown:W,"aria-label":r(V.value),title:r(V.value)}),{...n,default:()=>ee(ct,null,[F(Hm,oe({ref:a,modelValue:k.value,"onUpdate:modelValue":ue=>k.value=ue,activator:"parent",contentClass:"v-select__content",disabled:L.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:le,onAfterLeave:ye},E.value),{default:()=>[R&&F(Hg,oe({ref:M,selected:p.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:ue=>ue.preventDefault(),onKeydown:K,onFocusin:ce,tabindex:"-1","aria-live":"polite","aria-label":`${t.label}-list`,color:t.itemColor??t.color},U,t.listProps),{default:()=>[n["prepend-item"]?.(),!T.value.length&&!t.hideNoData&&(n["no-data"]?.()??F(vr,{key:"no-data",title:r(t.noDataText)},null)),F(b2,{ref:l,renderless:!0,items:T.value,itemKey:"value"},{default:ue=>{let{item:we,index:De,itemRef:$e}=ue;const be=oe(we.props,{ref:$e,key:we.value,onClick:()=>Q(we,null)});return n.item?.({item:we,index:De,props:be})??F(vr,oe(be,{role:"option"}),{prepend:Ze=>{let{isSelected:st}=Ze;return ee(ct,null,[t.multiple&&!t.hideSelected?F(HS,{key:we.value,modelValue:st,ripple:!1,tabindex:"-1"},null):void 0,we.props.prependAvatar&&F(gs,{image:we.props.prependAvatar},null),we.props.prependIcon&&F(_t,{icon:we.props.prependIcon},null)])}})}}),n["append-item"]?.()]})]}),h.value.map((ue,we)=>{function De(st){st.stopPropagation(),st.preventDefault(),Q(ue,!1)}const $e={"onClick:close":De,onKeydown(st){st.key!=="Enter"&&st.key!==" "||(st.preventDefault(),st.stopPropagation(),De(st))},onMousedown(st){st.preventDefault(),st.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},be=G?!!n.chip:!!n.selection,Ze=be?nS(G?n.chip({item:ue,index:we,props:$e}):n.selection({item:ue,index:we})):void 0;if(!(be&&!Ze))return ee("div",{key:ue.value,class:"v-select__selection"},[G?n.chip?F(on,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:ue.title}}},{default:()=>[Ze]}):F(Xm,oe({key:"chip",closable:t.closableChips,size:"small",text:ue.title,disabled:ue.props.disabled},$e),null):Ze??ee("span",{class:"v-select__selection-text"},[ue.title,t.multiple&&we<h.value.length-1&&ee("span",{class:"v-select__selection-comma"},[he(",")])])])})]),"append-inner":function(){for(var ue=arguments.length,we=new Array(ue),De=0;De<ue;De++)we[De]=arguments[De];return ee(ct,null,[n["append-inner"]?.(...we),t.menuIcon?F(_t,{class:"v-select__menu-icon",color:o.value?.fieldIconColor,icon:t.menuIcon},null):void 0])}})}),Ui({isFocused:y,menu:k,select:Q},o)}}),E2=Pe({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...lc({origin:"center center",scrollStrategy:"block",transition:{component:Lc},zIndex:2400})},"VDialog"),Ss=Me()({name:"VDialog",props:E2(),emits:{"update:modelValue":t=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(t,e){let{emit:n,slots:r}=e;const o=pt(t,"modelValue"),{scopeId:a}=la(),l=se();function c(h){const m=h.relatedTarget,v=h.target;if(m!==v&&l.value?.contentEl&&l.value?.globalTop&&![document,l.value.contentEl].includes(v)&&!l.value.contentEl.contains(v)){const p=Qo(l.value.contentEl);if(!p.length)return;const y=p[0],x=p[p.length-1];m===y?x.focus():y.focus()}}mc(()=>{document.removeEventListener("focusin",c)}),pi&&nt(()=>o.value&&t.retainFocus,h=>{h?document.addEventListener("focusin",c):document.removeEventListener("focusin",c)},{immediate:!0});function f(){n("afterEnter"),(t.scrim||t.retainFocus)&&l.value?.contentEl&&!l.value.contentEl.contains(document.activeElement)&&l.value.contentEl.focus({preventScroll:!0})}function g(){n("afterLeave")}return nt(o,async h=>{h||(await At(),l.value.activatorEl?.focus({preventScroll:!0}))}),Ge(()=>{const h=Sr.filterProps(t),m=oe({"aria-haspopup":"dialog"},t.activatorProps),v=oe({tabindex:-1},t.contentProps);return F(Sr,oe({ref:l,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable},t.class],style:t.style},h,{modelValue:o.value,"onUpdate:modelValue":p=>o.value=p,"aria-modal":"true",activatorProps:m,contentProps:v,height:t.fullscreen?void 0:t.height,width:t.fullscreen?void 0:t.width,maxHeight:t.fullscreen?void 0:t.maxHeight,maxWidth:t.fullscreen?void 0:t.maxWidth,role:"dialog",onAfterEnter:f,onAfterLeave:g},a),{activator:r.activator,default:function(){for(var p=arguments.length,y=new Array(p),x=0;x<p;x++)y[x]=arguments[x];return F(on,{root:"VDialog"},{default:()=>[r.default?.(...y)]})}})}),Ui({},l)}}),Gr=Me()({name:"VCardActions",props:rt(),setup(t,e){let{slots:n}=e;return va({VBtn:{slim:!0,variant:"text"}}),Ge(()=>ee("div",{class:Ye(["v-card-actions",t.class]),style:qe(t.style)},[n.default?.()])),{}}}),k2=Pe({opacity:[Number,String],...rt(),...Ln()},"VCardSubtitle"),Gc=Me()({name:"VCardSubtitle",props:k2(),setup(t,e){let{slots:n}=e;return Ge(()=>F(t.tag,{class:Ye(["v-card-subtitle",t.class]),style:qe([{"--v-card-subtitle-opacity":t.opacity},t.style])},n)),{}}}),T2=iS("v-card-title"),P2=Pe({appendAvatar:String,appendIcon:ut,prependAvatar:String,prependIcon:ut,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...rt(),...Lr()},"VCardItem"),A2=Me()({name:"VCardItem",props:P2(),setup(t,e){let{slots:n}=e;return Ge(()=>{const r=!!(t.prependAvatar||t.prependIcon),o=!!(r||n.prepend),a=!!(t.appendAvatar||t.appendIcon),l=!!(a||n.append),c=!!(t.title!=null||n.title),f=!!(t.subtitle!=null||n.subtitle);return ee("div",{class:Ye(["v-card-item",t.class]),style:qe(t.style)},[o&&ee("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?F(on,{key:"prepend-defaults",disabled:!r,defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon}}},n.prepend):ee(ct,null,[t.prependAvatar&&F(gs,{key:"prepend-avatar",density:t.density,image:t.prependAvatar},null),t.prependIcon&&F(_t,{key:"prepend-icon",density:t.density,icon:t.prependIcon},null)])]),ee("div",{class:"v-card-item__content"},[c&&F(T2,{key:"title"},{default:()=>[n.title?.()??vi(t.title)]}),f&&F(Gc,{key:"subtitle"},{default:()=>[n.subtitle?.()??vi(t.subtitle)]}),n.default?.()]),l&&ee("div",{key:"append",class:"v-card-item__append"},[n.append?F(on,{key:"append-defaults",disabled:!a,defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon}}},n.append):ee(ct,null,[t.appendIcon&&F(_t,{key:"append-icon",density:t.density,icon:t.appendIcon},null),t.appendAvatar&&F(gs,{key:"append-avatar",density:t.density,image:t.appendAvatar},null)])])])}),{}}}),F2=Pe({opacity:[Number,String],...rt(),...Ln()},"VCardText"),ba=Me()({name:"VCardText",props:F2(),setup(t,e){let{slots:n}=e;return Ge(()=>F(t.tag,{class:Ye(["v-card-text",t.class]),style:qe([{"--v-card-text-opacity":t.opacity},t.style])},n)),{}}}),L2=Pe({appendAvatar:String,appendIcon:ut,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:ut,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...jg(),...rt(),...Lr(),...ic(),...$g(),...Xg(),...Ax(),...Px(),...ac(),...Wg(),...Ln(),...bi(),...sc({variant:"elevated"})},"VCard"),Es=Me()({name:"VCard",directives:{vRipple:Cr},props:L2(),setup(t,e){let{attrs:n,slots:r}=e;const{themeClasses:o}=Dr(t),{borderClasses:a}=Og(t),{colorClasses:l,colorStyles:c,variantClasses:f}=Bg(t),{densityClasses:g}=ps(t),{dimensionStyles:h}=nc(t),{elevationClasses:m}=Vg(t),{loaderClasses:v}=uc(t),{locationStyles:p}=kx(t),{positionClasses:y}=Tx(t),{roundedClasses:x}=oc(t),b=Gg(t,n);return Ge(()=>{const S=t.link!==!1&&b.isLink.value,T=!t.disabled&&t.link!==!1&&(t.link||b.isClickable.value),L=S?"a":t.tag,P=!!(r.title||t.title!=null),k=!!(r.subtitle||t.subtitle!=null),V=P||k,E=!!(r.append||t.appendAvatar||t.appendIcon),M=!!(r.prepend||t.prependAvatar||t.prependIcon),U=!!(r.image||t.image),N=V||M||E,q=!!(r.text||t.text!=null);return Jn(F(L,oe({class:["v-card",{"v-card--disabled":t.disabled,"v-card--flat":t.flat,"v-card--hover":t.hover&&!(t.disabled||t.flat),"v-card--link":T},o.value,a.value,l.value,g.value,m.value,v.value,y.value,x.value,f.value,t.class],style:[c.value,h.value,p.value,t.style],onClick:T&&b.navigate,tabindex:t.disabled?-1:void 0},b.linkProps),{default:()=>[U&&ee("div",{key:"image",class:"v-card__image"},[r.image?F(on,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},r.image):F(Fx,{key:"image-img",cover:!0,src:t.image},null)]),F(cc,{name:"v-card",active:!!t.loading,color:typeof t.loading=="boolean"?void 0:t.loading},{default:r.loader}),N&&F(A2,{key:"item",prependAvatar:t.prependAvatar,prependIcon:t.prependIcon,title:t.title,subtitle:t.subtitle,appendAvatar:t.appendAvatar,appendIcon:t.appendIcon},{default:r.item,prepend:r.prepend,title:r.title,subtitle:r.subtitle,append:r.append}),q&&F(ba,{key:"text"},{default:()=>[r.text?.()??t.text]}),r.default?.(),r.actions&&F(Gr,null,{default:r.actions}),Ng(T,"v-card")]}),[[Cr,T&&t.ripple]])}),{}}}),I2=t=>{const{touchstartX:e,touchendX:n,touchstartY:r,touchendY:o}=t,a=.5,l=16;t.offsetX=n-e,t.offsetY=o-r,Math.abs(t.offsetY)<a*Math.abs(t.offsetX)&&(t.left&&n<e-l&&t.left(t),t.right&&n>e+l&&t.right(t)),Math.abs(t.offsetX)<a*Math.abs(t.offsetY)&&(t.up&&o<r-l&&t.up(t),t.down&&o>r+l&&t.down(t))};function M2(t,e){const n=t.changedTouches[0];e.touchstartX=n.clientX,e.touchstartY=n.clientY,e.start?.({originalEvent:t,...e})}function R2(t,e){const n=t.changedTouches[0];e.touchendX=n.clientX,e.touchendY=n.clientY,e.end?.({originalEvent:t,...e}),I2(e)}function O2(t,e){const n=t.changedTouches[0];e.touchmoveX=n.clientX,e.touchmoveY=n.clientY,e.move?.({originalEvent:t,...e})}function V2(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:n=>M2(n,e),touchend:n=>R2(n,e),touchmove:n=>O2(n,e)}}function D2(t,e){const n=e.value,r=n?.parent?t.parentElement:t,o=n?.options??{passive:!0},a=e.instance?.$.uid;if(!r||!a)return;const l=V2(e.value);r._touchHandlers=r._touchHandlers??Object.create(null),r._touchHandlers[a]=l,ym(l).forEach(c=>{r.addEventListener(c,l[c],o)})}function G2(t,e){const n=e.value?.parent?t.parentElement:t,r=e.instance?.$.uid;if(!n?._touchHandlers||!r)return;const o=n._touchHandlers[r];ym(o).forEach(a=>{n.removeEventListener(a,o[a])}),delete n._touchHandlers[r]}const Uu={mounted:D2,unmounted:G2},Ym=Symbol.for("vuetify:v-window"),Zm=Symbol.for("vuetify:v-window-group"),Jm=Pe({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||t==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...rt(),...Ln(),...bi()},"VWindow"),Wu=Me()({name:"VWindow",directives:{vTouch:Uu},props:Jm(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:r}=Dr(t),{isRtl:o}=xs(),{t:a}=ws(),l=rc(t,Zm),c=se(),f=te(()=>o.value?!t.reverse:t.reverse),g=tt(!1),h=te(()=>{const P=t.direction==="vertical"?"y":"x",V=(f.value?!g.value:g.value)?"-reverse":"";return`v-window-${P}${V}-transition`}),m=tt(0),v=se(void 0),p=te(()=>l.items.value.findIndex(P=>l.selected.value.includes(P.id)));nt(p,(P,k)=>{const V=l.items.value.length,E=V-1;V<=2?g.value=P<k:P===E&&k===0?g.value=!0:P===0&&k===E?g.value=!1:g.value=P<k}),hc(Ym,{transition:h,isReversed:g,transitionCount:m,transitionHeight:v,rootRef:c});const y=ve(()=>t.continuous||p.value!==0),x=ve(()=>t.continuous||p.value!==l.items.value.length-1);function b(){y.value&&l.prev()}function S(){x.value&&l.next()}const T=te(()=>{const P=[],k={icon:o.value?t.nextIcon:t.prevIcon,class:`v-window__${f.value?"right":"left"}`,onClick:l.prev,"aria-label":a("$vuetify.carousel.prev")};P.push(y.value?n.prev?n.prev({props:k}):F(Ee,k,null):ee("div",null,null));const V={icon:o.value?t.prevIcon:t.nextIcon,class:`v-window__${f.value?"left":"right"}`,onClick:l.next,"aria-label":a("$vuetify.carousel.next")};return P.push(x.value?n.next?n.next({props:V}):F(Ee,V,null):ee("div",null,null)),P}),L=te(()=>t.touch===!1?t.touch:{...{left:()=>{f.value?b():S()},right:()=>{f.value?S():b()},start:k=>{let{originalEvent:V}=k;V.stopPropagation()}},...t.touch===!0?{}:t.touch});return Ge(()=>Jn(F(t.tag,{ref:c,class:Ye(["v-window",{"v-window--show-arrows-on-hover":t.showArrows==="hover"},r.value,t.class]),style:qe(t.style)},{default:()=>[ee("div",{class:"v-window__container",style:qe({height:v.value})},[n.default?.({group:l}),t.showArrows!==!1&&ee("div",{class:"v-window__controls"},[T.value])]),n.additional?.({group:l})]}),[[Uu,L.value]])),{group:l}}}),Qm=Pe({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...rt(),...zg(),...Mx()},"VWindowItem"),na=Me()({name:"VWindowItem",directives:{vTouch:Uu},props:Qm(),emits:{"group:selected":t=>!0},setup(t,e){let{slots:n}=e;const r=Mr(Ym),o=Dg(t,Zm),{isBooted:a}=Lx();if(!r||!o)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const l=tt(!1),c=te(()=>a.value&&(r.isReversed.value?t.reverseTransition!==!1:t.transition!==!1));function f(){!l.value||!r||(l.value=!1,r.transitionCount.value>0&&(r.transitionCount.value-=1,r.transitionCount.value===0&&(r.transitionHeight.value=void 0)))}function g(){l.value||!r||(l.value=!0,r.transitionCount.value===0&&(r.transitionHeight.value=mi(r.rootRef.value?.clientHeight)),r.transitionCount.value+=1)}function h(){f()}function m(y){l.value&&At(()=>{!c.value||!l.value||!r||(r.transitionHeight.value=mi(y.clientHeight))})}const v=te(()=>{const y=r.isReversed.value?t.reverseTransition:t.transition;return c.value?{name:typeof y!="string"?r.transition.value:y,onBeforeEnter:g,onAfterEnter:f,onEnterCancelled:h,onBeforeLeave:g,onAfterLeave:f,onLeaveCancelled:h,onEnter:m}:!1}),{hasContent:p}=Ix(t,o.isSelected);return Ge(()=>F(ec,{transition:v.value,disabled:!a.value},{default:()=>[Jn(ee("div",{class:Ye(["v-window-item",o.selectedClass.value,t.class]),style:qe(t.style)},[p.value&&n.default?.()]),[[fa,o.isSelected.value]])]})),{groupItem:o}}}),B2={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},N2={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},U2={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},W2={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},z2={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},$2={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},j2={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},X2={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},H2={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},q2={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},K2={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},Y2={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},Z2={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},J2={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},Q2={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},eE={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},tE={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},nE={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},iE={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},rE={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},sE={red:B2,pink:N2,purple:U2,deepPurple:W2,indigo:z2,blue:$2,lightBlue:j2,cyan:X2,teal:H2,green:q2,lightGreen:K2,lime:Y2,yellow:Z2,amber:J2,orange:Q2,deepOrange:eE,brown:tE,blueGrey:nE,grey:iE,shades:rE},oE=Pe({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:t=>typeof t=="boolean"||[1e3,1024].includes(Number(t))},...Cs({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:t=>t.multiple?[]:null,validator:t=>An(t).every(e=>e!=null&&typeof e=="object")},...Dc({clearable:!0})},"VFileInput"),aE=Me()({name:"VFileInput",inheritAttrs:!1,props:oE(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:o}=e;const{t:a}=ws(),l=pt(t,"modelValue",t.modelValue,W=>An(W),W=>!t.multiple&&Array.isArray(W)?W[0]:W),{isFocused:c,focus:f,blur:g}=ya(t),h=te(()=>typeof t.showSize!="boolean"?t.showSize:void 0),m=te(()=>(l.value??[]).reduce((W,Q)=>{let{size:ie=0}=Q;return W+ie},0)),v=te(()=>Uh(m.value,h.value)),p=te(()=>(l.value??[]).map(W=>{const{name:Q="",size:ie=0}=W;return t.showSize?`${Q} (${Uh(ie,h.value)})`:Q})),y=te(()=>{const W=l.value?.length??0;return t.showSize?a(t.counterSizeString,W,v.value):a(t.counterString,W)}),x=se(),b=se(),S=se(),T=ve(()=>c.value||t.active),L=te(()=>["plain","underlined"].includes(t.variant)),P=tt(!1);function k(){S.value!==document.activeElement&&S.value?.focus(),c.value||f()}function V(W){S.value?.click()}function E(W){r("mousedown:control",W)}function M(W){S.value?.click(),r("click:control",W)}function U(W){W.stopPropagation(),k(),At(()=>{l.value=[],Ec(t["onClick:clear"],W)})}function N(W){W.preventDefault(),W.stopImmediatePropagation(),P.value=!0}function q(W){W.preventDefault(),P.value=!1}function K(W){if(W.preventDefault(),W.stopImmediatePropagation(),P.value=!1,!W.dataTransfer?.files?.length||!S.value)return;const Q=new DataTransfer;for(const ie of W.dataTransfer.files)Q.items.add(ie);S.value.files=Q.files,S.value.dispatchEvent(new Event("change",{bubbles:!0}))}return nt(l,W=>{(!Array.isArray(W)||!W.length)&&S.value&&(S.value.value="")}),Ge(()=>{const W=!!(o.counter||t.counter),Q=!!(W||o.details),[ie,le]=bs(n),{modelValue:ye,...ce}=Qn.filterProps(t),pe=ta.filterProps(t);return F(Qn,oe({ref:x,modelValue:t.multiple?l.value:l.value[0],class:["v-file-input",{"v-file-input--chips":!!t.chips,"v-file-input--dragging":P.value,"v-file-input--hide":t.hideInput,"v-input--plain-underlined":L.value},t.class],style:t.style,"onClick:prepend":V},ie,ce,{centerAffix:!L.value,focused:c.value}),{...o,default:G=>{let{id:R,isDisabled:B,isDirty:J,isReadonly:Be,isValid:ue}=G;return F(ta,oe({ref:b,"prepend-icon":t.prependIcon,onMousedown:E,onClick:M,"onClick:clear":U,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"]},pe,{id:R.value,active:T.value||J.value,dirty:J.value||t.dirty,disabled:B.value,focused:c.value,error:ue.value===!1,onDragover:N,onDrop:K}),{...o,default:we=>{let{props:{class:De,...$e}}=we;return ee(ct,null,[ee("input",oe({ref:S,type:"file",readonly:Be.value,disabled:B.value,multiple:t.multiple,name:t.name,onClick:be=>{be.stopPropagation(),Be.value&&be.preventDefault(),k()},onChange:be=>{if(!be.target)return;const Ze=be.target;l.value=[...Ze.files??[]]},onDragleave:q,onFocus:k,onBlur:g},$e,le),null),ee("div",{class:Ye(De)},[!!l.value?.length&&!t.hideInput&&(o.selection?o.selection({fileNames:p.value,totalBytes:m.value,totalBytesReadable:v.value}):t.chips?p.value.map(be=>F(Xm,{key:be,size:"small",text:be},null)):p.value.join(", "))])])}})},details:Q?G=>ee(ct,null,[o.details?.(G),W&&ee(ct,null,[ee("span",null,null),F(qm,{active:!!l.value?.length,value:y.value,disabled:t.disabled},o.counter)])]):void 0})}),Ui({},x,b,S)}}),lE=Pe({...pa({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),eg=Me()({name:"VRadio",props:lE(),setup(t,e){let{slots:n}=e;return Ge(()=>{const r=Bi.filterProps(t);return F(Bi,oe(r,{class:["v-radio",t.class],style:t.style,type:"radio"}),n)}),{}}}),uE=Pe({height:{type:[Number,String],default:"auto"},...Cs(),...Wi(Oc(),["multiple"]),trueIcon:{type:ut,default:"$radioOn"},falseIcon:{type:ut,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),cE=Me()({name:"VRadioGroup",inheritAttrs:!1,props:uE(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const o=ei(),a=te(()=>t.id||`radio-group-${o}`),l=pt(t,"modelValue");return Ge(()=>{const[c,f]=bs(n),g=Qn.filterProps(t),h=Bi.filterProps(t),m=r.label?r.label({label:t.label,props:{for:a.value}}):t.label;return F(Qn,oe({class:["v-radio-group",t.class],style:t.style},c,g,{modelValue:l.value,"onUpdate:modelValue":v=>l.value=v,id:a.value}),{...r,default:v=>{let{id:p,messagesId:y,isDisabled:x,isReadonly:b}=v;return ee(ct,null,[m&&F(Rc,{id:p.value},{default:()=>[m]}),F($S,oe(h,{id:p.value,"aria-describedby":y.value,defaultsTarget:"VRadio",trueIcon:t.trueIcon,falseIcon:t.falseIcon,type:t.type,disabled:x.value,readonly:b.value,"aria-labelledby":m?p.value:void 0,multiple:!1},f,{modelValue:l.value,"onUpdate:modelValue":S=>l.value=S}),r)])}})}),{}}}),fE=Pe({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Cs(),...pa()},"VSwitch"),dE=Me()({name:"VSwitch",inheritAttrs:!1,props:fE(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const o=pt(t,"indeterminate"),a=pt(t,"modelValue"),{loaderClasses:l}=uc(t),{isFocused:c,focus:f,blur:g}=ya(t),h=se(),m=pi&&window.matchMedia("(forced-colors: active)").matches,v=ve(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),p=ei(),y=ve(()=>t.id||`switch-${p}`);function x(){o.value&&(o.value=!1)}function b(S){S.stopPropagation(),S.preventDefault(),h.value?.input?.click()}return Ge(()=>{const[S,T]=bs(n),L=Qn.filterProps(t),P=Bi.filterProps(t);return F(Qn,oe({class:["v-switch",{"v-switch--flat":t.flat},{"v-switch--inset":t.inset},{"v-switch--indeterminate":o.value},l.value,t.class]},S,L,{modelValue:a.value,"onUpdate:modelValue":k=>a.value=k,id:y.value,focused:c.value,style:t.style}),{...r,default:k=>{let{id:V,messagesId:E,isDisabled:M,isReadonly:U,isValid:N}=k;const q={model:a,isValid:N};return F(Bi,oe({ref:h},P,{modelValue:a.value,"onUpdate:modelValue":[K=>a.value=K,x],id:V.value,"aria-describedby":E.value,type:"checkbox","aria-checked":o.value?"mixed":void 0,disabled:M.value,readonly:U.value,onFocus:f,onBlur:g},T),{...r,default:K=>{let{backgroundColorClasses:W,backgroundColorStyles:Q}=K;return ee("div",{class:Ye(["v-switch__track",m?void 0:W.value]),style:qe(Q.value),onClick:b},[r["track-true"]&&ee("div",{key:"prepend",class:"v-switch__track-true"},[r["track-true"](q)]),r["track-false"]&&ee("div",{key:"append",class:"v-switch__track-false"},[r["track-false"](q)])])},input:K=>{let{inputNode:W,icon:Q,backgroundColorClasses:ie,backgroundColorStyles:le}=K;return ee(ct,null,[W,ee("div",{class:Ye(["v-switch__thumb",{"v-switch__thumb--filled":Q||t.loading},t.inset||m?void 0:ie.value]),style:qe(t.inset?void 0:le.value)},[r.thumb?F(on,{defaults:{VIcon:{icon:Q,size:"x-small"}}},{default:()=>[r.thumb({...q,icon:Q})]}):F(Rx,null,{default:()=>[t.loading?F(cc,{name:"v-switch",active:!0,color:N.value===!1?void 0:v.value},{default:ye=>r.loader?r.loader(ye):F(Ox,{active:ye.isActive,color:ye.color,indeterminate:!0,size:"16",width:"2"},null)}):Q&&F(_t,{key:String(Q),icon:Q,size:"x-small"},null)]})])])}})}})}),{}}}),Bc=Symbol.for("vuetify:v-tabs"),hE=Pe({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Wi(Vx({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),zu=Me()({name:"VTab",props:hE(),setup(t,e){let{slots:n,attrs:r}=e;const{textColorClasses:o,textColorStyles:a}=aa(()=>t.sliderColor),l=se(),c=se(),f=te(()=>t.direction==="horizontal"),g=te(()=>l.value?.group?.isSelected.value??!1);function h(m){let{value:v}=m;if(v){const p=l.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),y=c.value;if(!p||!y)return;const x=getComputedStyle(p).color,b=p.getBoundingClientRect(),S=y.getBoundingClientRect(),T=f.value?"x":"y",L=f.value?"X":"Y",P=f.value?"right":"bottom",k=f.value?"width":"height",V=b[T],E=S[T],M=V>E?b[P]-S[P]:b[T]-S[T],U=Math.sign(M)>0?f.value?"right":"bottom":Math.sign(M)<0?f.value?"left":"top":"center",q=(Math.abs(M)+(Math.sign(M)<0?b[k]:S[k]))/Math.max(b[k],S[k])||0,K=b[k]/S[k]||0,W=1.5;hr(y,{backgroundColor:[x,"currentcolor"],transform:[`translate${L}(${M}px) scale${L}(${K})`,`translate${L}(${M/W}px) scale${L}(${(q-1)/W+1})`,"none"],transformOrigin:Array(3).fill(U)},{duration:225,easing:Zo})}}return Ge(()=>{const m=Ee.filterProps(t);return F(Ee,oe({symbol:Bc,ref:l,class:["v-tab",t.class],style:t.style,tabindex:g.value?0:-1,role:"tab","aria-selected":String(g.value),active:!1},m,r,{block:t.fixed,maxWidth:t.fixed?300:void 0,"onGroup:selected":h}),{...n,default:()=>ee(ct,null,[n.default?.()??t.text,!t.hideSlider&&ee("div",{ref:c,class:Ye(["v-tab__slider",o.value]),style:qe(a.value)},null)])})}),Ui({},l)}}),gE=Pe({...Wi(Jm(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),mE=Me()({name:"VTabsWindow",props:gE(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Mr(Bc,null),o=pt(t,"modelValue"),a=te({get(){return o.value!=null||!r?o.value:r.items.value.find(l=>r.selected.value.includes(l.id))?.value},set(l){o.value=l}});return Ge(()=>{const l=Wu.filterProps(t);return F(Wu,oe({_as:"VTabsWindow"},l,{modelValue:a.value,"onUpdate:modelValue":c=>a.value=c,class:["v-tabs-window",t.class],style:t.style,mandatory:!1,touch:!1}),n)}),{}}}),vE=Pe({...Qm()},"VTabsWindowItem"),_E=Me()({name:"VTabsWindowItem",props:vE(),setup(t,e){let{slots:n}=e;return Ge(()=>{const r=na.filterProps(t);return F(na,oe({_as:"VTabsWindowItem"},r,{class:["v-tabs-window-item",t.class],style:t.style}),n)}),{}}});function pE(t){return t?t.map(e=>rS(e)?e:{text:e,value:e}):[]}const yE=Pe({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Vc({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Lr(),...Ln()},"VTabs"),bE=Me()({name:"VTabs",props:yE(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const o=pt(t,"modelValue"),a=te(()=>pE(t.items)),{densityClasses:l}=ps(t),{backgroundColorClasses:c,backgroundColorStyles:f}=Qu(()=>t.bgColor),{scopeId:g}=la();return va({VTab:{color:ve(()=>t.color),direction:ve(()=>t.direction),stacked:ve(()=>t.stacked),fixed:ve(()=>t.fixedTabs),sliderColor:ve(()=>t.sliderColor),hideSlider:ve(()=>t.hideSlider)}}),Ge(()=>{const h=ea.filterProps(t),m=!!(r.window||t.items.length>0);return ee(ct,null,[F(ea,oe(h,{modelValue:o.value,"onUpdate:modelValue":v=>o.value=v,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},l.value,c.value,t.class],style:[{"--v-tabs-height":mi(t.height)},f.value,t.style],role:"tablist",symbol:Bc},g,n),{default:()=>[r.default?.()??a.value.map(v=>r.tab?.({item:v})??F(zu,oe(v,{key:v.text,value:v.value}),{default:r[`tab.${v.value}`]?()=>r[`tab.${v.value}`]?.({item:v}):void 0}))]}),m&&F(mE,oe({modelValue:o.value,"onUpdate:modelValue":v=>o.value=v,key:"tabs-window"},g),{default:()=>[a.value.map(v=>r.item?.({item:v})??F(_E,{value:v.value},{default:()=>r[`item.${v.value}`]?.({item:v})})),r.window?.()]})])}),{}}}),wE=Pe({id:String,interactive:Boolean,text:String,...Wi(lc({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),Qe=Me()({name:"VTooltip",props:wE(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=pt(t,"modelValue"),{scopeId:o}=la(),a=ei(),l=ve(()=>t.id||`v-tooltip-${a}`),c=se(),f=te(()=>t.location.split(" ").length>1?t.location:t.location+" center"),g=te(()=>t.origin==="auto"||t.origin==="overlap"||t.origin.split(" ").length>1||t.location.split(" ").length>1?t.origin:t.origin+" center"),h=ve(()=>t.transition!=null?t.transition:r.value?"scale-transition":"fade-transition"),m=te(()=>oe({"aria-describedby":l.value},t.activatorProps));return Ge(()=>{const v=Sr.filterProps(t);return F(Sr,oe({ref:c,class:["v-tooltip",{"v-tooltip--interactive":t.interactive},t.class],style:t.style,id:l.value},v,{modelValue:r.value,"onUpdate:modelValue":p=>r.value=p,transition:h.value,absolute:!0,location:f.value,origin:g.value,persistent:!0,role:"tooltip",activatorProps:m.value,_disableGlobalStack:!0},o),{activator:n.activator,default:function(){for(var p=arguments.length,y=new Array(p),x=0;x<p;x++)y[x]=arguments[x];return n.default?.(...y)??t.text}})}),Ui({},c)}});class xE{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=et,this.supportedMediaTypes=null}getReadOptions(e,n){if(n){let r=n.dataProjection?an(n.dataProjection):this.readProjection(e);n.extent&&r&&r.getUnits()==="tile-pixels"&&(r=an(r),r.setWorldExtent(n.extent)),n={dataProjection:r,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Pt()}readFeature(e,n){return Pt()}readFeatures(e,n){return Pt()}readGeometry(e,n){return Pt()}readProjection(e){return Pt()}writeFeature(e,n){return Pt()}writeFeatures(e,n){return Pt()}writeGeometry(e,n){return Pt()}}function Nc(t,e,n){const r=n?an(n.featureProjection):null,o=n?an(n.dataProjection):null;let a=t;if(r&&o&&!Go(r,o)){e&&(a=t.clone());const l=e?r:o,c=e?o:r;l.getUnits()==="tile-pixels"?a.transform(l,c):a.applyTransform(Jg(l,c))}if(e&&n&&n.decimals!==void 0){const l=Math.pow(10,n.decimals),c=function(f){for(let g=0,h=f.length;g<h;++g)f[g]=Math.round(f[g]*l)/l;return f};a===t&&(a=t.clone()),a.applyTransform(c)}return a}const CE={Point:bt,LineString:_r,Polygon:Gi,MultiPoint:Zg,MultiLineString:vc,MultiPolygon:ha};function SE(t,e,n){return Array.isArray(e[0])?(Yx(t,0,e,n)||(t=t.slice(),Zx(t,0,e,n)),t):(Jx(t,0,e,n)||(t=t.slice(),Qx(t,0,e,n)),t)}function e0(t,e){const n=t.geometry;if(!n)return[];if(Array.isArray(n))return n.map(a=>e0({...t,geometry:a})).flat();const r=n.type==="MultiPolygon"?"Polygon":n.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const o=n.layout.length;return Nc(new Kg(r,r==="Polygon"?SE(n.flatCoordinates,n.ends,o):n.flatCoordinates,n.ends?.flat(),o,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function Uc(t,e){if(!t)return null;if(Array.isArray(t)){const r=t.map(o=>Uc(o,e));return new Yg(r)}const n=CE[t.type];return Nc(new n(t.flatCoordinates,t.layout||"XY",t.ends),!1,e)}class EE extends xE{constructor(){super()}getType(){return"json"}readFeature(e,n){return this.readFeatureFromObject(So(e),this.getReadOptions(e,n))}readFeatures(e,n){return this.readFeaturesFromObject(So(e),this.getReadOptions(e,n))}readFeatureFromObject(e,n){return Pt()}readFeaturesFromObject(e,n){return Pt()}readGeometry(e,n){return this.readGeometryFromObject(So(e),this.getReadOptions(e,n))}readGeometryFromObject(e,n){return Pt()}readProjection(e){return this.readProjectionFromObject(So(e))}readProjectionFromObject(e){return Pt()}writeFeature(e,n){return JSON.stringify(this.writeFeatureObject(e,n))}writeFeatureObject(e,n){return Pt()}writeFeatures(e,n){return JSON.stringify(this.writeFeaturesObject(e,n))}writeFeaturesObject(e,n){return Pt()}writeGeometry(e,n){return JSON.stringify(this.writeGeometryObject(e,n))}writeGeometryObject(e,n){return Pt()}}function So(t){if(typeof t=="string"){const e=JSON.parse(t);return e||null}return t!==null?t:null}class Eo extends EE{constructor(e){e=e||{},super(),this.dataProjection=an(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=an(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,n){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const o=Wc(r.geometry);if(this.featureClass===Kg)return e0({geometry:o,id:r.id,properties:r.properties},n);const a=new et;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&a.setGeometryName(r.geometry_name),a.setGeometry(Uc(o,n)),"id"in r&&a.setId(r.id),r.properties&&a.setProperties(r.properties,!0),a}readFeaturesFromObject(e,n){const r=e;let o=null;if(r.type==="FeatureCollection"){const a=e;o=[];const l=a.features;for(let c=0,f=l.length;c<f;++c){const g=this.readFeatureFromObject(l[c],n);g&&o.push(g)}}else o=[this.readFeatureFromObject(e,n)];return o.flat()}readGeometryFromObject(e,n){return kE(e,n)}readProjectionFromObject(e){const n=e.crs;let r;if(n)if(n.type=="name")r=an(n.properties.name);else if(n.type==="EPSG")r=an("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,n){n=this.adaptOptions(n);const r={type:"Feature",geometry:null,properties:null},o=e.getId();if(o!==void 0&&(r.id=o),!e.hasProperties())return r;const a=e.getProperties(),l=e.getGeometry();return l&&(r.geometry=$u(l,n),delete a[e.getGeometryName()]),eC(a)||(r.properties=a),r}writeFeaturesObject(e,n){n=this.adaptOptions(n);const r=[];for(let o=0,a=e.length;o<a;++o)r.push(this.writeFeatureObject(e[o],n));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,n){return $u(e,this.adaptOptions(n))}}function Wc(t,e){if(!t)return null;let n;switch(t.type){case"Point":{n=PE(t);break}case"LineString":{n=AE(t);break}case"Polygon":{n=ME(t);break}case"MultiPoint":{n=LE(t);break}case"MultiLineString":{n=FE(t);break}case"MultiPolygon":{n=IE(t);break}case"GeometryCollection":{n=TE(t);break}default:throw new Error("Unsupported GeoJSON type: "+t.type)}return n}function kE(t,e){const n=Wc(t);return Uc(n,e)}function TE(t,e){return t.geometries.map(function(r){return Wc(r)})}function PE(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:Rr(e.length)}}function AE(t){const e=t.coordinates,n=e.flat();return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:Rr(e[0]?.length||2)}}function FE(t){const e=t.coordinates,n=e[0]?.[0]?.length||2,r=[],o=Qg(r,0,e,n);return{type:"MultiLineString",flatCoordinates:r,ends:o,layout:Rr(n)}}function LE(t){const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Rr(e[0]?.length||2)}}function IE(t){const e=t.coordinates,n=[],r=e[0]?.[0]?.[0].length||2,o=tC(n,0,e,r);return{type:"MultiPolygon",flatCoordinates:n,ends:o,layout:Rr(r)}}function ME(t){const e=t.coordinates,n=[],r=e[0]?.[0]?.length,o=Qg(n,0,e,r);return{type:"Polygon",flatCoordinates:n,ends:o,layout:Rr(r)}}function $u(t,e){t=Nc(t,!0,e);const n=t.getType();let r;switch(n){case"Point":{r=BE(t);break}case"LineString":{r=OE(t);break}case"Polygon":{r=NE(t,e);break}case"MultiPoint":{r=DE(t);break}case"MultiLineString":{r=VE(t);break}case"MultiPolygon":{r=GE(t,e);break}case"GeometryCollection":{r=RE(t,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return r}function RE(t,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(r){return $u(r,e)})}}function OE(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function VE(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function DE(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function GE(t,e){let n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}function BE(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function NE(t,e){let n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}const ko={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class To extends Or{constructor(e,n){super(e),this.feature=n}}function UE(t,e){const n=[];for(let r=0;r<e.length;++r){const a=e[r].getGeometry();t0(t,a,n)}return n}function Po(t,e){return nm(t[0],t[1],e[0],e[1])}function gr(t,e){const n=t.length;return e<0?t[e+n]:e>=n?t[e-n]:t[e]}function Ao(t,e,n){let r,o;e<n?(r=e,o=n):(r=n,o=e);const a=Math.ceil(r),l=Math.floor(o);if(a>l){const f=mr(t,r),g=mr(t,o);return Po(f,g)}let c=0;if(r<a){const f=mr(t,r),g=gr(t,a);c+=Po(f,g)}if(l<o){const f=gr(t,l),g=mr(t,o);c+=Po(f,g)}for(let f=a;f<l-1;++f){const g=gr(t,f),h=gr(t,f+1);c+=Po(g,h)}return c}function t0(t,e,n){if(e instanceof _r){Fo(t,e.getCoordinates(),!1,n);return}if(e instanceof vc){const r=e.getCoordinates();for(let o=0,a=r.length;o<a;++o)Fo(t,r[o],!1,n);return}if(e instanceof Gi){const r=e.getCoordinates();for(let o=0,a=r.length;o<a;++o)Fo(t,r[o],!0,n);return}if(e instanceof ha){const r=e.getCoordinates();for(let o=0,a=r.length;o<a;++o){const l=r[o];for(let c=0,f=l.length;c<f;++c)Fo(t,l[c],!0,n)}return}if(e instanceof Yg){const r=e.getGeometries();for(let o=0;o<r.length;++o)t0(t,r[o],n);return}}const eu={index:-1,endIndex:NaN};function WE(t,e,n,r){const o=t[0],a=t[1];let l=1/0,c=-1,f=NaN;for(let m=0;m<e.targets.length;++m){const v=e.targets[m],p=v.coordinates;let y=1/0,x;for(let b=0;b<p.length-1;++b){const S=p[b],T=p[b+1],L=n0(o,a,S,T);L.squaredDistance<y&&(y=L.squaredDistance,x=b+L.along)}y<l&&(l=y,v.ring&&e.targetIndex===m&&(v.endIndex>v.startIndex?x<v.startIndex&&(x+=p.length):v.endIndex<v.startIndex&&x>v.startIndex&&(x-=p.length)),f=x,c=m)}const g=e.targets[c];let h=g.ring;if(e.targetIndex===c&&h){const m=mr(g.coordinates,f),v=n.getPixelFromCoordinate(m);Ho(v,e.startPx)>r&&(h=!1)}if(h){const m=g.coordinates,v=m.length,p=g.startIndex,y=f;if(p<y){const x=Ao(m,p,y);Ao(m,p,y-v)<x&&(f-=v)}else{const x=Ao(m,p,y);Ao(m,p,y+v)<x&&(f+=v)}}return eu.index=c,eu.endIndex=f,eu}function Fo(t,e,n,r){const o=t[0],a=t[1];for(let l=0,c=e.length-1;l<c;++l){const f=e[l],g=e[l+1],h=n0(o,a,f,g);if(h.squaredDistance===0){const m=l+h.along;r.push({coordinates:e,ring:n,startIndex:m,endIndex:m});return}}}const tu={along:0,squaredDistance:0};function n0(t,e,n,r){const o=n[0],a=n[1],l=r[0],c=r[1],f=l-o,g=c-a;let h=0,m=o,v=a;return(f!==0||g!==0)&&(h=kr(((t-o)*f+(e-a)*g)/(f*f+g*g),0,1),m+=f*h,v+=g*h),tu.along=h,tu.squaredDistance=rC(nm(t,e,m,v),10),tu}function mr(t,e){const n=t.length;let r=Math.floor(e);const o=e-r;r>=n?r-=n:r<0&&(r+=n);let a=r+1;a>=n&&(a-=n);const l=t[r],c=l[0],f=l[1],g=t[a],h=g[0]-c,m=g[1]-f;return[c+h*o,f+m*o]}class $o extends ys{constructor(e){const n=e;n.stopDown||(n.stopDown=em),super(n),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=$E(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Er,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let r=e.geometryFunction;if(!r){const o=this.mode_;if(o==="Circle")r=(a,l,c)=>{const f=l||new Au([NaN,NaN]),g=ht(a[0]),h=Vi(g,ht(a[a.length-1]));return f.setCenterAndRadius(g,Math.sqrt(h),this.geometryLayout_),f};else{let a;o==="Point"?a=bt:o==="LineString"?a=_r:o==="Polygon"&&(a=Gi),r=(l,c,f)=>(c?o==="Polygon"?l[0].length?c.setCoordinates([l[0].concat([l[0][0]])],this.geometryLayout_):c.setCoordinates([],this.geometryLayout_):c.setCoordinates(l,this.geometryLayout_):c=new a(l,this.geometryLayout_),c)}}this.geometryFunction_=r,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Kn({source:new bn({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:zE(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:nC,this.freehandCondition_,e.freehand?this.freehandCondition_=Xo:this.freehandCondition_=e.freehandCondition?e.freehandCondition:_c,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(tm.ACTIVE,this.updateState_)}setTrace(e){let n;e?e===!0?n=Xo:n=e:n=Fu,this.traceCondition_=n}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===_i.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let n=e.type===qt.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&e.type===qt.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===qt.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===qt.POINTERDOWN?r=!1:n&&this.getPointerCount()<2?(r=e.type===qt.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===qt.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===qt.DBLCLICK&&(r=!1),super.handleEvent(e)&&r}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new iC(qt.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const n=this.getMap(),r=n.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),o=n.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),a=vt([r,o]),l=this.traceSource_.getFeaturesInExtent(a);if(l.length===0)return;const c=UE(e.coordinate,l);c.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:c,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,n){const r=e.startIndex<=e.endIndex,o=e.startIndex<=n;r===o?r&&n>e.endIndex||!r&&n<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,n):(r&&n<e.endIndex||!r&&n>e.endIndex)&&this.removeTracedCoordinates_(n,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,n))}removeTracedCoordinates_(e,n){if(e===n)return;let r=0;if(e<n){const o=Math.ceil(e);let a=Math.floor(n);a===n&&(a-=1),r=a-o+1}else{const o=Math.floor(e);let a=Math.ceil(n);a===n&&(a+=1),r=o-a+1}r>0&&this.removeLastPoints_(r)}addTracedCoordinates_(e,n,r){if(n===r)return;const o=[];if(n<r){const a=Math.ceil(n);let l=Math.floor(r);l===r&&(l-=1);for(let c=a;c<=l;++c)o.push(gr(e.coordinates,c))}else{const a=Math.floor(n);let l=Math.ceil(r);l===r&&(l+=1);for(let c=a;c>=l;--c)o.push(gr(e.coordinates,c))}o.length&&this.appendCoordinates(o)}updateTrace_(e){const n=this.traceState_;if(!n.active||n.targetIndex===-1&&Ho(n.startPx,e.pixel)<this.snapTolerance_)return;const r=WE(e.coordinate,n,this.getMap(),this.snapTolerance_);if(n.targetIndex!==r.index){if(n.targetIndex!==-1){const f=n.targets[n.targetIndex];this.removeTracedCoordinates_(f.startIndex,f.endIndex)}const c=n.targets[r.index];this.addTracedCoordinates_(c,c.startIndex,r.endIndex)}else{const c=n.targets[n.targetIndex];this.addOrRemoveTracedCoordinates_(c,r.endIndex)}n.targetIndex=r.index;const o=n.targets[n.targetIndex];o.endIndex=r.endIndex;const a=mr(o.coordinates,o.endIndex),l=this.getMap().getPixelFromCoordinate(a);e.coordinate=a,e.pixel=[Math.round(l[0]),Math.round(l[1])]}handleUpEvent(e){let n=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const r=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const o=!this.finishCoordinate_;o&&this.startDrawing_(e.coordinate),!o&&this.freehand_?this.finishDrawing():!this.freehand_&&(!o||this.mode_==="Point")&&(this.atFinish_(e.pixel,r)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),n=!1}else this.freehand_&&this.abortDrawing()}return!n&&this.stopClick_&&e.preventDefault(),n}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const n=this.downPx_,r=e.pixel,o=n[0]-r[0],a=n[1]-r[1],l=o*o+a*a;if(this.shouldHandle_=this.freehand_?l>this.squaredClickTolerance_:l<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,n){let r=!1;if(this.sketchFeature_){let o=!1,a=[this.finishCoordinate_];const l=this.mode_;if(l==="Point")r=!0;else if(l==="Circle")r=this.sketchCoords_.length===2;else if(l==="LineString")o=!n&&this.sketchCoords_.length>this.minPoints_;else if(l==="Polygon"){const c=this.sketchCoords_;o=c[0].length>this.minPoints_,a=[c[0][0],c[0][c[0].length-2]],n?a=[c[0][0]]:a=[c[0][0],c[0][c[0].length-2]]}if(o){const c=this.getMap();for(let f=0,g=a.length;f<g;f++){const h=a[f],m=c.getPixelFromCoordinate(h),v=e[0]-m[0],p=e[1]-m[1],y=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(v*v+p*p)<=y,r){this.finishCoordinate_=h;break}}}}return r}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new et(new bt(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new et);const n=e.getLinearRing(0);let r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),r.changed()):(r=new _r(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(r))}startDrawing_(e){const n=this.getMap().getView().getProjection(),r=Vh(this.geometryLayout_);for(;e.length<r;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new et(new _r(this.sketchLineCoords_)));const o=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new et,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(o),this.updateSketchFeatures_(),this.dispatchEvent(new To(ko.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const n=this.getMap(),r=this.sketchFeature_.getGeometry(),o=n.getView().getProjection(),a=Vh(this.geometryLayout_);let l,c;for(;e.length<a;)e.push(0);this.mode_==="Point"?c=this.sketchCoords_:this.mode_==="Polygon"?(l=this.sketchCoords_[0],c=l[l.length-1],this.atFinish_(n.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(l=this.sketchCoords_,c=l[l.length-1]),c[0]=e[0],c[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,o),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),r.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();let o,a;const l=this.mode_;return l==="LineString"||l==="Circle"?(this.finishCoordinate_=e.slice(),a=this.sketchCoords_,a.length>=this.maxPoints_&&(this.freehand_?a.pop():o=!0),a.push(e.slice()),this.geometryFunction_(a,n,r)):l==="Polygon"&&(a=this.sketchCoords_[0],a.length>=this.maxPoints_&&(this.freehand_?a.pop():o=!0),a.push(e.slice()),o&&(this.finishCoordinate_=a[0]),this.geometryFunction_(this.sketchCoords_,n,r)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),o?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),o=this.mode_;for(let a=0;a<e;++a){let l;if(o==="LineString"||o==="Circle"){if(l=this.sketchCoords_,l.splice(-2,1),l.length>=2){this.finishCoordinate_=l[l.length-2].slice();const c=this.finishCoordinate_.slice();l[l.length-1]=c,this.createOrUpdateSketchPoint_(c)}this.geometryFunction_(l,n,r),n.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(n)}else if(o==="Polygon"){l=this.sketchCoords_[0],l.splice(-2,1);const c=this.sketchLine_.getGeometry();if(l.length>=2){const f=l[l.length-2].slice();l[l.length-1]=f,this.createOrUpdateSketchPoint_(f)}c.setCoordinates(l),this.geometryFunction_(this.sketchCoords_,n,r)}if(l.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let n=this.sketchCoords_;const r=e.getGeometry(),o=this.getMap().getView().getProjection();return this.mode_==="LineString"?(n.pop(),this.geometryFunction_(n,r,o)):this.mode_==="Polygon"&&(n[0].pop(),this.geometryFunction_(n,r,o),n=r.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new Zg([n])):this.type_==="MultiLineString"?e.setGeometry(new vc([n])):this.type_==="MultiPolygon"&&e.setGeometry(new ha([n])),this.dispatchEvent(new To(ko.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new To(ko.DRAWABORT,e))}appendCoordinates(e){const n=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(e[0]);let o;if(n==="LineString"||n==="Circle")o=this.sketchCoords_;else if(n==="Polygon")o=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&o.shift(),o.pop();for(let l=0;l<e.length;l++)this.addToDrawing_(e[l]);const a=e[e.length-1];this.sketchFeature_=this.addToDrawing_(a),this.modifyDrawing_(a)}extend(e){const r=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=r.getCoordinates();const o=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=o.slice(),this.sketchCoords_.push(o.slice()),this.sketchPoint_=new et(new bt(o)),this.updateSketchFeatures_(),this.dispatchEvent(new To(ko.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const n=this.overlay_.getSource();n.clear(!0),n.addFeatures(e)}updateState_(){const e=this.getMap(),n=this.getActive();(!e||!n)&&this.abortDrawing(),this.overlay_.setMap(n?e:null)}}function zE(){const t=pc();return function(e,n){return t[e.getGeometry().getType()]}}function $E(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}const tg=0,ds=1,ng=[0,0,0,0],wr=[],nu={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class iu extends Or{constructor(e,n,r){super(e),this.features=n,this.mapBrowserEvent=r}}class jE extends ys{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:sC,this.defaultDeleteCondition_=function(r){return oC(r)&&yc(r)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:Xo,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new im,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Kn({source:new bn({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:HE(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let n;if(e.features?n=e.features:e.source&&(this.source_=e.source,n=new pn(this.source_.getFeatures()),this.source_.addEventListener(qo.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(qo.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!n)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=n,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(hi.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(hi.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const n=e.getGeometry();if(n){const o=this.SEGMENT_WRITERS_[n.getType()];o&&o(e,n)}const r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(r.getCoordinateFromPixel(this.lastPixel_)),e.addEventListener(_i.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,n){if(!this.featuresBeingModified_){this.featuresBeingModified_=new pn;const r=this.featuresBeingModified_.getArray();for(let o=0,a=n.length;o<a;++o){const l=n[o].feature;l&&!r.includes(l)&&this.featuresBeingModified_.push(l)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new iu(nu.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(_i.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const n=this.rBush_,r=[];n.forEach(function(o){e===o.feature&&r.push(o)});for(let o=r.length-1;o>=0;--o){const a=r[o];for(let l=this.dragSegments_.length-1;l>=0;--l)this.dragSegments_[l][0]===a&&this.dragSegments_.splice(l,1);n.remove(a)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const n=e.target;this.removeFeature_(n),this.addFeature_(n)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,n){const r=n.getCoordinates(),o={feature:e,geometry:n,segment:[r,r]};this.rBush_.insert(n.getExtent(),o)}writeMultiPointGeometry_(e,n){const r=n.getCoordinates();for(let o=0,a=r.length;o<a;++o){const l=r[o],c={feature:e,geometry:n,depth:[o],index:o,segment:[l,l]};this.rBush_.insert(n.getExtent(),c)}}writeLineStringGeometry_(e,n){const r=n.getCoordinates();for(let o=0,a=r.length-1;o<a;++o){const l=r.slice(o,o+2),c={feature:e,geometry:n,index:o,segment:l};this.rBush_.insert(vt(l),c)}}writeMultiLineStringGeometry_(e,n){const r=n.getCoordinates();for(let o=0,a=r.length;o<a;++o){const l=r[o];for(let c=0,f=l.length-1;c<f;++c){const g=l.slice(c,c+2),h={feature:e,geometry:n,depth:[o],index:c,segment:g};this.rBush_.insert(vt(g),h)}}}writePolygonGeometry_(e,n){const r=n.getCoordinates();for(let o=0,a=r.length;o<a;++o){const l=r[o];for(let c=0,f=l.length-1;c<f;++c){const g=l.slice(c,c+2),h={feature:e,geometry:n,depth:[o],index:c,segment:g};this.rBush_.insert(vt(g),h)}}}writeMultiPolygonGeometry_(e,n){const r=n.getCoordinates();for(let o=0,a=r.length;o<a;++o){const l=r[o];for(let c=0,f=l.length;c<f;++c){const g=l[c];for(let h=0,m=g.length-1;h<m;++h){const v=g.slice(h,h+2),p={feature:e,geometry:n,depth:[c,o],index:h,segment:v};this.rBush_.insert(vt(v),p)}}}}writeCircleGeometry_(e,n){const r=n.getCenter(),o={feature:e,geometry:n,index:tg,segment:[r,r]},a={feature:e,geometry:n,index:ds,segment:[r,r]},l=[o,a];o.featureSegments=l,a.featureSegments=l,this.rBush_.insert(jl(r),o);let c=n;this.rBush_.insert(c.getExtent(),a)}writeGeometryCollectionGeometry_(e,n){const r=n.getGeometriesArray();for(let o=0;o<r.length;++o){const a=r[o],l=this.SEGMENT_WRITERS_[a.getType()];l(e,a)}}createOrUpdateVertexFeature_(e,n,r,o){let a=this.vertexFeature_;return a?a.getGeometry().setCoordinates(e):(a=new et(new bt(e)),this.vertexFeature_=a,this.overlay_.getSource().addFeature(a)),a.set("features",n),a.set("geometries",r),a.set("existing",o),a}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let n;return!e.map.getView().getInteracting()&&e.type==qt.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=qt.SINGLECLICK||!this.ignoreNextSingleClick_?n=this.removePoint():n=!0),e.type==qt.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!n}findInsertVerticesAndUpdateDragSegments_(e){this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const n=this.vertexFeature_;if(!n)return;this.getMap().getView().getProjection();const r=[],o=n.getGeometry().getCoordinates(),a=vt([o]),l=this.rBush_.getInExtent(a),c={};l.sort(XE);for(let f=0,g=l.length;f<g;++f){const h=l[f],m=h.segment;let v=He(h.geometry);const p=h.depth;if(p&&(v+="-"+p.join("-")),c[v]||(c[v]=new Array(2)),h.geometry.getType()==="Circle"&&h.index===ds){const y=rg(e,h);gn(y,o)&&!c[v][0]&&(this.dragSegments_.push([h,0]),c[v][0]=h);continue}if(gn(m[0],o)&&!c[v][0]){this.dragSegments_.push([h,0]),c[v][0]=h;continue}if(gn(m[1],o)&&!c[v][1]){if(c[v][0]&&c[v][0].index===0){let y=h.geometry.getCoordinates();switch(h.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":y=y[p[1]];case"Polygon":if(h.index!==y[p[0]].length-2)continue;break}}this.dragSegments_.push([h,1]),c[v][1]=h;continue}He(m)in this.vertexSegments_&&!c[v][0]&&!c[v][1]&&r.push(h)}return r}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([a])=>a));const n=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],o=[];for(let a=0,l=this.dragSegments_.length;a<l;++a){const c=this.dragSegments_[a],f=c[0],g=f.feature;r.includes(g)||r.push(g);const h=f.geometry;o.includes(h)||o.push(h);const m=f.depth;let v;const p=f.segment,y=c[1];for(;n.length<h.getStride();)n.push(p[y][n.length]);switch(h.getType()){case"Point":v=n,p[0]=n,p[1]=n;break;case"MultiPoint":v=h.getCoordinates(),v[f.index]=n,p[0]=n,p[1]=n;break;case"LineString":v=h.getCoordinates(),v[f.index+y]=n,p[y]=n;break;case"MultiLineString":v=h.getCoordinates(),v[m[0]][f.index+y]=n,p[y]=n;break;case"Polygon":v=h.getCoordinates(),v[m[0]][f.index+y]=n,p[y]=n;break;case"MultiPolygon":v=h.getCoordinates(),v[m[1]][m[0]][f.index+y]=n,p[y]=n;break;case"Circle":const x=h;if(p[0]=n,p[1]=n,f.index===tg)this.changingFeature_=!0,x.setCenter(n),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let b=Ho(ht(x.getCenter()),ht(n));x.setRadius(b),this.changingFeature_=!1}break}v&&this.setGeometryCoordinates_(h,v)}this.createOrUpdateVertexFeature_(n,r,o,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const n=e.coordinate,r=this.findInsertVerticesAndUpdateDragSegments_(n);if(r?.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,r),this.vertexFeature_)){const o=this.vertexFeature_.getGeometry().getCoordinates();for(let a=r.length-1;a>=0;--a)this.insertVertex_(r[a],o);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let n=this.dragSegments_.length-1;n>=0;--n){const r=this.dragSegments_[n][0],o=r.geometry;if(o.getType()==="Circle"){const a=o,l=a.getCenter(),c=r.featureSegments[0],f=r.featureSegments[1];c.segment[0]=l,c.segment[1]=l,f.segment[0]=l,f.segment[1]=l,this.rBush_.update(jl(l),c);let g=a;this.rBush_.update(g.getExtent(),f)}else this.rBush_.update(vt(r.segment),r)}return this.featuresBeingModified_&&(this.dispatchEvent(new iu(nu.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.coordinate)}handlePointerAtPixel_(e){const n=this.getMap(),r=n.getPixelFromCoordinate(e);n.getView().getProjection();const o=function(c,f){return ig(e,c)-ig(e,f)};let a,l;if(this.hitDetection_){const c=typeof this.hitDetection_=="object"?f=>f===this.hitDetection_:void 0;n.forEachFeatureAtPixel(r,(f,g,h)=>{h&&h.getType()==="Point"&&(h=new bt(ms(h.getCoordinates())));const m=h||f.getGeometry();if(m&&m.getType()==="Point"&&f instanceof et&&this.features_.getArray().includes(f)){l=m;const v=f.getGeometry().getFlatCoordinates().slice(0,2);a=[{feature:f,geometry:l,segment:[v,v]}]}return!0},{layerFilter:c})}if(!a){const c=Ko(jl(e,ng)),f=n.getView().getResolution()*this.pixelTolerance_,g=rm(bc(c,f,ng));a=this.rBush_.getInExtent(g)}if(a&&a.length>0){const c=a.sort(o)[0],f=c.segment;let g=rg(e,c);const h=n.getPixelFromCoordinate(g);let m=Ho(r,h);if(l||m<=this.pixelTolerance_){const v={};if(v[He(f)]=!0,this.snapToPointer_||(this.delta_[0]=g[0]-e[0],this.delta_[1]=g[1]-e[1]),c.geometry.getType()==="Circle"&&c.index===ds)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(g,[c.feature],[c.geometry],this.snappedToVertex_);else{const p=n.getPixelFromCoordinate(f[0]),y=n.getPixelFromCoordinate(f[1]),x=Vi(h,p),b=Vi(h,y);if(m=Math.sqrt(Math.min(x,b)),this.snappedToVertex_=m<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(g=x>b?f[1]:f[0]),this.createOrUpdateVertexFeature_(g,[c.feature],[c.geometry],this.snappedToVertex_);const S={};S[He(c.geometry)]=!0;for(let T=1,L=a.length;T<L;++T){const P=a[T].segment;if(gn(f[0],P[0])&&gn(f[1],P[1])||gn(f[0],P[1])&&gn(f[1],P[0])){const k=He(a[T].geometry);k in S||(S[k]=!0,v[He(P)]=!0)}else break}}this.vertexSegments_=v;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,n){const r=e.segment,o=e.feature,a=e.geometry,l=e.depth,c=e.index;let f;for(;n.length<a.getStride();)n.push(0);switch(a.getType()){case"MultiLineString":f=a.getCoordinates(),f[l[0]].splice(c+1,0,n);break;case"Polygon":f=a.getCoordinates(),f[l[0]].splice(c+1,0,n);break;case"MultiPolygon":f=a.getCoordinates(),f[l[1]][l[0]].splice(c+1,0,n);break;case"LineString":f=a.getCoordinates(),f.splice(c+1,0,n);break;default:return!1}this.setGeometryCoordinates_(a,f);const g=this.rBush_;g.remove(e),this.updateSegmentIndices_(a,c,l,1);const h={segment:[r[0],n],feature:o,geometry:a,depth:l,index:c};g.insert(vt(h.segment),h),this.dragSegments_.push([h,1]);const m={segment:[n,r[1]],feature:o,geometry:a,depth:l,index:c+1};return g.insert(vt(m.segment),m),this.dragSegments_.push([m,0]),!0}updatePointer_(e){return e&&this.findInsertVerticesAndUpdateDragSegments_(e),this.vertexFeature_?.getGeometry().getCoordinates()}getPoint(){const e=this.vertexFeature_?.getGeometry().getCoordinates();return e?ms(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(r=>r.getType()==="Circle"||r.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(vt([e])).some(({segment:r})=>gn(r[0],e)||gn(r[1],e))}removePoint(e){if(e&&(e=ht(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=qt.POINTERDRAG){const n=this.lastPointerEvent_;this.willModifyFeatures_(n,this.dragSegments_.map(([o])=>o));const r=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new iu(nu.MODIFYEND,this.featuresBeingModified_,n)),this.featuresBeingModified_=null,r}return!1}removeVertex_(){const e=this.dragSegments_,n={};let r=!1,o,a,l,c,f,g,h,m,v,p,y;for(f=e.length-1;f>=0;--f)l=e[f],p=l[0],y=He(p.feature),p.depth&&(y+="-"+p.depth.join("-")),y in n||(n[y]={}),l[1]===0?(n[y].right=p,n[y].index=p.index):l[1]==1&&(n[y].left=p,n[y].index=p.index+1);for(y in n){switch(v=n[y].right,h=n[y].left,g=n[y].index,m=g-1,h!==void 0?p=h:p=v,m<0&&(m=0),c=p.geometry,a=c.getCoordinates(),o=a,r=!1,c.getType()){case"MultiLineString":a[p.depth[0]].length>2&&(a[p.depth[0]].splice(g,1),r=!0);break;case"LineString":a.length>2&&(a.splice(g,1),r=!0);break;case"MultiPolygon":o=o[p.depth[1]];case"Polygon":o=o[p.depth[0]],o.length>4&&(g==o.length-1&&(g=0),o.splice(g,1),r=!0,g===0&&(o.pop(),o.push(o[0]),m=o.length-1));break}if(r){this.setGeometryCoordinates_(c,a);const x=[];if(h!==void 0&&(this.rBush_.remove(h),x.push(h.segment[0])),v!==void 0&&(this.rBush_.remove(v),x.push(v.segment[1])),h!==void 0&&v!==void 0){const b={depth:p.depth,feature:p.feature,geometry:p.geometry,index:m,segment:x};this.rBush_.insert(vt(b.segment),b)}this.updateSegmentIndices_(c,g,p.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return r}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(r=>r.getType()==="Circle"||r.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(vt([e])).some(({segment:r})=>!(gn(r[0],e)||gn(r[1],e)))}insertPoint(e){const n=e?ht(e,this.getMap().getView().getProjection()):this.vertexFeature_?.getGeometry().getCoordinates();return n?this.findInsertVerticesAndUpdateDragSegments_(n).reduce((o,a)=>o||this.insertVertex_(a,n),!1):!1}setGeometryCoordinates_(e,n){this.changingFeature_=!0,e.setCoordinates(n),this.changingFeature_=!1}updateSegmentIndices_(e,n,r,o){this.rBush_.forEachInExtent(e.getExtent(),function(a){a.geometry===e&&(r===void 0||a.depth===void 0||aC(a.depth,r))&&a.index>n&&(a.index+=o)})}}function XE(t,e){return t.index-e.index}function ig(t,e,n){const r=e.geometry;if(r.getType()==="Circle"){let a=r;if(e.index===ds){const l=Vi(a.getCenter(),ht(t)),c=Math.sqrt(l)-a.getRadius();return c*c}}const o=ht(t);return wr[0]=ht(e.segment[0]),wr[1]=ht(e.segment[1]),lC(o,wr)}function rg(t,e,n){const r=e.geometry;if(r.getType()==="Circle"&&e.index===ds)return ms(r.getClosestPoint(ht(t)));const o=ht(t);return wr[0]=ht(e.segment[0]),wr[1]=ht(e.segment[1]),ms(sm(o,wr))}function HE(){const t=pc();return function(e,n){return t.Point}}const qE={SELECT:"select"};class KE extends Or{constructor(e,n,r,o){super(e),this.selected=n,this.deselected=r,this.mapBrowserEvent=o}}const Lo={};class zi extends wc{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:yc,this.addCondition_=e.addCondition?e.addCondition:Fu,this.removeCondition_=e.removeCondition?e.removeCondition:Fu,this.toggleCondition_=e.toggleCondition?e.toggleCondition:_c,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Er,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:YE(),this.features_=e.features||new pn;let n;if(e.layers)if(typeof e.layers=="function")n=e.layers;else{const r=e.layers;n=function(o){return r.includes(o)}}else n=Er;this.layerFilter_=n,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,n){this.featureLayerAssociation_[He(e)]=n}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[He(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(hi.ADD,this.boundAddFeature_),this.features_.addEventListener(hi.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(hi.ADD,this.boundAddFeature_),this.features_.removeEventListener(hi.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const n=e.element;if(this.style_&&this.applySelectedStyle_(n),!this.getLayer(n)){const r=this.getMap().getAllLayers().find(function(o){if(o instanceof Kn&&o.getSource()&&o.getSource().hasFeature(n))return o});r&&this.addFeatureLayerAssociation_(n,r)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const n=He(e);n in Lo||(Lo[n]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const n=this.getMap().getInteractions().getArray();for(let o=n.length-1;o>=0;--o){const a=n[o];if(a!==this&&a instanceof zi&&a.getStyle()&&a.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(a.getStyle());return}}const r=He(e);e.setStyle(Lo[r]),delete Lo[r]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[He(e)]}handleEvent(e){if(!this.condition_(e))return!0;const n=this.addCondition_(e),r=this.removeCondition_(e),o=this.toggleCondition_(e),a=!n&&!r&&!o,l=e.map,c=this.getFeatures(),f=[],g=[];if(a){uC(this.featureLayerAssociation_),l.forEachFeatureAtPixel(e.pixel,(h,m)=>{if(!(!(h instanceof et)||!this.filter_(h,m)))return this.addFeatureLayerAssociation_(h,m),g.push(h),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let h=c.getLength()-1;h>=0;--h){const m=c.item(h),v=g.indexOf(m);v>-1?g.splice(v,1):(c.remove(m),f.push(m))}g.length!==0&&c.extend(g)}else{l.forEachFeatureAtPixel(e.pixel,(h,m)=>{if(!(!(h instanceof et)||!this.filter_(h,m)))return(n||o)&&!c.getArray().includes(h)?(this.addFeatureLayerAssociation_(h,m),g.push(h)):(r||o)&&c.getArray().includes(h)&&(f.push(h),this.removeFeatureLayerAssociation_(h)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let h=f.length-1;h>=0;--h)c.remove(f[h]);c.extend(g)}return(g.length>0||f.length>0)&&this.dispatchEvent(new KE(qE.SELECT,g,f,e)),!0}}function YE(){const t=pc();return Dh(t.Polygon,t.LineString),Dh(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}const ru={SNAP:"snap",UNSNAP:"unsnap"};class su extends Or{constructor(e,n){super(e),this.vertex=n.vertex,this.vertexPixel=n.vertexPixel,this.feature=n.feature,this.segment=n.segment}}const ju={Circle(t,e){const r=Bo(t);return ju.Polygon(r)},GeometryCollection(t,e){const n=[],r=t.getGeometriesArray();for(let o=0;o<r.length;++o){const a=ju[r[o].getType()];a&&n.push(a(r[o],e))}return n.flat()},LineString(t){const e=[],n=t.getFlatCoordinates(),r=t.getStride();for(let o=0,a=n.length-r;o<a;o+=r)e.push([n.slice(o,o+2),n.slice(o+r,o+r+2)]);return e},MultiLineString(t){const e=[],n=t.getFlatCoordinates(),r=t.getStride(),o=t.getEnds();let a=0;for(let l=0,c=o.length;l<c;++l){const f=o[l];for(let g=a,h=f-r;g<h;g+=r)e.push([n.slice(g,g+2),n.slice(g+r,g+r+2)]);a=f}return e},MultiPoint(t){const e=[],n=t.getFlatCoordinates(),r=t.getStride();for(let o=0,a=n.length-r;o<a;o+=r)e.push([n.slice(o,o+2)]);return e},MultiPolygon(t){const e=[],n=t.getFlatCoordinates(),r=t.getStride(),o=t.getEndss();let a=0;for(let l=0,c=o.length;l<c;++l){const f=o[l];for(let g=0,h=f.length;g<h;++g){const m=f[g];for(let v=a,p=m-r;v<p;v+=r)e.push([n.slice(v,v+2),n.slice(v+r,v+r+2)]);a=m}}return e},Point(t){return[[t.getFlatCoordinates().slice(0,2)]]},Polygon(t){const e=[],n=t.getFlatCoordinates(),r=t.getStride(),o=t.getEnds();let a=0;for(let l=0,c=o.length;l<c;++l){const f=o[l];for(let g=a,h=f-r;g<h;g+=r)e.push([n.slice(g,g+2),n.slice(g+r,g+r+2)]);a=f}return e}};function sg(t){return t.feature?t.feature:t.element?t.element:null}const ou=[],Wn=[],lr=[];class ZE extends ys{constructor(e){e=e||{};const n=e;n.handleDownEvent||(n.handleDownEvent=Er),n.stopDown||(n.stopDown=em),super(n),this.on,this.once,this.un,this.source_=e.source?e.source:null,this.vertex_=e.vertex!==void 0?e.vertex:!0,this.edge_=e.edge!==void 0?e.edge:!0,this.intersection_=e.intersection!==void 0?e.intersection:!1,this.features_=e.features?e.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.rBush_=new im,this.snapped_=null,this.segmenters_=Object.assign({},ju,e.segmenters)}addFeature(e,n){n=n!==void 0?n:!0;const r=He(e),o=e.getGeometry();if(o){const a=this.segmenters_[o.getType()];if(a){this.indexedFeaturesExtents_[r]=o.getExtent(Tr());const l=a(o,this.getMap().getView().getProjection());let c=l.length;for(let f=0;f<c;++f){const g=l[f];Wn[f]=vt(g),lr[f]={feature:e,segment:g}}if(Wn.length=c,lr.length=c,this.intersection_)for(let f=0,g=l.length;f<g;++f){const h=l[f];if(h.length===1)continue;const m=Wn[f];for(let p=0,y=l.length;p<y;++p){if(f===p||f-1===p||f+1===p)continue;const x=l[p];if(!xc(m,Wn[p]))continue;const b=Gh(h,x);if(!b)continue;const S=[b];Wn[c]=vt(S),lr[c++]={feature:e,segment:S,isIntersection:!0}}const v=this.rBush_.getInExtent(Wn[f]);for(const{segment:p}of v){if(p.length===1)continue;const y=Gh(h,p);if(!y)continue;const x=[y];Wn[c]=vt(x),lr[c++]={feature:e,segment:x,isIntersection:!0}}}c===1?this.rBush_.insert(Wn[0],lr[0]):this.rBush_.load(Wn,lr)}}n&&(this.featureChangeListenerKeys_[r]=kn(e,_i.CHANGE,this.handleFeatureChange_,this))}getFeatures_(){let e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e}areSnapDataEqual_(e,n){return e.segment===n.segment&&e.feature===n.feature}handleEvent(e){const n=this.snapTo(e.pixel,e.coordinate,e.map);return n?(e.coordinate=n.vertex.slice(0,2),e.pixel=n.vertexPixel,this.snapped_&&!this.areSnapDataEqual_(this.snapped_,n)&&this.dispatchEvent(new su(ru.UNSNAP,this.snapped_)),this.snapped_={vertex:e.coordinate,vertexPixel:e.pixel,feature:n.feature,segment:n.segment},this.dispatchEvent(new su(ru.SNAP,this.snapped_))):this.snapped_&&(this.dispatchEvent(new su(ru.UNSNAP,this.snapped_)),this.snapped_=null),super.handleEvent(e)}handleFeatureAdd_(e){const n=sg(e);n&&this.addFeature(n)}handleFeatureRemove_(e){const n=sg(e);n&&this.removeFeature(n)}handleFeatureChange_(e){const n=e.target;if(this.handlingDownUpSequence){const r=He(n);r in this.pendingFeatures_||(this.pendingFeatures_[r]=n)}else this.updateFeature_(n)}handleUpEvent(e){const n=Object.values(this.pendingFeatures_);if(n.length)for(const r of n)this.updateFeature_(r);return!1}removeFeature(e,n){const r=n!==void 0?n:!0,o=He(e),a=this.indexedFeaturesExtents_[o];if(a){const l=this.rBush_,c=[];l.forEachInExtent(a,function(f){e===f.feature&&c.push(f)});for(let f=c.length-1;f>=0;--f)l.remove(c[f])}r&&(pr(this.featureChangeListenerKeys_[o]),delete this.featureChangeListenerKeys_[o])}setMap(e){const n=this.getMap(),r=this.featuresListenerKeys_;let o=this.getFeatures_();if(Array.isArray(o)||(o=o.getArray()),n&&(r.forEach(pr),r.length=0,this.rBush_.clear(),Object.values(this.featureChangeListenerKeys_).forEach(pr),this.featureChangeListenerKeys_={}),super.setMap(e),e){this.features_?r.push(kn(this.features_,hi.ADD,this.handleFeatureAdd_,this),kn(this.features_,hi.REMOVE,this.handleFeatureRemove_,this)):this.source_&&r.push(kn(this.source_,qo.ADDFEATURE,this.handleFeatureAdd_,this),kn(this.source_,qo.REMOVEFEATURE,this.handleFeatureRemove_,this));for(const a of o)this.addFeature(a)}}snapTo(e,n,r){r.getView().getProjection();const o=ht(n),a=rm(bc(vt([o]),r.getView().getResolution()*this.pixelTolerance_)),l=this.rBush_.getInExtent(a),c=l.length;if(c===0)return null;let f,g=1/0,h,m=null,v;const p=this.pixelTolerance_*this.pixelTolerance_,y=()=>{if(f){const x=r.getPixelFromCoordinate(f);if(Vi(e,x)<=p&&(v&&this.intersection_||!v&&(this.vertex_||this.edge_)))return{vertex:f,vertexPixel:[Math.round(x[0]),Math.round(x[1])],feature:h,segment:m}}return null};if(this.vertex_||this.intersection_){for(let b=0;b<c;++b){const S=l[b];if(S.feature.getGeometry().getType()!=="Circle")for(const T of S.segment){const L=ht(T),P=Vi(o,L);P<g&&(f=T,g=P,h=S.feature,v=S.isIntersection)}}const x=y();if(x)return x}if(this.edge_){for(let b=0;b<c;++b){let S=null;const T=l[b];if(T.feature.getGeometry().getType()==="Circle"){let L=T.feature.getGeometry();S=cC(o,L)}else{const[L,P]=T.segment;P&&(ou[0]=ht(L),ou[1]=ht(P),S=sm(o,ou))}if(S){const L=Vi(o,S);L<g&&(f=ms(S),m=T.feature.getGeometry().getType()==="Circle"?null:T.segment,g=L,h=T.feature)}}const x=y();if(x)return x}return null}updateFeature_(e){this.removeFeature(e,!1),this.addFeature(e,!1)}}const au={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"};class lu extends Or{constructor(e,n,r,o,a){super(e),this.features=n,this.coordinate=r,this.startCoordinate=o,this.mapBrowserEvent=a}}class JE extends ys{constructor(e){e=e||{},super(e),this.on,this.once,this.un,this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=e.features!==void 0?e.features:null;let n;if(e.layers&&!this.features_)if(typeof e.layers=="function")n=e.layers;else{const r=e.layers;n=function(o){return r.includes(o)}}else n=Er;this.layerFilter_=n,this.filter_=e.filter&&!this.features_?e.filter:Er,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.condition_=e.condition?e.condition:Xo,this.lastFeature_=null,this.addChangeListener(tm.ACTIVE,this.handleActiveChanged_)}handleDownEvent(e){if(!e.originalEvent||!this.condition_(e))return!1;if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);const n=this.features_||new pn([this.lastFeature_]);return this.dispatchEvent(new lu(au.TRANSLATESTART,n,e.coordinate,this.startCoordinate_,e)),!0}return!1}handleUpEvent(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);const n=this.features_||new pn([this.lastFeature_]);return this.dispatchEvent(new lu(au.TRANSLATEEND,n,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1}handleDragEvent(e){if(this.lastCoordinate_){const n=e.coordinate;e.map.getView().getProjection();const r=ht(n),o=ht(this.lastCoordinate_),a=r[0]-o[0],l=r[1]-o[1],c=this.features_||new pn([this.lastFeature_]);c.forEach(function(f){const g=f.getGeometry();g.translate(a,l),f.setGeometry(g)}),this.lastCoordinate_=n,this.dispatchEvent(new lu(au.TRANSLATING,c,n,this.startCoordinate_,e))}}handleMoveEvent(e){const n=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(n.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),n.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):n.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(e,n){return n.forEachFeatureAtPixel(e,(r,o)=>{if(!(!(r instanceof et)||!this.filter_(r,o))&&!(this.features_&&!this.features_.getArray().includes(r)))return r},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(e){this.hitTolerance_=e}setMap(e){const n=this.getMap();super.setMap(e),this.updateState_(n)}handleActiveChanged_(){this.updateState_(null)}updateState_(e){let n=this.getMap();const r=this.getActive();(!n||!r)&&(n=n||e,n&&n.getViewport().classList.remove("ol-grab","ol-grabbing"))}}(function(){var t=bn.prototype.clear;bn.prototype.clear=function(e){this.dispatchEvent({type:"clearstart"}),t.call(this,e),this.dispatchEvent({type:"clearend"})}})();var _n=class extends wc{constructor(e){e=e||{},super({handleEvent:function(){return!0}}),this._layers=e.layers,this._undoStack=new pn,this._redoStack=new pn,this._undo=[],this._redo=[],this._undoStack.on("add",function(n){n.element.level===void 0?(n.element.level=this._level,n.element.level||(n.element.view={center:this.getMap().getView().getCenter(),zoom:this.getMap().getView().getZoom()},this._undo.push(n.element))):n.element.level||this._undo.push(this._redo.shift()),n.element.level||this.dispatchEvent({type:"stack:add",action:n.element}),this._reduce()}.bind(this)),this._undoStack.on("remove",function(n){n.element.level||(this._doShift?this._undo.shift():this._undo.length&&this._redo.push(this._undo.pop()),this._doClear||this.dispatchEvent({type:"stack:remove",action:n.element,shift:this._doShift}))}.bind(this)),this._block=0,this._level=0,this._doShift=!1,this._record=!0,this._defs={}}define(e,n,r){this._defs[e]={undo:n,redo:r}}length(e){return e==="redo"?this._redo.length:this._undo.length}setMaxLength(e){e=parseInt(e),e&&e<0&&(e=0),this.set("maxLength",e),this._reduce()}size(e){return e==="redo"?this._redoStack.getLength():this._undoStack.getLength()}setMaxSize(e){e=parseInt(e),e&&e<0&&(e=0),this.set("maxSize",e),this._reduce()}_reduce(){if(this.get("maxLength"))for(;this.length()>this.get("maxLength");)this.shift();if(this.get("maxSize"))for(;this.length()>1&&this.size()>this.get("maxSize");)this.shift()}getStack(e){return e==="redo"?this._redo:this._undo}push(e,n,r){return this._defs[e]?(this._undoStack.push({type:e,name:r,custom:!0,prop:n}),!0):!1}shift(){this._doShift=!0;var e=this._undoStack.removeAt(0);if(this._doShift=!1,e.type==="blockstart")for(e=this._undoStack.item(0);this._undoStack.getLength()&&e.level>0;)this._undoStack.removeAt(0),e=this._undoStack.item(0)}setActive(e){super.setActive(e),this._record=e}setMap(e){this._mapListener&&this._mapListener.forEach(function(n){yr(n)}),this._mapListener=[],super.setMap(e),e&&(this._mapListener.push(e.on("undoblockstart",this.blockStart.bind(this))),this._mapListener.push(e.on("undoblockend",this.blockEnd.bind(this)))),this._watchSources(),this._watchInteractions()}_watchSources(){var e=this.getMap();this._sourceListener&&this._sourceListener.forEach(function(a){yr(a)}),this._sourceListener=[];var n=this;function r(a,l){return l||(l=[]),a.forEach(function(c){c.getSource&&c.getSource()instanceof bn?(!n._layers||n._layers.indexOf(c)>=0)&&l.push(c):c.getLayers&&r(c.getLayers(),l)}),l}if(e){var o=r(e.getLayers());o.forEach(function(a){var l=a.getSource();this._sourceListener.push(l.on(["addfeature","removefeature"],this._onAddRemove.bind(this))),this._sourceListener.push(l.on("clearstart",function(){this.blockStart("clear")}.bind(this))),this._sourceListener.push(l.on("clearend",this.blockEnd.bind(this)))}.bind(this)),this._sourceListener.push(e.getLayers().on(["add","remove"],this._watchSources.bind(this)))}}_watchInteractions(){var e=this.getMap();this._interactionListener&&this._interactionListener.forEach(function(n){yr(n)}),this._interactionListener=[],e&&(e.getInteractions().forEach(function(n){this._interactionListener.push(n.on(["setattributestart","modifystart","rotatestart","translatestart","scalestart","deletestart","deleteend","beforesplit","aftersplit"],this._onInteraction.bind(this)))}.bind(this)),this._interactionListener.push(e.getInteractions().on(["add","remove"],this._watchInteractions.bind(this))))}_onAddRemove(e){this._record&&(this._redoStack.clear(),this._redo.length=0,this._undoStack.push({type:e.type,source:e.target,feature:e.feature}))}_onInteraction(e){var n=this._onInteraction[e.type];n&&n.call(this,e)}blockStart(e){this._redoStack.clear(),this._redo.length=0,this._undoStack.push({type:"blockstart",name:e}),this._level++}blockEnd(){this._undoStack.push({type:"blockend"}),this._level--}_handleDo(e,n){if(this.getActive()){if(this._record=!1,e.custom)this._defs[e.type]&&(n?this._defs[e.type].undo(e.prop):this._defs[e.type].redo(e.prop));else switch(e.type){case"addfeature":{n?e.source.removeFeature(e.feature):e.source.addFeature(e.feature);break}case"removefeature":{n?e.source.addFeature(e.feature):e.source.removeFeature(e.feature);break}case"changegeometry":{var r=e.feature.getGeometry();e.feature.setGeometry(e.oldGeom),e.oldGeom=r;break}case"changeattribute":{var o=e.newProperties,a=e.oldProperties;for(var l in a)a===void 0?e.feature.unset(l):e.feature.set(l,a[l]);e.oldProperties=o,e.newProperties=a;break}case"blockstart":{this._block+=n?-1:1;break}case"blockend":{this._block+=n?1:-1;break}default:}this._block<0&&(this._block=0),this._block&&(n?this.undo():this.redo()),this._record=!0,this.dispatchEvent({type:n?"undo":"redo",action:e})}}undo(){var e=this._undoStack.item(this._undoStack.getLength()-1);e&&(this._redoStack.push(e),this._undoStack.pop(),this._handleDo(e,!0))}redo(){var e=this._redoStack.item(this._redoStack.getLength()-1);e&&(this._undoStack.push(e),this._redoStack.pop(),this._handleDo(e,!1))}clear(){this._doClear=!0,this._undo.length=this._redo.length=0,this._undoStack.clear(),this._redoStack.clear(),this._doClear=!1,this.dispatchEvent({type:"stack:clear"})}hasUndo(){return this._undoStack.getLength()}hasRedo(){return this._redoStack.getLength()}};_n.prototype._onInteraction.setattributestart=function(t){this.blockStart(t.target.get("name")||"setattribute");var e=Object.assign({},t.properties);t.features.forEach(function(n){var r={};for(var o in e)r[o]=n.get(o);this._undoStack.push({type:"changeattribute",feature:n,newProperties:e,oldProperties:r})}.bind(this)),this.blockEnd()};_n.prototype._onInteraction.rotatestart=_n.prototype._onInteraction.translatestart=_n.prototype._onInteraction.scalestart=_n.prototype._onInteraction.modifystart=function(t){this.blockStart(t.type.replace(/start$/,"")),t.features.forEach(function(e){this._undoStack.push({type:"changegeometry",feature:e,oldGeom:e.getGeometry().clone()})}.bind(this)),this.blockEnd()};_n.prototype._onInteraction.beforesplit=function(){var t=this._undoStack.getLength();t>2&&this._undoStack.item(t-1).type==="blockend"&&this._undoStack.item(t-2).type==="changegeometry"?this._undoStack.pop():this.blockStart("split")};_n.prototype._onInteraction.deletestart=function(){this.blockStart("delete")};_n.prototype._onInteraction.aftersplit=_n.prototype._onInteraction.deleteend=_n.prototype.blockEnd;const St=[];for(let t=0;t<256;++t)St.push((t+256).toString(16).slice(1));function QE(t,e=0){return(St[t[e+0]]+St[t[e+1]]+St[t[e+2]]+St[t[e+3]]+"-"+St[t[e+4]]+St[t[e+5]]+"-"+St[t[e+6]]+St[t[e+7]]+"-"+St[t[e+8]]+St[t[e+9]]+"-"+St[t[e+10]]+St[t[e+11]]+St[t[e+12]]+St[t[e+13]]+St[t[e+14]]+St[t[e+15]]).toLowerCase()}let uu;const ek=new Uint8Array(16);function tk(){if(!uu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");uu=crypto.getRandomValues.bind(crypto)}return uu(ek)}const nk=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),og={randomUUID:nk};function Xu(t,e,n){if(og.randomUUID&&!t)return og.randomUUID();t=t||{};const r=t.random??t.rng?.()??tk();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,QE(r)}var cs={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var ik=cs.exports,ag;function rk(){return ag||(ag=1,function(t,e){(function(){var n,r="4.17.21",o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",g=500,h="__lodash_placeholder__",m=1,v=2,p=4,y=1,x=2,b=1,S=2,T=4,L=8,P=16,k=32,V=64,E=128,M=256,U=512,N=30,q="...",K=800,W=16,Q=1,ie=2,le=3,ye=1/0,ce=9007199254740991,pe=17976931348623157e292,G=NaN,R=4294967295,B=R-1,J=R>>>1,Be=[["ary",E],["bind",b],["bindKey",S],["curry",L],["curryRight",P],["flip",U],["partial",k],["partialRight",V],["rearg",M]],ue="[object Arguments]",we="[object Array]",De="[object AsyncFunction]",$e="[object Boolean]",be="[object Date]",Ze="[object DOMException]",st="[object Error]",$i="[object Function]",zr="[object GeneratorFunction]",Ut="[object Map]",Ot="[object Number]",xn="[object Null]",Vt="[object Object]",Ci="[object Promise]",Ts="[object Proxy]",In="[object RegExp]",Et="[object Set]",Si="[object String]",wt="[object Symbol]",N0="[object Undefined]",$r="[object WeakMap]",U0="[object WeakSet]",jr="[object ArrayBuffer]",ji="[object DataView]",Ca="[object Float32Array]",Sa="[object Float64Array]",Ea="[object Int8Array]",ka="[object Int16Array]",Ta="[object Int32Array]",Pa="[object Uint8Array]",Aa="[object Uint8ClampedArray]",Fa="[object Uint16Array]",La="[object Uint32Array]",W0=/\b__p \+= '';/g,z0=/\b(__p \+=) '' \+/g,$0=/(__e\(.*?\)|\b__t\)) \+\n'';/g,tf=/&(?:amp|lt|gt|quot|#39);/g,nf=/[&<>"']/g,j0=RegExp(tf.source),X0=RegExp(nf.source),H0=/<%-([\s\S]+?)%>/g,q0=/<%([\s\S]+?)%>/g,rf=/<%=([\s\S]+?)%>/g,K0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y0=/^\w*$/,Z0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ia=/[\\^$.*+?()[\]{}|]/g,J0=RegExp(Ia.source),Ma=/^\s+/,Q0=/\s/,ev=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,tv=/\{\n\/\* \[wrapped with (.+)\] \*/,nv=/,? & /,iv=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,rv=/[()=,{}\[\]\/\s]/,sv=/\\(\\)?/g,ov=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sf=/\w*$/,av=/^[-+]0x[0-9a-f]+$/i,lv=/^0b[01]+$/i,uv=/^\[object .+?Constructor\]$/,cv=/^0o[0-7]+$/i,fv=/^(?:0|[1-9]\d*)$/,dv=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ps=/($^)/,hv=/['\n\r\u2028\u2029\\]/g,As="\\ud800-\\udfff",gv="\\u0300-\\u036f",mv="\\ufe20-\\ufe2f",vv="\\u20d0-\\u20ff",of=gv+mv+vv,af="\\u2700-\\u27bf",lf="a-z\\xdf-\\xf6\\xf8-\\xff",_v="\\xac\\xb1\\xd7\\xf7",pv="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",yv="\\u2000-\\u206f",bv=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",uf="A-Z\\xc0-\\xd6\\xd8-\\xde",cf="\\ufe0e\\ufe0f",ff=_v+pv+yv+bv,Ra="['’]",wv="["+As+"]",df="["+ff+"]",Fs="["+of+"]",hf="\\d+",xv="["+af+"]",gf="["+lf+"]",mf="[^"+As+ff+hf+af+lf+uf+"]",Oa="\\ud83c[\\udffb-\\udfff]",Cv="(?:"+Fs+"|"+Oa+")",vf="[^"+As+"]",Va="(?:\\ud83c[\\udde6-\\uddff]){2}",Da="[\\ud800-\\udbff][\\udc00-\\udfff]",Xi="["+uf+"]",_f="\\u200d",pf="(?:"+gf+"|"+mf+")",Sv="(?:"+Xi+"|"+mf+")",yf="(?:"+Ra+"(?:d|ll|m|re|s|t|ve))?",bf="(?:"+Ra+"(?:D|LL|M|RE|S|T|VE))?",wf=Cv+"?",xf="["+cf+"]?",Ev="(?:"+_f+"(?:"+[vf,Va,Da].join("|")+")"+xf+wf+")*",kv="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Tv="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Cf=xf+wf+Ev,Pv="(?:"+[xv,Va,Da].join("|")+")"+Cf,Av="(?:"+[vf+Fs+"?",Fs,Va,Da,wv].join("|")+")",Fv=RegExp(Ra,"g"),Lv=RegExp(Fs,"g"),Ga=RegExp(Oa+"(?="+Oa+")|"+Av+Cf,"g"),Iv=RegExp([Xi+"?"+gf+"+"+yf+"(?="+[df,Xi,"$"].join("|")+")",Sv+"+"+bf+"(?="+[df,Xi+pf,"$"].join("|")+")",Xi+"?"+pf+"+"+yf,Xi+"+"+bf,Tv,kv,hf,Pv].join("|"),"g"),Mv=RegExp("["+_f+As+of+cf+"]"),Rv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ov=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Vv=-1,Xe={};Xe[Ca]=Xe[Sa]=Xe[Ea]=Xe[ka]=Xe[Ta]=Xe[Pa]=Xe[Aa]=Xe[Fa]=Xe[La]=!0,Xe[ue]=Xe[we]=Xe[jr]=Xe[$e]=Xe[ji]=Xe[be]=Xe[st]=Xe[$i]=Xe[Ut]=Xe[Ot]=Xe[Vt]=Xe[In]=Xe[Et]=Xe[Si]=Xe[$r]=!1;var je={};je[ue]=je[we]=je[jr]=je[ji]=je[$e]=je[be]=je[Ca]=je[Sa]=je[Ea]=je[ka]=je[Ta]=je[Ut]=je[Ot]=je[Vt]=je[In]=je[Et]=je[Si]=je[wt]=je[Pa]=je[Aa]=je[Fa]=je[La]=!0,je[st]=je[$i]=je[$r]=!1;var Dv={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Gv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Nv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Uv=parseFloat,Wv=parseInt,Sf=typeof wo=="object"&&wo&&wo.Object===Object&&wo,zv=typeof self=="object"&&self&&self.Object===Object&&self,xt=Sf||zv||Function("return this")(),Ba=e&&!e.nodeType&&e,Ei=Ba&&!0&&t&&!t.nodeType&&t,Ef=Ei&&Ei.exports===Ba,Na=Ef&&Sf.process,Zt=function(){try{var O=Ei&&Ei.require&&Ei.require("util").types;return O||Na&&Na.binding&&Na.binding("util")}catch{}}(),kf=Zt&&Zt.isArrayBuffer,Tf=Zt&&Zt.isDate,Pf=Zt&&Zt.isMap,Af=Zt&&Zt.isRegExp,Ff=Zt&&Zt.isSet,Lf=Zt&&Zt.isTypedArray;function Wt(O,$,z){switch(z.length){case 0:return O.call($);case 1:return O.call($,z[0]);case 2:return O.call($,z[0],z[1]);case 3:return O.call($,z[0],z[1],z[2])}return O.apply($,z)}function $v(O,$,z,re){for(var xe=-1,Ne=O==null?0:O.length;++xe<Ne;){var gt=O[xe];$(re,gt,z(gt),O)}return re}function Jt(O,$){for(var z=-1,re=O==null?0:O.length;++z<re&&$(O[z],z,O)!==!1;);return O}function jv(O,$){for(var z=O==null?0:O.length;z--&&$(O[z],z,O)!==!1;);return O}function If(O,$){for(var z=-1,re=O==null?0:O.length;++z<re;)if(!$(O[z],z,O))return!1;return!0}function ti(O,$){for(var z=-1,re=O==null?0:O.length,xe=0,Ne=[];++z<re;){var gt=O[z];$(gt,z,O)&&(Ne[xe++]=gt)}return Ne}function Ls(O,$){var z=O==null?0:O.length;return!!z&&Hi(O,$,0)>-1}function Ua(O,$,z){for(var re=-1,xe=O==null?0:O.length;++re<xe;)if(z($,O[re]))return!0;return!1}function Ke(O,$){for(var z=-1,re=O==null?0:O.length,xe=Array(re);++z<re;)xe[z]=$(O[z],z,O);return xe}function ni(O,$){for(var z=-1,re=$.length,xe=O.length;++z<re;)O[xe+z]=$[z];return O}function Wa(O,$,z,re){var xe=-1,Ne=O==null?0:O.length;for(re&&Ne&&(z=O[++xe]);++xe<Ne;)z=$(z,O[xe],xe,O);return z}function Xv(O,$,z,re){var xe=O==null?0:O.length;for(re&&xe&&(z=O[--xe]);xe--;)z=$(z,O[xe],xe,O);return z}function za(O,$){for(var z=-1,re=O==null?0:O.length;++z<re;)if($(O[z],z,O))return!0;return!1}var Hv=$a("length");function qv(O){return O.split("")}function Kv(O){return O.match(iv)||[]}function Mf(O,$,z){var re;return z(O,function(xe,Ne,gt){if($(xe,Ne,gt))return re=Ne,!1}),re}function Is(O,$,z,re){for(var xe=O.length,Ne=z+(re?1:-1);re?Ne--:++Ne<xe;)if($(O[Ne],Ne,O))return Ne;return-1}function Hi(O,$,z){return $===$?a_(O,$,z):Is(O,Rf,z)}function Yv(O,$,z,re){for(var xe=z-1,Ne=O.length;++xe<Ne;)if(re(O[xe],$))return xe;return-1}function Rf(O){return O!==O}function Of(O,$){var z=O==null?0:O.length;return z?Xa(O,$)/z:G}function $a(O){return function($){return $==null?n:$[O]}}function ja(O){return function($){return O==null?n:O[$]}}function Vf(O,$,z,re,xe){return xe(O,function(Ne,gt,ze){z=re?(re=!1,Ne):$(z,Ne,gt,ze)}),z}function Zv(O,$){var z=O.length;for(O.sort($);z--;)O[z]=O[z].value;return O}function Xa(O,$){for(var z,re=-1,xe=O.length;++re<xe;){var Ne=$(O[re]);Ne!==n&&(z=z===n?Ne:z+Ne)}return z}function Ha(O,$){for(var z=-1,re=Array(O);++z<O;)re[z]=$(z);return re}function Jv(O,$){return Ke($,function(z){return[z,O[z]]})}function Df(O){return O&&O.slice(0,Uf(O)+1).replace(Ma,"")}function zt(O){return function($){return O($)}}function qa(O,$){return Ke($,function(z){return O[z]})}function Xr(O,$){return O.has($)}function Gf(O,$){for(var z=-1,re=O.length;++z<re&&Hi($,O[z],0)>-1;);return z}function Bf(O,$){for(var z=O.length;z--&&Hi($,O[z],0)>-1;);return z}function Qv(O,$){for(var z=O.length,re=0;z--;)O[z]===$&&++re;return re}var e_=ja(Dv),t_=ja(Gv);function n_(O){return"\\"+Nv[O]}function i_(O,$){return O==null?n:O[$]}function qi(O){return Mv.test(O)}function r_(O){return Rv.test(O)}function s_(O){for(var $,z=[];!($=O.next()).done;)z.push($.value);return z}function Ka(O){var $=-1,z=Array(O.size);return O.forEach(function(re,xe){z[++$]=[xe,re]}),z}function Nf(O,$){return function(z){return O($(z))}}function ii(O,$){for(var z=-1,re=O.length,xe=0,Ne=[];++z<re;){var gt=O[z];(gt===$||gt===h)&&(O[z]=h,Ne[xe++]=z)}return Ne}function Ms(O){var $=-1,z=Array(O.size);return O.forEach(function(re){z[++$]=re}),z}function o_(O){var $=-1,z=Array(O.size);return O.forEach(function(re){z[++$]=[re,re]}),z}function a_(O,$,z){for(var re=z-1,xe=O.length;++re<xe;)if(O[re]===$)return re;return-1}function l_(O,$,z){for(var re=z+1;re--;)if(O[re]===$)return re;return re}function Ki(O){return qi(O)?c_(O):Hv(O)}function cn(O){return qi(O)?f_(O):qv(O)}function Uf(O){for(var $=O.length;$--&&Q0.test(O.charAt($)););return $}var u_=ja(Bv);function c_(O){for(var $=Ga.lastIndex=0;Ga.test(O);)++$;return $}function f_(O){return O.match(Ga)||[]}function d_(O){return O.match(Iv)||[]}var h_=function O($){$=$==null?xt:Yi.defaults(xt.Object(),$,Yi.pick(xt,Ov));var z=$.Array,re=$.Date,xe=$.Error,Ne=$.Function,gt=$.Math,ze=$.Object,Ya=$.RegExp,g_=$.String,Qt=$.TypeError,Rs=z.prototype,m_=Ne.prototype,Zi=ze.prototype,Os=$["__core-js_shared__"],Vs=m_.toString,We=Zi.hasOwnProperty,v_=0,Wf=function(){var i=/[^.]+$/.exec(Os&&Os.keys&&Os.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),Ds=Zi.toString,__=Vs.call(ze),p_=xt._,y_=Ya("^"+Vs.call(We).replace(Ia,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gs=Ef?$.Buffer:n,ri=$.Symbol,Bs=$.Uint8Array,zf=Gs?Gs.allocUnsafe:n,Ns=Nf(ze.getPrototypeOf,ze),$f=ze.create,jf=Zi.propertyIsEnumerable,Us=Rs.splice,Xf=ri?ri.isConcatSpreadable:n,Hr=ri?ri.iterator:n,ki=ri?ri.toStringTag:n,Ws=function(){try{var i=Li(ze,"defineProperty");return i({},"",{}),i}catch{}}(),b_=$.clearTimeout!==xt.clearTimeout&&$.clearTimeout,w_=re&&re.now!==xt.Date.now&&re.now,x_=$.setTimeout!==xt.setTimeout&&$.setTimeout,zs=gt.ceil,$s=gt.floor,Za=ze.getOwnPropertySymbols,C_=Gs?Gs.isBuffer:n,Hf=$.isFinite,S_=Rs.join,E_=Nf(ze.keys,ze),mt=gt.max,kt=gt.min,k_=re.now,T_=$.parseInt,qf=gt.random,P_=Rs.reverse,Ja=Li($,"DataView"),qr=Li($,"Map"),Qa=Li($,"Promise"),Ji=Li($,"Set"),Kr=Li($,"WeakMap"),Yr=Li(ze,"create"),js=Kr&&new Kr,Qi={},A_=Ii(Ja),F_=Ii(qr),L_=Ii(Qa),I_=Ii(Ji),M_=Ii(Kr),Xs=ri?ri.prototype:n,Zr=Xs?Xs.valueOf:n,Kf=Xs?Xs.toString:n;function w(i){if(it(i)&&!Ce(i)&&!(i instanceof Re)){if(i instanceof en)return i;if(We.call(i,"__wrapped__"))return Yd(i)}return new en(i)}var er=function(){function i(){}return function(s){if(!Je(s))return{};if($f)return $f(s);i.prototype=s;var u=new i;return i.prototype=n,u}}();function Hs(){}function en(i,s){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=n}w.templateSettings={escape:H0,evaluate:q0,interpolate:rf,variable:"",imports:{_:w}},w.prototype=Hs.prototype,w.prototype.constructor=w,en.prototype=er(Hs.prototype),en.prototype.constructor=en;function Re(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=R,this.__views__=[]}function R_(){var i=new Re(this.__wrapped__);return i.__actions__=Dt(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=Dt(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=Dt(this.__views__),i}function O_(){if(this.__filtered__){var i=new Re(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function V_(){var i=this.__wrapped__.value(),s=this.__dir__,u=Ce(i),d=s<0,_=u?i.length:0,C=qp(0,_,this.__views__),A=C.start,I=C.end,D=I-A,j=d?I:A-1,X=this.__iteratees__,Y=X.length,ne=0,ae=kt(D,this.__takeCount__);if(!u||!d&&_==D&&ae==D)return yd(i,this.__actions__);var ge=[];e:for(;D--&&ne<ae;){j+=s;for(var Ae=-1,me=i[j];++Ae<Y;){var Ie=X[Ae],Ve=Ie.iteratee,Xt=Ie.type,Mt=Ve(me);if(Xt==ie)me=Mt;else if(!Mt){if(Xt==Q)continue e;break e}}ge[ne++]=me}return ge}Re.prototype=er(Hs.prototype),Re.prototype.constructor=Re;function Ti(i){var s=-1,u=i==null?0:i.length;for(this.clear();++s<u;){var d=i[s];this.set(d[0],d[1])}}function D_(){this.__data__=Yr?Yr(null):{},this.size=0}function G_(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s}function B_(i){var s=this.__data__;if(Yr){var u=s[i];return u===f?n:u}return We.call(s,i)?s[i]:n}function N_(i){var s=this.__data__;return Yr?s[i]!==n:We.call(s,i)}function U_(i,s){var u=this.__data__;return this.size+=this.has(i)?0:1,u[i]=Yr&&s===n?f:s,this}Ti.prototype.clear=D_,Ti.prototype.delete=G_,Ti.prototype.get=B_,Ti.prototype.has=N_,Ti.prototype.set=U_;function Mn(i){var s=-1,u=i==null?0:i.length;for(this.clear();++s<u;){var d=i[s];this.set(d[0],d[1])}}function W_(){this.__data__=[],this.size=0}function z_(i){var s=this.__data__,u=qs(s,i);if(u<0)return!1;var d=s.length-1;return u==d?s.pop():Us.call(s,u,1),--this.size,!0}function $_(i){var s=this.__data__,u=qs(s,i);return u<0?n:s[u][1]}function j_(i){return qs(this.__data__,i)>-1}function X_(i,s){var u=this.__data__,d=qs(u,i);return d<0?(++this.size,u.push([i,s])):u[d][1]=s,this}Mn.prototype.clear=W_,Mn.prototype.delete=z_,Mn.prototype.get=$_,Mn.prototype.has=j_,Mn.prototype.set=X_;function Rn(i){var s=-1,u=i==null?0:i.length;for(this.clear();++s<u;){var d=i[s];this.set(d[0],d[1])}}function H_(){this.size=0,this.__data__={hash:new Ti,map:new(qr||Mn),string:new Ti}}function q_(i){var s=oo(this,i).delete(i);return this.size-=s?1:0,s}function K_(i){return oo(this,i).get(i)}function Y_(i){return oo(this,i).has(i)}function Z_(i,s){var u=oo(this,i),d=u.size;return u.set(i,s),this.size+=u.size==d?0:1,this}Rn.prototype.clear=H_,Rn.prototype.delete=q_,Rn.prototype.get=K_,Rn.prototype.has=Y_,Rn.prototype.set=Z_;function Pi(i){var s=-1,u=i==null?0:i.length;for(this.__data__=new Rn;++s<u;)this.add(i[s])}function J_(i){return this.__data__.set(i,f),this}function Q_(i){return this.__data__.has(i)}Pi.prototype.add=Pi.prototype.push=J_,Pi.prototype.has=Q_;function fn(i){var s=this.__data__=new Mn(i);this.size=s.size}function ep(){this.__data__=new Mn,this.size=0}function tp(i){var s=this.__data__,u=s.delete(i);return this.size=s.size,u}function np(i){return this.__data__.get(i)}function ip(i){return this.__data__.has(i)}function rp(i,s){var u=this.__data__;if(u instanceof Mn){var d=u.__data__;if(!qr||d.length<o-1)return d.push([i,s]),this.size=++u.size,this;u=this.__data__=new Rn(d)}return u.set(i,s),this.size=u.size,this}fn.prototype.clear=ep,fn.prototype.delete=tp,fn.prototype.get=np,fn.prototype.has=ip,fn.prototype.set=rp;function Yf(i,s){var u=Ce(i),d=!u&&Mi(i),_=!u&&!d&&ui(i),C=!u&&!d&&!_&&rr(i),A=u||d||_||C,I=A?Ha(i.length,g_):[],D=I.length;for(var j in i)(s||We.call(i,j))&&!(A&&(j=="length"||_&&(j=="offset"||j=="parent")||C&&(j=="buffer"||j=="byteLength"||j=="byteOffset")||Gn(j,D)))&&I.push(j);return I}function Zf(i){var s=i.length;return s?i[cl(0,s-1)]:n}function sp(i,s){return ao(Dt(i),Ai(s,0,i.length))}function op(i){return ao(Dt(i))}function el(i,s,u){(u!==n&&!dn(i[s],u)||u===n&&!(s in i))&&On(i,s,u)}function Jr(i,s,u){var d=i[s];(!(We.call(i,s)&&dn(d,u))||u===n&&!(s in i))&&On(i,s,u)}function qs(i,s){for(var u=i.length;u--;)if(dn(i[u][0],s))return u;return-1}function ap(i,s,u,d){return si(i,function(_,C,A){s(d,_,u(_),A)}),d}function Jf(i,s){return i&&Sn(s,yt(s),i)}function lp(i,s){return i&&Sn(s,Bt(s),i)}function On(i,s,u){s=="__proto__"&&Ws?Ws(i,s,{configurable:!0,enumerable:!0,value:u,writable:!0}):i[s]=u}function tl(i,s){for(var u=-1,d=s.length,_=z(d),C=i==null;++u<d;)_[u]=C?n:Ol(i,s[u]);return _}function Ai(i,s,u){return i===i&&(u!==n&&(i=i<=u?i:u),s!==n&&(i=i>=s?i:s)),i}function tn(i,s,u,d,_,C){var A,I=s&m,D=s&v,j=s&p;if(u&&(A=_?u(i,d,_,C):u(i)),A!==n)return A;if(!Je(i))return i;var X=Ce(i);if(X){if(A=Yp(i),!I)return Dt(i,A)}else{var Y=Tt(i),ne=Y==$i||Y==zr;if(ui(i))return xd(i,I);if(Y==Vt||Y==ue||ne&&!_){if(A=D||ne?{}:Ud(i),!I)return D?Bp(i,lp(A,i)):Gp(i,Jf(A,i))}else{if(!je[Y])return _?i:{};A=Zp(i,Y,I)}}C||(C=new fn);var ae=C.get(i);if(ae)return ae;C.set(i,A),vh(i)?i.forEach(function(me){A.add(tn(me,s,u,me,i,C))}):gh(i)&&i.forEach(function(me,Ie){A.set(Ie,tn(me,s,u,Ie,i,C))});var ge=j?D?wl:bl:D?Bt:yt,Ae=X?n:ge(i);return Jt(Ae||i,function(me,Ie){Ae&&(Ie=me,me=i[Ie]),Jr(A,Ie,tn(me,s,u,Ie,i,C))}),A}function up(i){var s=yt(i);return function(u){return Qf(u,i,s)}}function Qf(i,s,u){var d=u.length;if(i==null)return!d;for(i=ze(i);d--;){var _=u[d],C=s[_],A=i[_];if(A===n&&!(_ in i)||!C(A))return!1}return!0}function ed(i,s,u){if(typeof i!="function")throw new Qt(l);return ss(function(){i.apply(n,u)},s)}function Qr(i,s,u,d){var _=-1,C=Ls,A=!0,I=i.length,D=[],j=s.length;if(!I)return D;u&&(s=Ke(s,zt(u))),d?(C=Ua,A=!1):s.length>=o&&(C=Xr,A=!1,s=new Pi(s));e:for(;++_<I;){var X=i[_],Y=u==null?X:u(X);if(X=d||X!==0?X:0,A&&Y===Y){for(var ne=j;ne--;)if(s[ne]===Y)continue e;D.push(X)}else C(s,Y,d)||D.push(X)}return D}var si=Td(Cn),td=Td(il,!0);function cp(i,s){var u=!0;return si(i,function(d,_,C){return u=!!s(d,_,C),u}),u}function Ks(i,s,u){for(var d=-1,_=i.length;++d<_;){var C=i[d],A=s(C);if(A!=null&&(I===n?A===A&&!jt(A):u(A,I)))var I=A,D=C}return D}function fp(i,s,u,d){var _=i.length;for(u=Te(u),u<0&&(u=-u>_?0:_+u),d=d===n||d>_?_:Te(d),d<0&&(d+=_),d=u>d?0:ph(d);u<d;)i[u++]=s;return i}function nd(i,s){var u=[];return si(i,function(d,_,C){s(d,_,C)&&u.push(d)}),u}function Ct(i,s,u,d,_){var C=-1,A=i.length;for(u||(u=Qp),_||(_=[]);++C<A;){var I=i[C];s>0&&u(I)?s>1?Ct(I,s-1,u,d,_):ni(_,I):d||(_[_.length]=I)}return _}var nl=Pd(),id=Pd(!0);function Cn(i,s){return i&&nl(i,s,yt)}function il(i,s){return i&&id(i,s,yt)}function Ys(i,s){return ti(s,function(u){return Bn(i[u])})}function Fi(i,s){s=ai(s,i);for(var u=0,d=s.length;i!=null&&u<d;)i=i[En(s[u++])];return u&&u==d?i:n}function rd(i,s,u){var d=s(i);return Ce(i)?d:ni(d,u(i))}function Lt(i){return i==null?i===n?N0:xn:ki&&ki in ze(i)?Hp(i):oy(i)}function rl(i,s){return i>s}function dp(i,s){return i!=null&&We.call(i,s)}function hp(i,s){return i!=null&&s in ze(i)}function gp(i,s,u){return i>=kt(s,u)&&i<mt(s,u)}function sl(i,s,u){for(var d=u?Ua:Ls,_=i[0].length,C=i.length,A=C,I=z(C),D=1/0,j=[];A--;){var X=i[A];A&&s&&(X=Ke(X,zt(s))),D=kt(X.length,D),I[A]=!u&&(s||_>=120&&X.length>=120)?new Pi(A&&X):n}X=i[0];var Y=-1,ne=I[0];e:for(;++Y<_&&j.length<D;){var ae=X[Y],ge=s?s(ae):ae;if(ae=u||ae!==0?ae:0,!(ne?Xr(ne,ge):d(j,ge,u))){for(A=C;--A;){var Ae=I[A];if(!(Ae?Xr(Ae,ge):d(i[A],ge,u)))continue e}ne&&ne.push(ge),j.push(ae)}}return j}function mp(i,s,u,d){return Cn(i,function(_,C,A){s(d,u(_),C,A)}),d}function es(i,s,u){s=ai(s,i),i=jd(i,s);var d=i==null?i:i[En(rn(s))];return d==null?n:Wt(d,i,u)}function sd(i){return it(i)&&Lt(i)==ue}function vp(i){return it(i)&&Lt(i)==jr}function _p(i){return it(i)&&Lt(i)==be}function ts(i,s,u,d,_){return i===s?!0:i==null||s==null||!it(i)&&!it(s)?i!==i&&s!==s:pp(i,s,u,d,ts,_)}function pp(i,s,u,d,_,C){var A=Ce(i),I=Ce(s),D=A?we:Tt(i),j=I?we:Tt(s);D=D==ue?Vt:D,j=j==ue?Vt:j;var X=D==Vt,Y=j==Vt,ne=D==j;if(ne&&ui(i)){if(!ui(s))return!1;A=!0,X=!1}if(ne&&!X)return C||(C=new fn),A||rr(i)?Gd(i,s,u,d,_,C):jp(i,s,D,u,d,_,C);if(!(u&y)){var ae=X&&We.call(i,"__wrapped__"),ge=Y&&We.call(s,"__wrapped__");if(ae||ge){var Ae=ae?i.value():i,me=ge?s.value():s;return C||(C=new fn),_(Ae,me,u,d,C)}}return ne?(C||(C=new fn),Xp(i,s,u,d,_,C)):!1}function yp(i){return it(i)&&Tt(i)==Ut}function ol(i,s,u,d){var _=u.length,C=_,A=!d;if(i==null)return!C;for(i=ze(i);_--;){var I=u[_];if(A&&I[2]?I[1]!==i[I[0]]:!(I[0]in i))return!1}for(;++_<C;){I=u[_];var D=I[0],j=i[D],X=I[1];if(A&&I[2]){if(j===n&&!(D in i))return!1}else{var Y=new fn;if(d)var ne=d(j,X,D,i,s,Y);if(!(ne===n?ts(X,j,y|x,d,Y):ne))return!1}}return!0}function od(i){if(!Je(i)||ty(i))return!1;var s=Bn(i)?y_:uv;return s.test(Ii(i))}function bp(i){return it(i)&&Lt(i)==In}function wp(i){return it(i)&&Tt(i)==Et}function xp(i){return it(i)&&go(i.length)&&!!Xe[Lt(i)]}function ad(i){return typeof i=="function"?i:i==null?Nt:typeof i=="object"?Ce(i)?cd(i[0],i[1]):ud(i):Ah(i)}function al(i){if(!rs(i))return E_(i);var s=[];for(var u in ze(i))We.call(i,u)&&u!="constructor"&&s.push(u);return s}function Cp(i){if(!Je(i))return sy(i);var s=rs(i),u=[];for(var d in i)d=="constructor"&&(s||!We.call(i,d))||u.push(d);return u}function ll(i,s){return i<s}function ld(i,s){var u=-1,d=Gt(i)?z(i.length):[];return si(i,function(_,C,A){d[++u]=s(_,C,A)}),d}function ud(i){var s=Cl(i);return s.length==1&&s[0][2]?zd(s[0][0],s[0][1]):function(u){return u===i||ol(u,i,s)}}function cd(i,s){return El(i)&&Wd(s)?zd(En(i),s):function(u){var d=Ol(u,i);return d===n&&d===s?Vl(u,i):ts(s,d,y|x)}}function Zs(i,s,u,d,_){i!==s&&nl(s,function(C,A){if(_||(_=new fn),Je(C))Sp(i,s,A,u,Zs,d,_);else{var I=d?d(Tl(i,A),C,A+"",i,s,_):n;I===n&&(I=C),el(i,A,I)}},Bt)}function Sp(i,s,u,d,_,C,A){var I=Tl(i,u),D=Tl(s,u),j=A.get(D);if(j){el(i,u,j);return}var X=C?C(I,D,u+"",i,s,A):n,Y=X===n;if(Y){var ne=Ce(D),ae=!ne&&ui(D),ge=!ne&&!ae&&rr(D);X=D,ne||ae||ge?Ce(I)?X=I:ot(I)?X=Dt(I):ae?(Y=!1,X=xd(D,!0)):ge?(Y=!1,X=Cd(D,!0)):X=[]:os(D)||Mi(D)?(X=I,Mi(I)?X=yh(I):(!Je(I)||Bn(I))&&(X=Ud(D))):Y=!1}Y&&(A.set(D,X),_(X,D,d,C,A),A.delete(D)),el(i,u,X)}function fd(i,s){var u=i.length;if(u)return s+=s<0?u:0,Gn(s,u)?i[s]:n}function dd(i,s,u){s.length?s=Ke(s,function(C){return Ce(C)?function(A){return Fi(A,C.length===1?C[0]:C)}:C}):s=[Nt];var d=-1;s=Ke(s,zt(de()));var _=ld(i,function(C,A,I){var D=Ke(s,function(j){return j(C)});return{criteria:D,index:++d,value:C}});return Zv(_,function(C,A){return Dp(C,A,u)})}function Ep(i,s){return hd(i,s,function(u,d){return Vl(i,d)})}function hd(i,s,u){for(var d=-1,_=s.length,C={};++d<_;){var A=s[d],I=Fi(i,A);u(I,A)&&ns(C,ai(A,i),I)}return C}function kp(i){return function(s){return Fi(s,i)}}function ul(i,s,u,d){var _=d?Yv:Hi,C=-1,A=s.length,I=i;for(i===s&&(s=Dt(s)),u&&(I=Ke(i,zt(u)));++C<A;)for(var D=0,j=s[C],X=u?u(j):j;(D=_(I,X,D,d))>-1;)I!==i&&Us.call(I,D,1),Us.call(i,D,1);return i}function gd(i,s){for(var u=i?s.length:0,d=u-1;u--;){var _=s[u];if(u==d||_!==C){var C=_;Gn(_)?Us.call(i,_,1):hl(i,_)}}return i}function cl(i,s){return i+$s(qf()*(s-i+1))}function Tp(i,s,u,d){for(var _=-1,C=mt(zs((s-i)/(u||1)),0),A=z(C);C--;)A[d?C:++_]=i,i+=u;return A}function fl(i,s){var u="";if(!i||s<1||s>ce)return u;do s%2&&(u+=i),s=$s(s/2),s&&(i+=i);while(s);return u}function Fe(i,s){return Pl($d(i,s,Nt),i+"")}function Pp(i){return Zf(sr(i))}function Ap(i,s){var u=sr(i);return ao(u,Ai(s,0,u.length))}function ns(i,s,u,d){if(!Je(i))return i;s=ai(s,i);for(var _=-1,C=s.length,A=C-1,I=i;I!=null&&++_<C;){var D=En(s[_]),j=u;if(D==="__proto__"||D==="constructor"||D==="prototype")return i;if(_!=A){var X=I[D];j=d?d(X,D,I):n,j===n&&(j=Je(X)?X:Gn(s[_+1])?[]:{})}Jr(I,D,j),I=I[D]}return i}var md=js?function(i,s){return js.set(i,s),i}:Nt,Fp=Ws?function(i,s){return Ws(i,"toString",{configurable:!0,enumerable:!1,value:Gl(s),writable:!0})}:Nt;function Lp(i){return ao(sr(i))}function nn(i,s,u){var d=-1,_=i.length;s<0&&(s=-s>_?0:_+s),u=u>_?_:u,u<0&&(u+=_),_=s>u?0:u-s>>>0,s>>>=0;for(var C=z(_);++d<_;)C[d]=i[d+s];return C}function Ip(i,s){var u;return si(i,function(d,_,C){return u=s(d,_,C),!u}),!!u}function Js(i,s,u){var d=0,_=i==null?d:i.length;if(typeof s=="number"&&s===s&&_<=J){for(;d<_;){var C=d+_>>>1,A=i[C];A!==null&&!jt(A)&&(u?A<=s:A<s)?d=C+1:_=C}return _}return dl(i,s,Nt,u)}function dl(i,s,u,d){var _=0,C=i==null?0:i.length;if(C===0)return 0;s=u(s);for(var A=s!==s,I=s===null,D=jt(s),j=s===n;_<C;){var X=$s((_+C)/2),Y=u(i[X]),ne=Y!==n,ae=Y===null,ge=Y===Y,Ae=jt(Y);if(A)var me=d||ge;else j?me=ge&&(d||ne):I?me=ge&&ne&&(d||!ae):D?me=ge&&ne&&!ae&&(d||!Ae):ae||Ae?me=!1:me=d?Y<=s:Y<s;me?_=X+1:C=X}return kt(C,B)}function vd(i,s){for(var u=-1,d=i.length,_=0,C=[];++u<d;){var A=i[u],I=s?s(A):A;if(!u||!dn(I,D)){var D=I;C[_++]=A===0?0:A}}return C}function _d(i){return typeof i=="number"?i:jt(i)?G:+i}function $t(i){if(typeof i=="string")return i;if(Ce(i))return Ke(i,$t)+"";if(jt(i))return Kf?Kf.call(i):"";var s=i+"";return s=="0"&&1/i==-1/0?"-0":s}function oi(i,s,u){var d=-1,_=Ls,C=i.length,A=!0,I=[],D=I;if(u)A=!1,_=Ua;else if(C>=o){var j=s?null:zp(i);if(j)return Ms(j);A=!1,_=Xr,D=new Pi}else D=s?[]:I;e:for(;++d<C;){var X=i[d],Y=s?s(X):X;if(X=u||X!==0?X:0,A&&Y===Y){for(var ne=D.length;ne--;)if(D[ne]===Y)continue e;s&&D.push(Y),I.push(X)}else _(D,Y,u)||(D!==I&&D.push(Y),I.push(X))}return I}function hl(i,s){return s=ai(s,i),i=jd(i,s),i==null||delete i[En(rn(s))]}function pd(i,s,u,d){return ns(i,s,u(Fi(i,s)),d)}function Qs(i,s,u,d){for(var _=i.length,C=d?_:-1;(d?C--:++C<_)&&s(i[C],C,i););return u?nn(i,d?0:C,d?C+1:_):nn(i,d?C+1:0,d?_:C)}function yd(i,s){var u=i;return u instanceof Re&&(u=u.value()),Wa(s,function(d,_){return _.func.apply(_.thisArg,ni([d],_.args))},u)}function gl(i,s,u){var d=i.length;if(d<2)return d?oi(i[0]):[];for(var _=-1,C=z(d);++_<d;)for(var A=i[_],I=-1;++I<d;)I!=_&&(C[_]=Qr(C[_]||A,i[I],s,u));return oi(Ct(C,1),s,u)}function bd(i,s,u){for(var d=-1,_=i.length,C=s.length,A={};++d<_;){var I=d<C?s[d]:n;u(A,i[d],I)}return A}function ml(i){return ot(i)?i:[]}function vl(i){return typeof i=="function"?i:Nt}function ai(i,s){return Ce(i)?i:El(i,s)?[i]:Kd(Ue(i))}var Mp=Fe;function li(i,s,u){var d=i.length;return u=u===n?d:u,!s&&u>=d?i:nn(i,s,u)}var wd=b_||function(i){return xt.clearTimeout(i)};function xd(i,s){if(s)return i.slice();var u=i.length,d=zf?zf(u):new i.constructor(u);return i.copy(d),d}function _l(i){var s=new i.constructor(i.byteLength);return new Bs(s).set(new Bs(i)),s}function Rp(i,s){var u=s?_l(i.buffer):i.buffer;return new i.constructor(u,i.byteOffset,i.byteLength)}function Op(i){var s=new i.constructor(i.source,sf.exec(i));return s.lastIndex=i.lastIndex,s}function Vp(i){return Zr?ze(Zr.call(i)):{}}function Cd(i,s){var u=s?_l(i.buffer):i.buffer;return new i.constructor(u,i.byteOffset,i.length)}function Sd(i,s){if(i!==s){var u=i!==n,d=i===null,_=i===i,C=jt(i),A=s!==n,I=s===null,D=s===s,j=jt(s);if(!I&&!j&&!C&&i>s||C&&A&&D&&!I&&!j||d&&A&&D||!u&&D||!_)return 1;if(!d&&!C&&!j&&i<s||j&&u&&_&&!d&&!C||I&&u&&_||!A&&_||!D)return-1}return 0}function Dp(i,s,u){for(var d=-1,_=i.criteria,C=s.criteria,A=_.length,I=u.length;++d<A;){var D=Sd(_[d],C[d]);if(D){if(d>=I)return D;var j=u[d];return D*(j=="desc"?-1:1)}}return i.index-s.index}function Ed(i,s,u,d){for(var _=-1,C=i.length,A=u.length,I=-1,D=s.length,j=mt(C-A,0),X=z(D+j),Y=!d;++I<D;)X[I]=s[I];for(;++_<A;)(Y||_<C)&&(X[u[_]]=i[_]);for(;j--;)X[I++]=i[_++];return X}function kd(i,s,u,d){for(var _=-1,C=i.length,A=-1,I=u.length,D=-1,j=s.length,X=mt(C-I,0),Y=z(X+j),ne=!d;++_<X;)Y[_]=i[_];for(var ae=_;++D<j;)Y[ae+D]=s[D];for(;++A<I;)(ne||_<C)&&(Y[ae+u[A]]=i[_++]);return Y}function Dt(i,s){var u=-1,d=i.length;for(s||(s=z(d));++u<d;)s[u]=i[u];return s}function Sn(i,s,u,d){var _=!u;u||(u={});for(var C=-1,A=s.length;++C<A;){var I=s[C],D=d?d(u[I],i[I],I,u,i):n;D===n&&(D=i[I]),_?On(u,I,D):Jr(u,I,D)}return u}function Gp(i,s){return Sn(i,Sl(i),s)}function Bp(i,s){return Sn(i,Bd(i),s)}function eo(i,s){return function(u,d){var _=Ce(u)?$v:ap,C=s?s():{};return _(u,i,de(d,2),C)}}function tr(i){return Fe(function(s,u){var d=-1,_=u.length,C=_>1?u[_-1]:n,A=_>2?u[2]:n;for(C=i.length>3&&typeof C=="function"?(_--,C):n,A&&It(u[0],u[1],A)&&(C=_<3?n:C,_=1),s=ze(s);++d<_;){var I=u[d];I&&i(s,I,d,C)}return s})}function Td(i,s){return function(u,d){if(u==null)return u;if(!Gt(u))return i(u,d);for(var _=u.length,C=s?_:-1,A=ze(u);(s?C--:++C<_)&&d(A[C],C,A)!==!1;);return u}}function Pd(i){return function(s,u,d){for(var _=-1,C=ze(s),A=d(s),I=A.length;I--;){var D=A[i?I:++_];if(u(C[D],D,C)===!1)break}return s}}function Np(i,s,u){var d=s&b,_=is(i);function C(){var A=this&&this!==xt&&this instanceof C?_:i;return A.apply(d?u:this,arguments)}return C}function Ad(i){return function(s){s=Ue(s);var u=qi(s)?cn(s):n,d=u?u[0]:s.charAt(0),_=u?li(u,1).join(""):s.slice(1);return d[i]()+_}}function nr(i){return function(s){return Wa(Th(kh(s).replace(Fv,"")),i,"")}}function is(i){return function(){var s=arguments;switch(s.length){case 0:return new i;case 1:return new i(s[0]);case 2:return new i(s[0],s[1]);case 3:return new i(s[0],s[1],s[2]);case 4:return new i(s[0],s[1],s[2],s[3]);case 5:return new i(s[0],s[1],s[2],s[3],s[4]);case 6:return new i(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new i(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var u=er(i.prototype),d=i.apply(u,s);return Je(d)?d:u}}function Up(i,s,u){var d=is(i);function _(){for(var C=arguments.length,A=z(C),I=C,D=ir(_);I--;)A[I]=arguments[I];var j=C<3&&A[0]!==D&&A[C-1]!==D?[]:ii(A,D);if(C-=j.length,C<u)return Rd(i,s,to,_.placeholder,n,A,j,n,n,u-C);var X=this&&this!==xt&&this instanceof _?d:i;return Wt(X,this,A)}return _}function Fd(i){return function(s,u,d){var _=ze(s);if(!Gt(s)){var C=de(u,3);s=yt(s),u=function(I){return C(_[I],I,_)}}var A=i(s,u,d);return A>-1?_[C?s[A]:A]:n}}function Ld(i){return Dn(function(s){var u=s.length,d=u,_=en.prototype.thru;for(i&&s.reverse();d--;){var C=s[d];if(typeof C!="function")throw new Qt(l);if(_&&!A&&so(C)=="wrapper")var A=new en([],!0)}for(d=A?d:u;++d<u;){C=s[d];var I=so(C),D=I=="wrapper"?xl(C):n;D&&kl(D[0])&&D[1]==(E|L|k|M)&&!D[4].length&&D[9]==1?A=A[so(D[0])].apply(A,D[3]):A=C.length==1&&kl(C)?A[I]():A.thru(C)}return function(){var j=arguments,X=j[0];if(A&&j.length==1&&Ce(X))return A.plant(X).value();for(var Y=0,ne=u?s[Y].apply(this,j):X;++Y<u;)ne=s[Y].call(this,ne);return ne}})}function to(i,s,u,d,_,C,A,I,D,j){var X=s&E,Y=s&b,ne=s&S,ae=s&(L|P),ge=s&U,Ae=ne?n:is(i);function me(){for(var Ie=arguments.length,Ve=z(Ie),Xt=Ie;Xt--;)Ve[Xt]=arguments[Xt];if(ae)var Mt=ir(me),Ht=Qv(Ve,Mt);if(d&&(Ve=Ed(Ve,d,_,ae)),C&&(Ve=kd(Ve,C,A,ae)),Ie-=Ht,ae&&Ie<j){var at=ii(Ve,Mt);return Rd(i,s,to,me.placeholder,u,Ve,at,I,D,j-Ie)}var hn=Y?u:this,Un=ne?hn[i]:i;return Ie=Ve.length,I?Ve=ay(Ve,I):ge&&Ie>1&&Ve.reverse(),X&&D<Ie&&(Ve.length=D),this&&this!==xt&&this instanceof me&&(Un=Ae||is(Un)),Un.apply(hn,Ve)}return me}function Id(i,s){return function(u,d){return mp(u,i,s(d),{})}}function no(i,s){return function(u,d){var _;if(u===n&&d===n)return s;if(u!==n&&(_=u),d!==n){if(_===n)return d;typeof u=="string"||typeof d=="string"?(u=$t(u),d=$t(d)):(u=_d(u),d=_d(d)),_=i(u,d)}return _}}function pl(i){return Dn(function(s){return s=Ke(s,zt(de())),Fe(function(u){var d=this;return i(s,function(_){return Wt(_,d,u)})})})}function io(i,s){s=s===n?" ":$t(s);var u=s.length;if(u<2)return u?fl(s,i):s;var d=fl(s,zs(i/Ki(s)));return qi(s)?li(cn(d),0,i).join(""):d.slice(0,i)}function Wp(i,s,u,d){var _=s&b,C=is(i);function A(){for(var I=-1,D=arguments.length,j=-1,X=d.length,Y=z(X+D),ne=this&&this!==xt&&this instanceof A?C:i;++j<X;)Y[j]=d[j];for(;D--;)Y[j++]=arguments[++I];return Wt(ne,_?u:this,Y)}return A}function Md(i){return function(s,u,d){return d&&typeof d!="number"&&It(s,u,d)&&(u=d=n),s=Nn(s),u===n?(u=s,s=0):u=Nn(u),d=d===n?s<u?1:-1:Nn(d),Tp(s,u,d,i)}}function ro(i){return function(s,u){return typeof s=="string"&&typeof u=="string"||(s=sn(s),u=sn(u)),i(s,u)}}function Rd(i,s,u,d,_,C,A,I,D,j){var X=s&L,Y=X?A:n,ne=X?n:A,ae=X?C:n,ge=X?n:C;s|=X?k:V,s&=~(X?V:k),s&T||(s&=-4);var Ae=[i,s,_,ae,Y,ge,ne,I,D,j],me=u.apply(n,Ae);return kl(i)&&Xd(me,Ae),me.placeholder=d,Hd(me,i,s)}function yl(i){var s=gt[i];return function(u,d){if(u=sn(u),d=d==null?0:kt(Te(d),292),d&&Hf(u)){var _=(Ue(u)+"e").split("e"),C=s(_[0]+"e"+(+_[1]+d));return _=(Ue(C)+"e").split("e"),+(_[0]+"e"+(+_[1]-d))}return s(u)}}var zp=Ji&&1/Ms(new Ji([,-0]))[1]==ye?function(i){return new Ji(i)}:Ul;function Od(i){return function(s){var u=Tt(s);return u==Ut?Ka(s):u==Et?o_(s):Jv(s,i(s))}}function Vn(i,s,u,d,_,C,A,I){var D=s&S;if(!D&&typeof i!="function")throw new Qt(l);var j=d?d.length:0;if(j||(s&=-97,d=_=n),A=A===n?A:mt(Te(A),0),I=I===n?I:Te(I),j-=_?_.length:0,s&V){var X=d,Y=_;d=_=n}var ne=D?n:xl(i),ae=[i,s,u,d,_,X,Y,C,A,I];if(ne&&ry(ae,ne),i=ae[0],s=ae[1],u=ae[2],d=ae[3],_=ae[4],I=ae[9]=ae[9]===n?D?0:i.length:mt(ae[9]-j,0),!I&&s&(L|P)&&(s&=-25),!s||s==b)var ge=Np(i,s,u);else s==L||s==P?ge=Up(i,s,I):(s==k||s==(b|k))&&!_.length?ge=Wp(i,s,u,d):ge=to.apply(n,ae);var Ae=ne?md:Xd;return Hd(Ae(ge,ae),i,s)}function Vd(i,s,u,d){return i===n||dn(i,Zi[u])&&!We.call(d,u)?s:i}function Dd(i,s,u,d,_,C){return Je(i)&&Je(s)&&(C.set(s,i),Zs(i,s,n,Dd,C),C.delete(s)),i}function $p(i){return os(i)?n:i}function Gd(i,s,u,d,_,C){var A=u&y,I=i.length,D=s.length;if(I!=D&&!(A&&D>I))return!1;var j=C.get(i),X=C.get(s);if(j&&X)return j==s&&X==i;var Y=-1,ne=!0,ae=u&x?new Pi:n;for(C.set(i,s),C.set(s,i);++Y<I;){var ge=i[Y],Ae=s[Y];if(d)var me=A?d(Ae,ge,Y,s,i,C):d(ge,Ae,Y,i,s,C);if(me!==n){if(me)continue;ne=!1;break}if(ae){if(!za(s,function(Ie,Ve){if(!Xr(ae,Ve)&&(ge===Ie||_(ge,Ie,u,d,C)))return ae.push(Ve)})){ne=!1;break}}else if(!(ge===Ae||_(ge,Ae,u,d,C))){ne=!1;break}}return C.delete(i),C.delete(s),ne}function jp(i,s,u,d,_,C,A){switch(u){case ji:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case jr:return!(i.byteLength!=s.byteLength||!C(new Bs(i),new Bs(s)));case $e:case be:case Ot:return dn(+i,+s);case st:return i.name==s.name&&i.message==s.message;case In:case Si:return i==s+"";case Ut:var I=Ka;case Et:var D=d&y;if(I||(I=Ms),i.size!=s.size&&!D)return!1;var j=A.get(i);if(j)return j==s;d|=x,A.set(i,s);var X=Gd(I(i),I(s),d,_,C,A);return A.delete(i),X;case wt:if(Zr)return Zr.call(i)==Zr.call(s)}return!1}function Xp(i,s,u,d,_,C){var A=u&y,I=bl(i),D=I.length,j=bl(s),X=j.length;if(D!=X&&!A)return!1;for(var Y=D;Y--;){var ne=I[Y];if(!(A?ne in s:We.call(s,ne)))return!1}var ae=C.get(i),ge=C.get(s);if(ae&&ge)return ae==s&&ge==i;var Ae=!0;C.set(i,s),C.set(s,i);for(var me=A;++Y<D;){ne=I[Y];var Ie=i[ne],Ve=s[ne];if(d)var Xt=A?d(Ve,Ie,ne,s,i,C):d(Ie,Ve,ne,i,s,C);if(!(Xt===n?Ie===Ve||_(Ie,Ve,u,d,C):Xt)){Ae=!1;break}me||(me=ne=="constructor")}if(Ae&&!me){var Mt=i.constructor,Ht=s.constructor;Mt!=Ht&&"constructor"in i&&"constructor"in s&&!(typeof Mt=="function"&&Mt instanceof Mt&&typeof Ht=="function"&&Ht instanceof Ht)&&(Ae=!1)}return C.delete(i),C.delete(s),Ae}function Dn(i){return Pl($d(i,n,Qd),i+"")}function bl(i){return rd(i,yt,Sl)}function wl(i){return rd(i,Bt,Bd)}var xl=js?function(i){return js.get(i)}:Ul;function so(i){for(var s=i.name+"",u=Qi[s],d=We.call(Qi,s)?u.length:0;d--;){var _=u[d],C=_.func;if(C==null||C==i)return _.name}return s}function ir(i){var s=We.call(w,"placeholder")?w:i;return s.placeholder}function de(){var i=w.iteratee||Bl;return i=i===Bl?ad:i,arguments.length?i(arguments[0],arguments[1]):i}function oo(i,s){var u=i.__data__;return ey(s)?u[typeof s=="string"?"string":"hash"]:u.map}function Cl(i){for(var s=yt(i),u=s.length;u--;){var d=s[u],_=i[d];s[u]=[d,_,Wd(_)]}return s}function Li(i,s){var u=i_(i,s);return od(u)?u:n}function Hp(i){var s=We.call(i,ki),u=i[ki];try{i[ki]=n;var d=!0}catch{}var _=Ds.call(i);return d&&(s?i[ki]=u:delete i[ki]),_}var Sl=Za?function(i){return i==null?[]:(i=ze(i),ti(Za(i),function(s){return jf.call(i,s)}))}:Wl,Bd=Za?function(i){for(var s=[];i;)ni(s,Sl(i)),i=Ns(i);return s}:Wl,Tt=Lt;(Ja&&Tt(new Ja(new ArrayBuffer(1)))!=ji||qr&&Tt(new qr)!=Ut||Qa&&Tt(Qa.resolve())!=Ci||Ji&&Tt(new Ji)!=Et||Kr&&Tt(new Kr)!=$r)&&(Tt=function(i){var s=Lt(i),u=s==Vt?i.constructor:n,d=u?Ii(u):"";if(d)switch(d){case A_:return ji;case F_:return Ut;case L_:return Ci;case I_:return Et;case M_:return $r}return s});function qp(i,s,u){for(var d=-1,_=u.length;++d<_;){var C=u[d],A=C.size;switch(C.type){case"drop":i+=A;break;case"dropRight":s-=A;break;case"take":s=kt(s,i+A);break;case"takeRight":i=mt(i,s-A);break}}return{start:i,end:s}}function Kp(i){var s=i.match(tv);return s?s[1].split(nv):[]}function Nd(i,s,u){s=ai(s,i);for(var d=-1,_=s.length,C=!1;++d<_;){var A=En(s[d]);if(!(C=i!=null&&u(i,A)))break;i=i[A]}return C||++d!=_?C:(_=i==null?0:i.length,!!_&&go(_)&&Gn(A,_)&&(Ce(i)||Mi(i)))}function Yp(i){var s=i.length,u=new i.constructor(s);return s&&typeof i[0]=="string"&&We.call(i,"index")&&(u.index=i.index,u.input=i.input),u}function Ud(i){return typeof i.constructor=="function"&&!rs(i)?er(Ns(i)):{}}function Zp(i,s,u){var d=i.constructor;switch(s){case jr:return _l(i);case $e:case be:return new d(+i);case ji:return Rp(i,u);case Ca:case Sa:case Ea:case ka:case Ta:case Pa:case Aa:case Fa:case La:return Cd(i,u);case Ut:return new d;case Ot:case Si:return new d(i);case In:return Op(i);case Et:return new d;case wt:return Vp(i)}}function Jp(i,s){var u=s.length;if(!u)return i;var d=u-1;return s[d]=(u>1?"& ":"")+s[d],s=s.join(u>2?", ":" "),i.replace(ev,`{
/* [wrapped with `+s+`] */
`)}function Qp(i){return Ce(i)||Mi(i)||!!(Xf&&i&&i[Xf])}function Gn(i,s){var u=typeof i;return s=s??ce,!!s&&(u=="number"||u!="symbol"&&fv.test(i))&&i>-1&&i%1==0&&i<s}function It(i,s,u){if(!Je(u))return!1;var d=typeof s;return(d=="number"?Gt(u)&&Gn(s,u.length):d=="string"&&s in u)?dn(u[s],i):!1}function El(i,s){if(Ce(i))return!1;var u=typeof i;return u=="number"||u=="symbol"||u=="boolean"||i==null||jt(i)?!0:Y0.test(i)||!K0.test(i)||s!=null&&i in ze(s)}function ey(i){var s=typeof i;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?i!=="__proto__":i===null}function kl(i){var s=so(i),u=w[s];if(typeof u!="function"||!(s in Re.prototype))return!1;if(i===u)return!0;var d=xl(u);return!!d&&i===d[0]}function ty(i){return!!Wf&&Wf in i}var ny=Os?Bn:zl;function rs(i){var s=i&&i.constructor,u=typeof s=="function"&&s.prototype||Zi;return i===u}function Wd(i){return i===i&&!Je(i)}function zd(i,s){return function(u){return u==null?!1:u[i]===s&&(s!==n||i in ze(u))}}function iy(i){var s=fo(i,function(d){return u.size===g&&u.clear(),d}),u=s.cache;return s}function ry(i,s){var u=i[1],d=s[1],_=u|d,C=_<(b|S|E),A=d==E&&u==L||d==E&&u==M&&i[7].length<=s[8]||d==(E|M)&&s[7].length<=s[8]&&u==L;if(!(C||A))return i;d&b&&(i[2]=s[2],_|=u&b?0:T);var I=s[3];if(I){var D=i[3];i[3]=D?Ed(D,I,s[4]):I,i[4]=D?ii(i[3],h):s[4]}return I=s[5],I&&(D=i[5],i[5]=D?kd(D,I,s[6]):I,i[6]=D?ii(i[5],h):s[6]),I=s[7],I&&(i[7]=I),d&E&&(i[8]=i[8]==null?s[8]:kt(i[8],s[8])),i[9]==null&&(i[9]=s[9]),i[0]=s[0],i[1]=_,i}function sy(i){var s=[];if(i!=null)for(var u in ze(i))s.push(u);return s}function oy(i){return Ds.call(i)}function $d(i,s,u){return s=mt(s===n?i.length-1:s,0),function(){for(var d=arguments,_=-1,C=mt(d.length-s,0),A=z(C);++_<C;)A[_]=d[s+_];_=-1;for(var I=z(s+1);++_<s;)I[_]=d[_];return I[s]=u(A),Wt(i,this,I)}}function jd(i,s){return s.length<2?i:Fi(i,nn(s,0,-1))}function ay(i,s){for(var u=i.length,d=kt(s.length,u),_=Dt(i);d--;){var C=s[d];i[d]=Gn(C,u)?_[C]:n}return i}function Tl(i,s){if(!(s==="constructor"&&typeof i[s]=="function")&&s!="__proto__")return i[s]}var Xd=qd(md),ss=x_||function(i,s){return xt.setTimeout(i,s)},Pl=qd(Fp);function Hd(i,s,u){var d=s+"";return Pl(i,Jp(d,ly(Kp(d),u)))}function qd(i){var s=0,u=0;return function(){var d=k_(),_=W-(d-u);if(u=d,_>0){if(++s>=K)return arguments[0]}else s=0;return i.apply(n,arguments)}}function ao(i,s){var u=-1,d=i.length,_=d-1;for(s=s===n?d:s;++u<s;){var C=cl(u,_),A=i[C];i[C]=i[u],i[u]=A}return i.length=s,i}var Kd=iy(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(Z0,function(u,d,_,C){s.push(_?C.replace(sv,"$1"):d||u)}),s});function En(i){if(typeof i=="string"||jt(i))return i;var s=i+"";return s=="0"&&1/i==-1/0?"-0":s}function Ii(i){if(i!=null){try{return Vs.call(i)}catch{}try{return i+""}catch{}}return""}function ly(i,s){return Jt(Be,function(u){var d="_."+u[0];s&u[1]&&!Ls(i,d)&&i.push(d)}),i.sort()}function Yd(i){if(i instanceof Re)return i.clone();var s=new en(i.__wrapped__,i.__chain__);return s.__actions__=Dt(i.__actions__),s.__index__=i.__index__,s.__values__=i.__values__,s}function uy(i,s,u){(u?It(i,s,u):s===n)?s=1:s=mt(Te(s),0);var d=i==null?0:i.length;if(!d||s<1)return[];for(var _=0,C=0,A=z(zs(d/s));_<d;)A[C++]=nn(i,_,_+=s);return A}function cy(i){for(var s=-1,u=i==null?0:i.length,d=0,_=[];++s<u;){var C=i[s];C&&(_[d++]=C)}return _}function fy(){var i=arguments.length;if(!i)return[];for(var s=z(i-1),u=arguments[0],d=i;d--;)s[d-1]=arguments[d];return ni(Ce(u)?Dt(u):[u],Ct(s,1))}var dy=Fe(function(i,s){return ot(i)?Qr(i,Ct(s,1,ot,!0)):[]}),hy=Fe(function(i,s){var u=rn(s);return ot(u)&&(u=n),ot(i)?Qr(i,Ct(s,1,ot,!0),de(u,2)):[]}),gy=Fe(function(i,s){var u=rn(s);return ot(u)&&(u=n),ot(i)?Qr(i,Ct(s,1,ot,!0),n,u):[]});function my(i,s,u){var d=i==null?0:i.length;return d?(s=u||s===n?1:Te(s),nn(i,s<0?0:s,d)):[]}function vy(i,s,u){var d=i==null?0:i.length;return d?(s=u||s===n?1:Te(s),s=d-s,nn(i,0,s<0?0:s)):[]}function _y(i,s){return i&&i.length?Qs(i,de(s,3),!0,!0):[]}function py(i,s){return i&&i.length?Qs(i,de(s,3),!0):[]}function yy(i,s,u,d){var _=i==null?0:i.length;return _?(u&&typeof u!="number"&&It(i,s,u)&&(u=0,d=_),fp(i,s,u,d)):[]}function Zd(i,s,u){var d=i==null?0:i.length;if(!d)return-1;var _=u==null?0:Te(u);return _<0&&(_=mt(d+_,0)),Is(i,de(s,3),_)}function Jd(i,s,u){var d=i==null?0:i.length;if(!d)return-1;var _=d-1;return u!==n&&(_=Te(u),_=u<0?mt(d+_,0):kt(_,d-1)),Is(i,de(s,3),_,!0)}function Qd(i){var s=i==null?0:i.length;return s?Ct(i,1):[]}function by(i){var s=i==null?0:i.length;return s?Ct(i,ye):[]}function wy(i,s){var u=i==null?0:i.length;return u?(s=s===n?1:Te(s),Ct(i,s)):[]}function xy(i){for(var s=-1,u=i==null?0:i.length,d={};++s<u;){var _=i[s];d[_[0]]=_[1]}return d}function eh(i){return i&&i.length?i[0]:n}function Cy(i,s,u){var d=i==null?0:i.length;if(!d)return-1;var _=u==null?0:Te(u);return _<0&&(_=mt(d+_,0)),Hi(i,s,_)}function Sy(i){var s=i==null?0:i.length;return s?nn(i,0,-1):[]}var Ey=Fe(function(i){var s=Ke(i,ml);return s.length&&s[0]===i[0]?sl(s):[]}),ky=Fe(function(i){var s=rn(i),u=Ke(i,ml);return s===rn(u)?s=n:u.pop(),u.length&&u[0]===i[0]?sl(u,de(s,2)):[]}),Ty=Fe(function(i){var s=rn(i),u=Ke(i,ml);return s=typeof s=="function"?s:n,s&&u.pop(),u.length&&u[0]===i[0]?sl(u,n,s):[]});function Py(i,s){return i==null?"":S_.call(i,s)}function rn(i){var s=i==null?0:i.length;return s?i[s-1]:n}function Ay(i,s,u){var d=i==null?0:i.length;if(!d)return-1;var _=d;return u!==n&&(_=Te(u),_=_<0?mt(d+_,0):kt(_,d-1)),s===s?l_(i,s,_):Is(i,Rf,_,!0)}function Fy(i,s){return i&&i.length?fd(i,Te(s)):n}var Ly=Fe(th);function th(i,s){return i&&i.length&&s&&s.length?ul(i,s):i}function Iy(i,s,u){return i&&i.length&&s&&s.length?ul(i,s,de(u,2)):i}function My(i,s,u){return i&&i.length&&s&&s.length?ul(i,s,n,u):i}var Ry=Dn(function(i,s){var u=i==null?0:i.length,d=tl(i,s);return gd(i,Ke(s,function(_){return Gn(_,u)?+_:_}).sort(Sd)),d});function Oy(i,s){var u=[];if(!(i&&i.length))return u;var d=-1,_=[],C=i.length;for(s=de(s,3);++d<C;){var A=i[d];s(A,d,i)&&(u.push(A),_.push(d))}return gd(i,_),u}function Al(i){return i==null?i:P_.call(i)}function Vy(i,s,u){var d=i==null?0:i.length;return d?(u&&typeof u!="number"&&It(i,s,u)?(s=0,u=d):(s=s==null?0:Te(s),u=u===n?d:Te(u)),nn(i,s,u)):[]}function Dy(i,s){return Js(i,s)}function Gy(i,s,u){return dl(i,s,de(u,2))}function By(i,s){var u=i==null?0:i.length;if(u){var d=Js(i,s);if(d<u&&dn(i[d],s))return d}return-1}function Ny(i,s){return Js(i,s,!0)}function Uy(i,s,u){return dl(i,s,de(u,2),!0)}function Wy(i,s){var u=i==null?0:i.length;if(u){var d=Js(i,s,!0)-1;if(dn(i[d],s))return d}return-1}function zy(i){return i&&i.length?vd(i):[]}function $y(i,s){return i&&i.length?vd(i,de(s,2)):[]}function jy(i){var s=i==null?0:i.length;return s?nn(i,1,s):[]}function Xy(i,s,u){return i&&i.length?(s=u||s===n?1:Te(s),nn(i,0,s<0?0:s)):[]}function Hy(i,s,u){var d=i==null?0:i.length;return d?(s=u||s===n?1:Te(s),s=d-s,nn(i,s<0?0:s,d)):[]}function qy(i,s){return i&&i.length?Qs(i,de(s,3),!1,!0):[]}function Ky(i,s){return i&&i.length?Qs(i,de(s,3)):[]}var Yy=Fe(function(i){return oi(Ct(i,1,ot,!0))}),Zy=Fe(function(i){var s=rn(i);return ot(s)&&(s=n),oi(Ct(i,1,ot,!0),de(s,2))}),Jy=Fe(function(i){var s=rn(i);return s=typeof s=="function"?s:n,oi(Ct(i,1,ot,!0),n,s)});function Qy(i){return i&&i.length?oi(i):[]}function e1(i,s){return i&&i.length?oi(i,de(s,2)):[]}function t1(i,s){return s=typeof s=="function"?s:n,i&&i.length?oi(i,n,s):[]}function Fl(i){if(!(i&&i.length))return[];var s=0;return i=ti(i,function(u){if(ot(u))return s=mt(u.length,s),!0}),Ha(s,function(u){return Ke(i,$a(u))})}function nh(i,s){if(!(i&&i.length))return[];var u=Fl(i);return s==null?u:Ke(u,function(d){return Wt(s,n,d)})}var n1=Fe(function(i,s){return ot(i)?Qr(i,s):[]}),i1=Fe(function(i){return gl(ti(i,ot))}),r1=Fe(function(i){var s=rn(i);return ot(s)&&(s=n),gl(ti(i,ot),de(s,2))}),s1=Fe(function(i){var s=rn(i);return s=typeof s=="function"?s:n,gl(ti(i,ot),n,s)}),o1=Fe(Fl);function a1(i,s){return bd(i||[],s||[],Jr)}function l1(i,s){return bd(i||[],s||[],ns)}var u1=Fe(function(i){var s=i.length,u=s>1?i[s-1]:n;return u=typeof u=="function"?(i.pop(),u):n,nh(i,u)});function ih(i){var s=w(i);return s.__chain__=!0,s}function c1(i,s){return s(i),i}function lo(i,s){return s(i)}var f1=Dn(function(i){var s=i.length,u=s?i[0]:0,d=this.__wrapped__,_=function(C){return tl(C,i)};return s>1||this.__actions__.length||!(d instanceof Re)||!Gn(u)?this.thru(_):(d=d.slice(u,+u+(s?1:0)),d.__actions__.push({func:lo,args:[_],thisArg:n}),new en(d,this.__chain__).thru(function(C){return s&&!C.length&&C.push(n),C}))});function d1(){return ih(this)}function h1(){return new en(this.value(),this.__chain__)}function g1(){this.__values__===n&&(this.__values__=_h(this.value()));var i=this.__index__>=this.__values__.length,s=i?n:this.__values__[this.__index__++];return{done:i,value:s}}function m1(){return this}function v1(i){for(var s,u=this;u instanceof Hs;){var d=Yd(u);d.__index__=0,d.__values__=n,s?_.__wrapped__=d:s=d;var _=d;u=u.__wrapped__}return _.__wrapped__=i,s}function _1(){var i=this.__wrapped__;if(i instanceof Re){var s=i;return this.__actions__.length&&(s=new Re(this)),s=s.reverse(),s.__actions__.push({func:lo,args:[Al],thisArg:n}),new en(s,this.__chain__)}return this.thru(Al)}function p1(){return yd(this.__wrapped__,this.__actions__)}var y1=eo(function(i,s,u){We.call(i,u)?++i[u]:On(i,u,1)});function b1(i,s,u){var d=Ce(i)?If:cp;return u&&It(i,s,u)&&(s=n),d(i,de(s,3))}function w1(i,s){var u=Ce(i)?ti:nd;return u(i,de(s,3))}var x1=Fd(Zd),C1=Fd(Jd);function S1(i,s){return Ct(uo(i,s),1)}function E1(i,s){return Ct(uo(i,s),ye)}function k1(i,s,u){return u=u===n?1:Te(u),Ct(uo(i,s),u)}function rh(i,s){var u=Ce(i)?Jt:si;return u(i,de(s,3))}function sh(i,s){var u=Ce(i)?jv:td;return u(i,de(s,3))}var T1=eo(function(i,s,u){We.call(i,u)?i[u].push(s):On(i,u,[s])});function P1(i,s,u,d){i=Gt(i)?i:sr(i),u=u&&!d?Te(u):0;var _=i.length;return u<0&&(u=mt(_+u,0)),mo(i)?u<=_&&i.indexOf(s,u)>-1:!!_&&Hi(i,s,u)>-1}var A1=Fe(function(i,s,u){var d=-1,_=typeof s=="function",C=Gt(i)?z(i.length):[];return si(i,function(A){C[++d]=_?Wt(s,A,u):es(A,s,u)}),C}),F1=eo(function(i,s,u){On(i,u,s)});function uo(i,s){var u=Ce(i)?Ke:ld;return u(i,de(s,3))}function L1(i,s,u,d){return i==null?[]:(Ce(s)||(s=s==null?[]:[s]),u=d?n:u,Ce(u)||(u=u==null?[]:[u]),dd(i,s,u))}var I1=eo(function(i,s,u){i[u?0:1].push(s)},function(){return[[],[]]});function M1(i,s,u){var d=Ce(i)?Wa:Vf,_=arguments.length<3;return d(i,de(s,4),u,_,si)}function R1(i,s,u){var d=Ce(i)?Xv:Vf,_=arguments.length<3;return d(i,de(s,4),u,_,td)}function O1(i,s){var u=Ce(i)?ti:nd;return u(i,ho(de(s,3)))}function V1(i){var s=Ce(i)?Zf:Pp;return s(i)}function D1(i,s,u){(u?It(i,s,u):s===n)?s=1:s=Te(s);var d=Ce(i)?sp:Ap;return d(i,s)}function G1(i){var s=Ce(i)?op:Lp;return s(i)}function B1(i){if(i==null)return 0;if(Gt(i))return mo(i)?Ki(i):i.length;var s=Tt(i);return s==Ut||s==Et?i.size:al(i).length}function N1(i,s,u){var d=Ce(i)?za:Ip;return u&&It(i,s,u)&&(s=n),d(i,de(s,3))}var U1=Fe(function(i,s){if(i==null)return[];var u=s.length;return u>1&&It(i,s[0],s[1])?s=[]:u>2&&It(s[0],s[1],s[2])&&(s=[s[0]]),dd(i,Ct(s,1),[])}),co=w_||function(){return xt.Date.now()};function W1(i,s){if(typeof s!="function")throw new Qt(l);return i=Te(i),function(){if(--i<1)return s.apply(this,arguments)}}function oh(i,s,u){return s=u?n:s,s=i&&s==null?i.length:s,Vn(i,E,n,n,n,n,s)}function ah(i,s){var u;if(typeof s!="function")throw new Qt(l);return i=Te(i),function(){return--i>0&&(u=s.apply(this,arguments)),i<=1&&(s=n),u}}var Ll=Fe(function(i,s,u){var d=b;if(u.length){var _=ii(u,ir(Ll));d|=k}return Vn(i,d,s,u,_)}),lh=Fe(function(i,s,u){var d=b|S;if(u.length){var _=ii(u,ir(lh));d|=k}return Vn(s,d,i,u,_)});function uh(i,s,u){s=u?n:s;var d=Vn(i,L,n,n,n,n,n,s);return d.placeholder=uh.placeholder,d}function ch(i,s,u){s=u?n:s;var d=Vn(i,P,n,n,n,n,n,s);return d.placeholder=ch.placeholder,d}function fh(i,s,u){var d,_,C,A,I,D,j=0,X=!1,Y=!1,ne=!0;if(typeof i!="function")throw new Qt(l);s=sn(s)||0,Je(u)&&(X=!!u.leading,Y="maxWait"in u,C=Y?mt(sn(u.maxWait)||0,s):C,ne="trailing"in u?!!u.trailing:ne);function ae(at){var hn=d,Un=_;return d=_=n,j=at,A=i.apply(Un,hn),A}function ge(at){return j=at,I=ss(Ie,s),X?ae(at):A}function Ae(at){var hn=at-D,Un=at-j,Fh=s-hn;return Y?kt(Fh,C-Un):Fh}function me(at){var hn=at-D,Un=at-j;return D===n||hn>=s||hn<0||Y&&Un>=C}function Ie(){var at=co();if(me(at))return Ve(at);I=ss(Ie,Ae(at))}function Ve(at){return I=n,ne&&d?ae(at):(d=_=n,A)}function Xt(){I!==n&&wd(I),j=0,d=D=_=I=n}function Mt(){return I===n?A:Ve(co())}function Ht(){var at=co(),hn=me(at);if(d=arguments,_=this,D=at,hn){if(I===n)return ge(D);if(Y)return wd(I),I=ss(Ie,s),ae(D)}return I===n&&(I=ss(Ie,s)),A}return Ht.cancel=Xt,Ht.flush=Mt,Ht}var z1=Fe(function(i,s){return ed(i,1,s)}),$1=Fe(function(i,s,u){return ed(i,sn(s)||0,u)});function j1(i){return Vn(i,U)}function fo(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new Qt(l);var u=function(){var d=arguments,_=s?s.apply(this,d):d[0],C=u.cache;if(C.has(_))return C.get(_);var A=i.apply(this,d);return u.cache=C.set(_,A)||C,A};return u.cache=new(fo.Cache||Rn),u}fo.Cache=Rn;function ho(i){if(typeof i!="function")throw new Qt(l);return function(){var s=arguments;switch(s.length){case 0:return!i.call(this);case 1:return!i.call(this,s[0]);case 2:return!i.call(this,s[0],s[1]);case 3:return!i.call(this,s[0],s[1],s[2])}return!i.apply(this,s)}}function X1(i){return ah(2,i)}var H1=Mp(function(i,s){s=s.length==1&&Ce(s[0])?Ke(s[0],zt(de())):Ke(Ct(s,1),zt(de()));var u=s.length;return Fe(function(d){for(var _=-1,C=kt(d.length,u);++_<C;)d[_]=s[_].call(this,d[_]);return Wt(i,this,d)})}),Il=Fe(function(i,s){var u=ii(s,ir(Il));return Vn(i,k,n,s,u)}),dh=Fe(function(i,s){var u=ii(s,ir(dh));return Vn(i,V,n,s,u)}),q1=Dn(function(i,s){return Vn(i,M,n,n,n,s)});function K1(i,s){if(typeof i!="function")throw new Qt(l);return s=s===n?s:Te(s),Fe(i,s)}function Y1(i,s){if(typeof i!="function")throw new Qt(l);return s=s==null?0:mt(Te(s),0),Fe(function(u){var d=u[s],_=li(u,0,s);return d&&ni(_,d),Wt(i,this,_)})}function Z1(i,s,u){var d=!0,_=!0;if(typeof i!="function")throw new Qt(l);return Je(u)&&(d="leading"in u?!!u.leading:d,_="trailing"in u?!!u.trailing:_),fh(i,s,{leading:d,maxWait:s,trailing:_})}function J1(i){return oh(i,1)}function Q1(i,s){return Il(vl(s),i)}function eb(){if(!arguments.length)return[];var i=arguments[0];return Ce(i)?i:[i]}function tb(i){return tn(i,p)}function nb(i,s){return s=typeof s=="function"?s:n,tn(i,p,s)}function ib(i){return tn(i,m|p)}function rb(i,s){return s=typeof s=="function"?s:n,tn(i,m|p,s)}function sb(i,s){return s==null||Qf(i,s,yt(s))}function dn(i,s){return i===s||i!==i&&s!==s}var ob=ro(rl),ab=ro(function(i,s){return i>=s}),Mi=sd(function(){return arguments}())?sd:function(i){return it(i)&&We.call(i,"callee")&&!jf.call(i,"callee")},Ce=z.isArray,lb=kf?zt(kf):vp;function Gt(i){return i!=null&&go(i.length)&&!Bn(i)}function ot(i){return it(i)&&Gt(i)}function ub(i){return i===!0||i===!1||it(i)&&Lt(i)==$e}var ui=C_||zl,cb=Tf?zt(Tf):_p;function fb(i){return it(i)&&i.nodeType===1&&!os(i)}function db(i){if(i==null)return!0;if(Gt(i)&&(Ce(i)||typeof i=="string"||typeof i.splice=="function"||ui(i)||rr(i)||Mi(i)))return!i.length;var s=Tt(i);if(s==Ut||s==Et)return!i.size;if(rs(i))return!al(i).length;for(var u in i)if(We.call(i,u))return!1;return!0}function hb(i,s){return ts(i,s)}function gb(i,s,u){u=typeof u=="function"?u:n;var d=u?u(i,s):n;return d===n?ts(i,s,n,u):!!d}function Ml(i){if(!it(i))return!1;var s=Lt(i);return s==st||s==Ze||typeof i.message=="string"&&typeof i.name=="string"&&!os(i)}function mb(i){return typeof i=="number"&&Hf(i)}function Bn(i){if(!Je(i))return!1;var s=Lt(i);return s==$i||s==zr||s==De||s==Ts}function hh(i){return typeof i=="number"&&i==Te(i)}function go(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=ce}function Je(i){var s=typeof i;return i!=null&&(s=="object"||s=="function")}function it(i){return i!=null&&typeof i=="object"}var gh=Pf?zt(Pf):yp;function vb(i,s){return i===s||ol(i,s,Cl(s))}function _b(i,s,u){return u=typeof u=="function"?u:n,ol(i,s,Cl(s),u)}function pb(i){return mh(i)&&i!=+i}function yb(i){if(ny(i))throw new xe(a);return od(i)}function bb(i){return i===null}function wb(i){return i==null}function mh(i){return typeof i=="number"||it(i)&&Lt(i)==Ot}function os(i){if(!it(i)||Lt(i)!=Vt)return!1;var s=Ns(i);if(s===null)return!0;var u=We.call(s,"constructor")&&s.constructor;return typeof u=="function"&&u instanceof u&&Vs.call(u)==__}var Rl=Af?zt(Af):bp;function xb(i){return hh(i)&&i>=-9007199254740991&&i<=ce}var vh=Ff?zt(Ff):wp;function mo(i){return typeof i=="string"||!Ce(i)&&it(i)&&Lt(i)==Si}function jt(i){return typeof i=="symbol"||it(i)&&Lt(i)==wt}var rr=Lf?zt(Lf):xp;function Cb(i){return i===n}function Sb(i){return it(i)&&Tt(i)==$r}function Eb(i){return it(i)&&Lt(i)==U0}var kb=ro(ll),Tb=ro(function(i,s){return i<=s});function _h(i){if(!i)return[];if(Gt(i))return mo(i)?cn(i):Dt(i);if(Hr&&i[Hr])return s_(i[Hr]());var s=Tt(i),u=s==Ut?Ka:s==Et?Ms:sr;return u(i)}function Nn(i){if(!i)return i===0?i:0;if(i=sn(i),i===ye||i===-1/0){var s=i<0?-1:1;return s*pe}return i===i?i:0}function Te(i){var s=Nn(i),u=s%1;return s===s?u?s-u:s:0}function ph(i){return i?Ai(Te(i),0,R):0}function sn(i){if(typeof i=="number")return i;if(jt(i))return G;if(Je(i)){var s=typeof i.valueOf=="function"?i.valueOf():i;i=Je(s)?s+"":s}if(typeof i!="string")return i===0?i:+i;i=Df(i);var u=lv.test(i);return u||cv.test(i)?Wv(i.slice(2),u?2:8):av.test(i)?G:+i}function yh(i){return Sn(i,Bt(i))}function Pb(i){return i?Ai(Te(i),-9007199254740991,ce):i===0?i:0}function Ue(i){return i==null?"":$t(i)}var Ab=tr(function(i,s){if(rs(s)||Gt(s)){Sn(s,yt(s),i);return}for(var u in s)We.call(s,u)&&Jr(i,u,s[u])}),bh=tr(function(i,s){Sn(s,Bt(s),i)}),vo=tr(function(i,s,u,d){Sn(s,Bt(s),i,d)}),Fb=tr(function(i,s,u,d){Sn(s,yt(s),i,d)}),Lb=Dn(tl);function Ib(i,s){var u=er(i);return s==null?u:Jf(u,s)}var Mb=Fe(function(i,s){i=ze(i);var u=-1,d=s.length,_=d>2?s[2]:n;for(_&&It(s[0],s[1],_)&&(d=1);++u<d;)for(var C=s[u],A=Bt(C),I=-1,D=A.length;++I<D;){var j=A[I],X=i[j];(X===n||dn(X,Zi[j])&&!We.call(i,j))&&(i[j]=C[j])}return i}),Rb=Fe(function(i){return i.push(n,Dd),Wt(wh,n,i)});function Ob(i,s){return Mf(i,de(s,3),Cn)}function Vb(i,s){return Mf(i,de(s,3),il)}function Db(i,s){return i==null?i:nl(i,de(s,3),Bt)}function Gb(i,s){return i==null?i:id(i,de(s,3),Bt)}function Bb(i,s){return i&&Cn(i,de(s,3))}function Nb(i,s){return i&&il(i,de(s,3))}function Ub(i){return i==null?[]:Ys(i,yt(i))}function Wb(i){return i==null?[]:Ys(i,Bt(i))}function Ol(i,s,u){var d=i==null?n:Fi(i,s);return d===n?u:d}function zb(i,s){return i!=null&&Nd(i,s,dp)}function Vl(i,s){return i!=null&&Nd(i,s,hp)}var $b=Id(function(i,s,u){s!=null&&typeof s.toString!="function"&&(s=Ds.call(s)),i[s]=u},Gl(Nt)),jb=Id(function(i,s,u){s!=null&&typeof s.toString!="function"&&(s=Ds.call(s)),We.call(i,s)?i[s].push(u):i[s]=[u]},de),Xb=Fe(es);function yt(i){return Gt(i)?Yf(i):al(i)}function Bt(i){return Gt(i)?Yf(i,!0):Cp(i)}function Hb(i,s){var u={};return s=de(s,3),Cn(i,function(d,_,C){On(u,s(d,_,C),d)}),u}function qb(i,s){var u={};return s=de(s,3),Cn(i,function(d,_,C){On(u,_,s(d,_,C))}),u}var Kb=tr(function(i,s,u){Zs(i,s,u)}),wh=tr(function(i,s,u,d){Zs(i,s,u,d)}),Yb=Dn(function(i,s){var u={};if(i==null)return u;var d=!1;s=Ke(s,function(C){return C=ai(C,i),d||(d=C.length>1),C}),Sn(i,wl(i),u),d&&(u=tn(u,m|v|p,$p));for(var _=s.length;_--;)hl(u,s[_]);return u});function Zb(i,s){return xh(i,ho(de(s)))}var Jb=Dn(function(i,s){return i==null?{}:Ep(i,s)});function xh(i,s){if(i==null)return{};var u=Ke(wl(i),function(d){return[d]});return s=de(s),hd(i,u,function(d,_){return s(d,_[0])})}function Qb(i,s,u){s=ai(s,i);var d=-1,_=s.length;for(_||(_=1,i=n);++d<_;){var C=i==null?n:i[En(s[d])];C===n&&(d=_,C=u),i=Bn(C)?C.call(i):C}return i}function ew(i,s,u){return i==null?i:ns(i,s,u)}function tw(i,s,u,d){return d=typeof d=="function"?d:n,i==null?i:ns(i,s,u,d)}var Ch=Od(yt),Sh=Od(Bt);function nw(i,s,u){var d=Ce(i),_=d||ui(i)||rr(i);if(s=de(s,4),u==null){var C=i&&i.constructor;_?u=d?new C:[]:Je(i)?u=Bn(C)?er(Ns(i)):{}:u={}}return(_?Jt:Cn)(i,function(A,I,D){return s(u,A,I,D)}),u}function iw(i,s){return i==null?!0:hl(i,s)}function rw(i,s,u){return i==null?i:pd(i,s,vl(u))}function sw(i,s,u,d){return d=typeof d=="function"?d:n,i==null?i:pd(i,s,vl(u),d)}function sr(i){return i==null?[]:qa(i,yt(i))}function ow(i){return i==null?[]:qa(i,Bt(i))}function aw(i,s,u){return u===n&&(u=s,s=n),u!==n&&(u=sn(u),u=u===u?u:0),s!==n&&(s=sn(s),s=s===s?s:0),Ai(sn(i),s,u)}function lw(i,s,u){return s=Nn(s),u===n?(u=s,s=0):u=Nn(u),i=sn(i),gp(i,s,u)}function uw(i,s,u){if(u&&typeof u!="boolean"&&It(i,s,u)&&(s=u=n),u===n&&(typeof s=="boolean"?(u=s,s=n):typeof i=="boolean"&&(u=i,i=n)),i===n&&s===n?(i=0,s=1):(i=Nn(i),s===n?(s=i,i=0):s=Nn(s)),i>s){var d=i;i=s,s=d}if(u||i%1||s%1){var _=qf();return kt(i+_*(s-i+Uv("1e-"+((_+"").length-1))),s)}return cl(i,s)}var cw=nr(function(i,s,u){return s=s.toLowerCase(),i+(u?Eh(s):s)});function Eh(i){return Dl(Ue(i).toLowerCase())}function kh(i){return i=Ue(i),i&&i.replace(dv,e_).replace(Lv,"")}function fw(i,s,u){i=Ue(i),s=$t(s);var d=i.length;u=u===n?d:Ai(Te(u),0,d);var _=u;return u-=s.length,u>=0&&i.slice(u,_)==s}function dw(i){return i=Ue(i),i&&X0.test(i)?i.replace(nf,t_):i}function hw(i){return i=Ue(i),i&&J0.test(i)?i.replace(Ia,"\\$&"):i}var gw=nr(function(i,s,u){return i+(u?"-":"")+s.toLowerCase()}),mw=nr(function(i,s,u){return i+(u?" ":"")+s.toLowerCase()}),vw=Ad("toLowerCase");function _w(i,s,u){i=Ue(i),s=Te(s);var d=s?Ki(i):0;if(!s||d>=s)return i;var _=(s-d)/2;return io($s(_),u)+i+io(zs(_),u)}function pw(i,s,u){i=Ue(i),s=Te(s);var d=s?Ki(i):0;return s&&d<s?i+io(s-d,u):i}function yw(i,s,u){i=Ue(i),s=Te(s);var d=s?Ki(i):0;return s&&d<s?io(s-d,u)+i:i}function bw(i,s,u){return u||s==null?s=0:s&&(s=+s),T_(Ue(i).replace(Ma,""),s||0)}function ww(i,s,u){return(u?It(i,s,u):s===n)?s=1:s=Te(s),fl(Ue(i),s)}function xw(){var i=arguments,s=Ue(i[0]);return i.length<3?s:s.replace(i[1],i[2])}var Cw=nr(function(i,s,u){return i+(u?"_":"")+s.toLowerCase()});function Sw(i,s,u){return u&&typeof u!="number"&&It(i,s,u)&&(s=u=n),u=u===n?R:u>>>0,u?(i=Ue(i),i&&(typeof s=="string"||s!=null&&!Rl(s))&&(s=$t(s),!s&&qi(i))?li(cn(i),0,u):i.split(s,u)):[]}var Ew=nr(function(i,s,u){return i+(u?" ":"")+Dl(s)});function kw(i,s,u){return i=Ue(i),u=u==null?0:Ai(Te(u),0,i.length),s=$t(s),i.slice(u,u+s.length)==s}function Tw(i,s,u){var d=w.templateSettings;u&&It(i,s,u)&&(s=n),i=Ue(i),s=vo({},s,d,Vd);var _=vo({},s.imports,d.imports,Vd),C=yt(_),A=qa(_,C),I,D,j=0,X=s.interpolate||Ps,Y="__p += '",ne=Ya((s.escape||Ps).source+"|"+X.source+"|"+(X===rf?ov:Ps).source+"|"+(s.evaluate||Ps).source+"|$","g"),ae="//# sourceURL="+(We.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Vv+"]")+`
`;i.replace(ne,function(me,Ie,Ve,Xt,Mt,Ht){return Ve||(Ve=Xt),Y+=i.slice(j,Ht).replace(hv,n_),Ie&&(I=!0,Y+=`' +
__e(`+Ie+`) +
'`),Mt&&(D=!0,Y+=`';
`+Mt+`;
__p += '`),Ve&&(Y+=`' +
((__t = (`+Ve+`)) == null ? '' : __t) +
'`),j=Ht+me.length,me}),Y+=`';
`;var ge=We.call(s,"variable")&&s.variable;if(!ge)Y=`with (obj) {
`+Y+`
}
`;else if(rv.test(ge))throw new xe(c);Y=(D?Y.replace(W0,""):Y).replace(z0,"$1").replace($0,"$1;"),Y="function("+(ge||"obj")+`) {
`+(ge?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(I?", __e = _.escape":"")+(D?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Y+`return __p
}`;var Ae=Ph(function(){return Ne(C,ae+"return "+Y).apply(n,A)});if(Ae.source=Y,Ml(Ae))throw Ae;return Ae}function Pw(i){return Ue(i).toLowerCase()}function Aw(i){return Ue(i).toUpperCase()}function Fw(i,s,u){if(i=Ue(i),i&&(u||s===n))return Df(i);if(!i||!(s=$t(s)))return i;var d=cn(i),_=cn(s),C=Gf(d,_),A=Bf(d,_)+1;return li(d,C,A).join("")}function Lw(i,s,u){if(i=Ue(i),i&&(u||s===n))return i.slice(0,Uf(i)+1);if(!i||!(s=$t(s)))return i;var d=cn(i),_=Bf(d,cn(s))+1;return li(d,0,_).join("")}function Iw(i,s,u){if(i=Ue(i),i&&(u||s===n))return i.replace(Ma,"");if(!i||!(s=$t(s)))return i;var d=cn(i),_=Gf(d,cn(s));return li(d,_).join("")}function Mw(i,s){var u=N,d=q;if(Je(s)){var _="separator"in s?s.separator:_;u="length"in s?Te(s.length):u,d="omission"in s?$t(s.omission):d}i=Ue(i);var C=i.length;if(qi(i)){var A=cn(i);C=A.length}if(u>=C)return i;var I=u-Ki(d);if(I<1)return d;var D=A?li(A,0,I).join(""):i.slice(0,I);if(_===n)return D+d;if(A&&(I+=D.length-I),Rl(_)){if(i.slice(I).search(_)){var j,X=D;for(_.global||(_=Ya(_.source,Ue(sf.exec(_))+"g")),_.lastIndex=0;j=_.exec(X);)var Y=j.index;D=D.slice(0,Y===n?I:Y)}}else if(i.indexOf($t(_),I)!=I){var ne=D.lastIndexOf(_);ne>-1&&(D=D.slice(0,ne))}return D+d}function Rw(i){return i=Ue(i),i&&j0.test(i)?i.replace(tf,u_):i}var Ow=nr(function(i,s,u){return i+(u?" ":"")+s.toUpperCase()}),Dl=Ad("toUpperCase");function Th(i,s,u){return i=Ue(i),s=u?n:s,s===n?r_(i)?d_(i):Kv(i):i.match(s)||[]}var Ph=Fe(function(i,s){try{return Wt(i,n,s)}catch(u){return Ml(u)?u:new xe(u)}}),Vw=Dn(function(i,s){return Jt(s,function(u){u=En(u),On(i,u,Ll(i[u],i))}),i});function Dw(i){var s=i==null?0:i.length,u=de();return i=s?Ke(i,function(d){if(typeof d[1]!="function")throw new Qt(l);return[u(d[0]),d[1]]}):[],Fe(function(d){for(var _=-1;++_<s;){var C=i[_];if(Wt(C[0],this,d))return Wt(C[1],this,d)}})}function Gw(i){return up(tn(i,m))}function Gl(i){return function(){return i}}function Bw(i,s){return i==null||i!==i?s:i}var Nw=Ld(),Uw=Ld(!0);function Nt(i){return i}function Bl(i){return ad(typeof i=="function"?i:tn(i,m))}function Ww(i){return ud(tn(i,m))}function zw(i,s){return cd(i,tn(s,m))}var $w=Fe(function(i,s){return function(u){return es(u,i,s)}}),jw=Fe(function(i,s){return function(u){return es(i,u,s)}});function Nl(i,s,u){var d=yt(s),_=Ys(s,d);u==null&&!(Je(s)&&(_.length||!d.length))&&(u=s,s=i,i=this,_=Ys(s,yt(s)));var C=!(Je(u)&&"chain"in u)||!!u.chain,A=Bn(i);return Jt(_,function(I){var D=s[I];i[I]=D,A&&(i.prototype[I]=function(){var j=this.__chain__;if(C||j){var X=i(this.__wrapped__),Y=X.__actions__=Dt(this.__actions__);return Y.push({func:D,args:arguments,thisArg:i}),X.__chain__=j,X}return D.apply(i,ni([this.value()],arguments))})}),i}function Xw(){return xt._===this&&(xt._=p_),this}function Ul(){}function Hw(i){return i=Te(i),Fe(function(s){return fd(s,i)})}var qw=pl(Ke),Kw=pl(If),Yw=pl(za);function Ah(i){return El(i)?$a(En(i)):kp(i)}function Zw(i){return function(s){return i==null?n:Fi(i,s)}}var Jw=Md(),Qw=Md(!0);function Wl(){return[]}function zl(){return!1}function ex(){return{}}function tx(){return""}function nx(){return!0}function ix(i,s){if(i=Te(i),i<1||i>ce)return[];var u=R,d=kt(i,R);s=de(s),i-=R;for(var _=Ha(d,s);++u<i;)s(u);return _}function rx(i){return Ce(i)?Ke(i,En):jt(i)?[i]:Dt(Kd(Ue(i)))}function sx(i){var s=++v_;return Ue(i)+s}var ox=no(function(i,s){return i+s},0),ax=yl("ceil"),lx=no(function(i,s){return i/s},1),ux=yl("floor");function cx(i){return i&&i.length?Ks(i,Nt,rl):n}function fx(i,s){return i&&i.length?Ks(i,de(s,2),rl):n}function dx(i){return Of(i,Nt)}function hx(i,s){return Of(i,de(s,2))}function gx(i){return i&&i.length?Ks(i,Nt,ll):n}function mx(i,s){return i&&i.length?Ks(i,de(s,2),ll):n}var vx=no(function(i,s){return i*s},1),_x=yl("round"),px=no(function(i,s){return i-s},0);function yx(i){return i&&i.length?Xa(i,Nt):0}function bx(i,s){return i&&i.length?Xa(i,de(s,2)):0}return w.after=W1,w.ary=oh,w.assign=Ab,w.assignIn=bh,w.assignInWith=vo,w.assignWith=Fb,w.at=Lb,w.before=ah,w.bind=Ll,w.bindAll=Vw,w.bindKey=lh,w.castArray=eb,w.chain=ih,w.chunk=uy,w.compact=cy,w.concat=fy,w.cond=Dw,w.conforms=Gw,w.constant=Gl,w.countBy=y1,w.create=Ib,w.curry=uh,w.curryRight=ch,w.debounce=fh,w.defaults=Mb,w.defaultsDeep=Rb,w.defer=z1,w.delay=$1,w.difference=dy,w.differenceBy=hy,w.differenceWith=gy,w.drop=my,w.dropRight=vy,w.dropRightWhile=_y,w.dropWhile=py,w.fill=yy,w.filter=w1,w.flatMap=S1,w.flatMapDeep=E1,w.flatMapDepth=k1,w.flatten=Qd,w.flattenDeep=by,w.flattenDepth=wy,w.flip=j1,w.flow=Nw,w.flowRight=Uw,w.fromPairs=xy,w.functions=Ub,w.functionsIn=Wb,w.groupBy=T1,w.initial=Sy,w.intersection=Ey,w.intersectionBy=ky,w.intersectionWith=Ty,w.invert=$b,w.invertBy=jb,w.invokeMap=A1,w.iteratee=Bl,w.keyBy=F1,w.keys=yt,w.keysIn=Bt,w.map=uo,w.mapKeys=Hb,w.mapValues=qb,w.matches=Ww,w.matchesProperty=zw,w.memoize=fo,w.merge=Kb,w.mergeWith=wh,w.method=$w,w.methodOf=jw,w.mixin=Nl,w.negate=ho,w.nthArg=Hw,w.omit=Yb,w.omitBy=Zb,w.once=X1,w.orderBy=L1,w.over=qw,w.overArgs=H1,w.overEvery=Kw,w.overSome=Yw,w.partial=Il,w.partialRight=dh,w.partition=I1,w.pick=Jb,w.pickBy=xh,w.property=Ah,w.propertyOf=Zw,w.pull=Ly,w.pullAll=th,w.pullAllBy=Iy,w.pullAllWith=My,w.pullAt=Ry,w.range=Jw,w.rangeRight=Qw,w.rearg=q1,w.reject=O1,w.remove=Oy,w.rest=K1,w.reverse=Al,w.sampleSize=D1,w.set=ew,w.setWith=tw,w.shuffle=G1,w.slice=Vy,w.sortBy=U1,w.sortedUniq=zy,w.sortedUniqBy=$y,w.split=Sw,w.spread=Y1,w.tail=jy,w.take=Xy,w.takeRight=Hy,w.takeRightWhile=qy,w.takeWhile=Ky,w.tap=c1,w.throttle=Z1,w.thru=lo,w.toArray=_h,w.toPairs=Ch,w.toPairsIn=Sh,w.toPath=rx,w.toPlainObject=yh,w.transform=nw,w.unary=J1,w.union=Yy,w.unionBy=Zy,w.unionWith=Jy,w.uniq=Qy,w.uniqBy=e1,w.uniqWith=t1,w.unset=iw,w.unzip=Fl,w.unzipWith=nh,w.update=rw,w.updateWith=sw,w.values=sr,w.valuesIn=ow,w.without=n1,w.words=Th,w.wrap=Q1,w.xor=i1,w.xorBy=r1,w.xorWith=s1,w.zip=o1,w.zipObject=a1,w.zipObjectDeep=l1,w.zipWith=u1,w.entries=Ch,w.entriesIn=Sh,w.extend=bh,w.extendWith=vo,Nl(w,w),w.add=ox,w.attempt=Ph,w.camelCase=cw,w.capitalize=Eh,w.ceil=ax,w.clamp=aw,w.clone=tb,w.cloneDeep=ib,w.cloneDeepWith=rb,w.cloneWith=nb,w.conformsTo=sb,w.deburr=kh,w.defaultTo=Bw,w.divide=lx,w.endsWith=fw,w.eq=dn,w.escape=dw,w.escapeRegExp=hw,w.every=b1,w.find=x1,w.findIndex=Zd,w.findKey=Ob,w.findLast=C1,w.findLastIndex=Jd,w.findLastKey=Vb,w.floor=ux,w.forEach=rh,w.forEachRight=sh,w.forIn=Db,w.forInRight=Gb,w.forOwn=Bb,w.forOwnRight=Nb,w.get=Ol,w.gt=ob,w.gte=ab,w.has=zb,w.hasIn=Vl,w.head=eh,w.identity=Nt,w.includes=P1,w.indexOf=Cy,w.inRange=lw,w.invoke=Xb,w.isArguments=Mi,w.isArray=Ce,w.isArrayBuffer=lb,w.isArrayLike=Gt,w.isArrayLikeObject=ot,w.isBoolean=ub,w.isBuffer=ui,w.isDate=cb,w.isElement=fb,w.isEmpty=db,w.isEqual=hb,w.isEqualWith=gb,w.isError=Ml,w.isFinite=mb,w.isFunction=Bn,w.isInteger=hh,w.isLength=go,w.isMap=gh,w.isMatch=vb,w.isMatchWith=_b,w.isNaN=pb,w.isNative=yb,w.isNil=wb,w.isNull=bb,w.isNumber=mh,w.isObject=Je,w.isObjectLike=it,w.isPlainObject=os,w.isRegExp=Rl,w.isSafeInteger=xb,w.isSet=vh,w.isString=mo,w.isSymbol=jt,w.isTypedArray=rr,w.isUndefined=Cb,w.isWeakMap=Sb,w.isWeakSet=Eb,w.join=Py,w.kebabCase=gw,w.last=rn,w.lastIndexOf=Ay,w.lowerCase=mw,w.lowerFirst=vw,w.lt=kb,w.lte=Tb,w.max=cx,w.maxBy=fx,w.mean=dx,w.meanBy=hx,w.min=gx,w.minBy=mx,w.stubArray=Wl,w.stubFalse=zl,w.stubObject=ex,w.stubString=tx,w.stubTrue=nx,w.multiply=vx,w.nth=Fy,w.noConflict=Xw,w.noop=Ul,w.now=co,w.pad=_w,w.padEnd=pw,w.padStart=yw,w.parseInt=bw,w.random=uw,w.reduce=M1,w.reduceRight=R1,w.repeat=ww,w.replace=xw,w.result=Qb,w.round=_x,w.runInContext=O,w.sample=V1,w.size=B1,w.snakeCase=Cw,w.some=N1,w.sortedIndex=Dy,w.sortedIndexBy=Gy,w.sortedIndexOf=By,w.sortedLastIndex=Ny,w.sortedLastIndexBy=Uy,w.sortedLastIndexOf=Wy,w.startCase=Ew,w.startsWith=kw,w.subtract=px,w.sum=yx,w.sumBy=bx,w.template=Tw,w.times=ix,w.toFinite=Nn,w.toInteger=Te,w.toLength=ph,w.toLower=Pw,w.toNumber=sn,w.toSafeInteger=Pb,w.toString=Ue,w.toUpper=Aw,w.trim=Fw,w.trimEnd=Lw,w.trimStart=Iw,w.truncate=Mw,w.unescape=Rw,w.uniqueId=sx,w.upperCase=Ow,w.upperFirst=Dl,w.each=rh,w.eachRight=sh,w.first=eh,Nl(w,function(){var i={};return Cn(w,function(s,u){We.call(w.prototype,u)||(i[u]=s)}),i}(),{chain:!1}),w.VERSION=r,Jt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){w[i].placeholder=w}),Jt(["drop","take"],function(i,s){Re.prototype[i]=function(u){u=u===n?1:mt(Te(u),0);var d=this.__filtered__&&!s?new Re(this):this.clone();return d.__filtered__?d.__takeCount__=kt(u,d.__takeCount__):d.__views__.push({size:kt(u,R),type:i+(d.__dir__<0?"Right":"")}),d},Re.prototype[i+"Right"]=function(u){return this.reverse()[i](u).reverse()}}),Jt(["filter","map","takeWhile"],function(i,s){var u=s+1,d=u==Q||u==le;Re.prototype[i]=function(_){var C=this.clone();return C.__iteratees__.push({iteratee:de(_,3),type:u}),C.__filtered__=C.__filtered__||d,C}}),Jt(["head","last"],function(i,s){var u="take"+(s?"Right":"");Re.prototype[i]=function(){return this[u](1).value()[0]}}),Jt(["initial","tail"],function(i,s){var u="drop"+(s?"":"Right");Re.prototype[i]=function(){return this.__filtered__?new Re(this):this[u](1)}}),Re.prototype.compact=function(){return this.filter(Nt)},Re.prototype.find=function(i){return this.filter(i).head()},Re.prototype.findLast=function(i){return this.reverse().find(i)},Re.prototype.invokeMap=Fe(function(i,s){return typeof i=="function"?new Re(this):this.map(function(u){return es(u,i,s)})}),Re.prototype.reject=function(i){return this.filter(ho(de(i)))},Re.prototype.slice=function(i,s){i=Te(i);var u=this;return u.__filtered__&&(i>0||s<0)?new Re(u):(i<0?u=u.takeRight(-i):i&&(u=u.drop(i)),s!==n&&(s=Te(s),u=s<0?u.dropRight(-s):u.take(s-i)),u)},Re.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},Re.prototype.toArray=function(){return this.take(R)},Cn(Re.prototype,function(i,s){var u=/^(?:filter|find|map|reject)|While$/.test(s),d=/^(?:head|last)$/.test(s),_=w[d?"take"+(s=="last"?"Right":""):s],C=d||/^find/.test(s);_&&(w.prototype[s]=function(){var A=this.__wrapped__,I=d?[1]:arguments,D=A instanceof Re,j=I[0],X=D||Ce(A),Y=function(Ie){var Ve=_.apply(w,ni([Ie],I));return d&&ne?Ve[0]:Ve};X&&u&&typeof j=="function"&&j.length!=1&&(D=X=!1);var ne=this.__chain__,ae=!!this.__actions__.length,ge=C&&!ne,Ae=D&&!ae;if(!C&&X){A=Ae?A:new Re(this);var me=i.apply(A,I);return me.__actions__.push({func:lo,args:[Y],thisArg:n}),new en(me,ne)}return ge&&Ae?i.apply(this,I):(me=this.thru(Y),ge?d?me.value()[0]:me.value():me)})}),Jt(["pop","push","shift","sort","splice","unshift"],function(i){var s=Rs[i],u=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",d=/^(?:pop|shift)$/.test(i);w.prototype[i]=function(){var _=arguments;if(d&&!this.__chain__){var C=this.value();return s.apply(Ce(C)?C:[],_)}return this[u](function(A){return s.apply(Ce(A)?A:[],_)})}}),Cn(Re.prototype,function(i,s){var u=w[s];if(u){var d=u.name+"";We.call(Qi,d)||(Qi[d]=[]),Qi[d].push({name:s,func:u})}}),Qi[to(n,S).name]=[{name:"wrapper",func:n}],Re.prototype.clone=R_,Re.prototype.reverse=O_,Re.prototype.value=V_,w.prototype.at=f1,w.prototype.chain=d1,w.prototype.commit=h1,w.prototype.next=g1,w.prototype.plant=v1,w.prototype.reverse=_1,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=p1,w.prototype.first=w.prototype.head,Hr&&(w.prototype[Hr]=m1),w},Yi=h_();Ei?((Ei.exports=Yi)._=Yi,Ba._=Yi):xt._=Yi}).call(ik)}(cs,cs.exports)),cs.exports}var i0=rk();const cu="projection",lg="coordinateFormat";class sk extends Vr{constructor(e){e=e||{};const n=document.createElement("div");n.className=e.className!==void 0?e.className:"ol-mouse-position",super({element:n,render:e.render,target:e.target}),this.on,this.once,this.un,this.addChangeListener(cu,this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.renderOnMouseOut_=e.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?e.placeholder:"&#160;",this.renderedHTML_=n.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=e.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(lg)}getProjection(){return this.get(cu)}handleMouseMove(e){const n=this.getMap();this.updateHTML_(n.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(e){if(super.setMap(e),e){const n=e.getViewport();this.listenerKeys.push(kn(n,Ri.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(kn(n,Ri.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(e){this.set(lg,e)}setProjection(e){this.set(cu,an(e))}updateHTML_(e){let n=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){const a=this.getProjection();a?this.transform_=fC(this.mapProjection_,a):this.transform_=dC}const o=this.getMap().getCoordinateFromPixelInternal(e);if(o){if(this.transform_(o,o),this.wrapX_){const l=this.getProjection()||this.mapProjection_;hC(o,l)}const a=this.getCoordinateFormat();a?n=a(o):n=o.toString()}}(!this.renderedHTML_||n!==this.renderedHTML_)&&(this.element.innerHTML=n,this.renderedHTML_=n)}render(e){const n=e.frameState;n?this.mapProjection_!=n.viewState.projection&&(this.mapProjection_=n.viewState.projection,this.transform_=null):this.mapProjection_=null}}const fu="units",ok=[1,2,5],as=25.4/.28;class ak extends Vr{constructor(e){e=e||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+Lu,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(fu,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(fu)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(fu,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=e.center,r=e.projection,o=this.getUnits(),a=o=="degrees"?"degrees":"m";let l=Yo(r,e.resolution,n,a);const c=this.minWidth_*(this.dpi_||as)/as,f=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||as)/as:void 0;let g=c*l,h="";if(o=="degrees"){const L=om.degrees;g*=L,g<L/60?(h="″",l*=3600):g<L?(h="′",l*=60):h="°"}else if(o=="imperial")g<.9144?(h="in",l/=.0254):g<1609.344?(h="ft",l/=.3048):(h="mi",l/=1609.344);else if(o=="nautical")l/=1852,h="NM";else if(o=="metric")g<1e-6?(h="nm",l*=1e9):g<.001?(h="μm",l*=1e6):g<1?(h="mm",l*=1e3):g<1e3?h="m":(h="km",l/=1e3);else if(o=="us")g<.9144?(h="in",l*=39.37):g<1609.344?(h="ft",l/=.30480061):(h="mi",l/=1609.3472);else throw new Error("Invalid units");let m=3*Math.floor(Math.log(c*l)/Math.log(10)),v,p,y,x=0,b,S;for(;;){y=Math.floor(m/3);const L=Math.pow(10,y);if(v=ok[(m%3+3)%3]*L,p=Math.round(v/l),isNaN(p)){this.element.style.display="none",this.renderedVisible_=!1;return}if(f!==void 0&&p>=f){v=x,p=b,y=S;break}else if(p>=c)break;x=v,b=p,S=y,++m}const T=this.scaleBar_?this.createScaleBar(p,v,h):v.toFixed(y<0?-y:0)+" "+h;this.renderedHTML_!=T&&(this.innerElement_.innerHTML=T,this.renderedHTML_=T),this.renderedWidth_!=p&&(this.innerElement_.style.width=p+"px",this.renderedWidth_=p),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,n,r){const o=this.getScaleForResolution(),a=o<1?Math.round(1/o).toLocaleString()+" : 1":"1 : "+Math.round(o).toLocaleString(),l=this.scaleBarSteps_,c=e/l,f=[this.createMarker("absolute")];for(let h=0;h<l;++h){const m=h%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";f.push(`<div><div class="ol-scale-singlebar ${m}" style="width: ${c}px;"></div>`+this.createMarker("relative")+(h%2===0||l===2?this.createStepText(h,e,!1,n,r):"")+"</div>")}return f.push(this.createStepText(l,e,!0,n,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+a+"</div>":"")+f.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,n,r,o,a){const c=(e===0?0:Math.round(o/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+a),f=e===0?-3:n/this.scaleBarSteps_*-1,g=e===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${f}px;text-align: ${e===0?"left":"center"};min-width: ${g}px;left: ${r?n+"px":"unset"};">`+c+"</div>"}getScaleForResolution(){const e=Yo(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||as,r=1e3/25.4;return e*r*n}render(e){const n=e.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const ls={VERTICAL:0,HORIZONTAL:1};class lk extends Vr{constructor(e){e=e||{},super({target:e.target,element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=ls.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=e.duration!==void 0?e.duration:200;const n=e.className!==void 0?e.className:"ol-zoomslider",r=document.createElement("button");r.setAttribute("type","button"),r.className=n+"-thumb "+Lu;const o=this.element;o.className=n+" "+Lu+" "+gC,o.appendChild(r),o.addEventListener(Ri.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),o.addEventListener(Ri.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),o.addEventListener(Ri.POINTERUP,this.handleDraggerEnd_.bind(this),!1),o.addEventListener(_i.CLICK,this.handleContainerClick_.bind(this),!1),r.addEventListener(_i.CLICK,mC,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){const e=this.element;let n=e.offsetWidth,r=e.offsetHeight;if(n===0&&r===0)return this.sliderInitialized_=!1;const o=getComputedStyle(e);n-=parseFloat(o.paddingRight)+parseFloat(o.paddingLeft),r-=parseFloat(o.paddingTop)+parseFloat(o.paddingBottom);const a=e.firstElementChild,l=getComputedStyle(a),c=a.offsetWidth+parseFloat(l.marginRight)+parseFloat(l.marginLeft),f=a.offsetHeight+parseFloat(l.marginTop)+parseFloat(l.marginBottom);return this.thumbSize_=[c,f],n>r?(this.direction_=ls.HORIZONTAL,this.widthLimit_=n-c):(this.direction_=ls.VERTICAL,this.heightLimit_=r-f),this.sliderInitialized_=!0}handleContainerClick_(e){const n=this.getMap().getView(),r=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),o=this.getResolutionForPosition_(r),a=n.getConstrainedZoom(n.getZoomForResolution(o));n.animateInternal({zoom:a,duration:this.duration_,easing:vC})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){const n=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(n.style.left),this.startY_=e.clientY-parseFloat(n.style.top),this.dragging_=!0,this.dragListenerKeys_.length===0){const r=this.handleDraggerDrag_,o=this.handleDraggerEnd_,a=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(kn(a,Ri.POINTERMOVE,r,this),kn(a,Ri.POINTERUP,o,this))}}}handleDraggerDrag_(e){if(this.dragging_){const n=e.clientX-this.startX_,r=e.clientY-this.startY_,o=this.getRelativePosition_(n,r);this.currentResolution_=this.getResolutionForPosition_(o),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(pr),this.dragListenerKeys_.length=0)}setThumbPosition_(e){const n=this.getPositionForResolution_(e),r=this.element.firstElementChild;this.direction_==ls.HORIZONTAL?r.style.left=this.widthLimit_*n+"px":r.style.top=this.heightLimit_*n+"px"}getRelativePosition_(e,n){let r;return this.direction_===ls.HORIZONTAL?r=e/this.widthLimit_:r=n/this.heightLimit_,kr(r,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){const n=this.getMap().getView().getValueForResolutionFunction();return kr(1-n(e),0,1)}render(e){if(!e.frameState||!this.sliderInitialized_&&!this.initSlider_())return;const n=e.frameState.viewState.resolution;this.currentResolution_=n,this.setThumbPosition_(n)}}function Hu(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const uk=new Error("disposed"),ck=[256,256];class ug extends am{constructor(e){const n=Oe.IDLE;super(e.tileCoord,n,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=Hu(this.data_);return e?[e.width,e.height]:ck}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Oe.IDLE&&this.state!==Oe.ERROR)return;this.state=Oe.LOADING,this.changed();const e=this;this.loader_().then(function(n){e.data_=n,e.state=Oe.LOADED,e.changed()}).catch(function(n){e.error_=n,e.state=Oe.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(uk),this.controller_=null),super.disposeInternal()}}let du;const xr=[];function cg(t,e,n,r,o){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(r,o),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(n,o)),t.restore()}function hu(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function fk(){if(du===void 0){const t=Iu(6,6,xr);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",cg(t,4,5,4,0),cg(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;du=hu(e,0)||hu(e,4)||hu(e,8),Cc(t),xr.push(t.canvas)}return du}function fg(t,e,n,r){const o=Pr(n,e,t);let a=Yo(e,r,n);const l=e.getMetersPerUnit();l!==void 0&&(a*=l);const c=t.getMetersPerUnit();c!==void 0&&(a/=c);const f=t.getExtent();if(!f||Sc(f,o)){const g=Yo(t,a,o)/a;isFinite(g)&&g>0&&(a/=g)}return a}function dk(t,e,n,r){const o=Uo(n);let a=fg(t,e,o,r);return(!isFinite(a)||a<=0)&&pC(n,function(l){return a=fg(t,e,l,r),isFinite(a)&&a>0}),a}function hk(t,e,n,r,o,a,l,c,f,g,h,m,v,p){const y=Iu(Math.round(n*t),Math.round(n*e),xr);if(m||(y.imageSmoothingEnabled=!1),f.length===0)return y.canvas;y.scale(n,n);function x(k){return Math.round(k*n)/n}y.globalCompositeOperation="lighter";const b=Tr();f.forEach(function(k,V,E){No(b,k.extent)});let S;const T=n/r,L=(m?1:1+Math.pow(2,-24))/T;S=Iu(Math.round(Yt(b)*T),Math.round(us(b)*T),xr),m||(S.imageSmoothingEnabled=!1),f.forEach(function(k,V,E){if(k.image.width>0&&k.image.height>0){if(k.clipExtent){S.save();const K=(k.clipExtent[0]-b[0])*T,W=-(k.clipExtent[3]-b[3])*T,Q=Yt(k.clipExtent)*T,ie=us(k.clipExtent)*T;S.rect(m?K:Math.round(K),m?W:Math.round(W),m?Q:Math.round(K+Q)-Math.round(K),m?ie:Math.round(W+ie)-Math.round(W)),S.clip()}const M=(k.extent[0]-b[0])*T,U=-(k.extent[3]-b[3])*T,N=Yt(k.extent)*T,q=us(k.extent)*T;S.drawImage(k.image,g,g,k.image.width-2*g,k.image.height-2*g,m?M:Math.round(M),m?U:Math.round(U),m?N:Math.round(M+N)-Math.round(M),m?q:Math.round(U+q)-Math.round(U)),k.clipExtent&&S.restore()}});const P=ga(l);return c.getTriangles().forEach(function(k,V,E){const M=k.source,U=k.target;let N=M[0][0],q=M[0][1],K=M[1][0],W=M[1][1],Q=M[2][0],ie=M[2][1];const le=x((U[0][0]-P[0])/a),ye=x(-(U[0][1]-P[1])/a),ce=x((U[1][0]-P[0])/a),pe=x(-(U[1][1]-P[1])/a),G=x((U[2][0]-P[0])/a),R=x(-(U[2][1]-P[1])/a),B=N,J=q;N=0,q=0,K-=B,W-=J,Q-=B,ie-=J;const Be=[[K,W,0,0,ce-le],[Q,ie,0,0,G-le],[0,0,K,W,pe-ye],[0,0,Q,ie,R-ye]],ue=_C(Be);if(!ue)return;if(y.save(),y.beginPath(),fk()||!m){y.moveTo(ce,pe);const De=4,$e=le-ce,be=ye-pe;for(let Ze=0;Ze<De;Ze++)y.lineTo(ce+x((Ze+1)*$e/De),pe+x(Ze*be/(De-1))),Ze!=De-1&&y.lineTo(ce+x((Ze+1)*$e/De),pe+x((Ze+1)*be/(De-1)));y.lineTo(G,R)}else y.moveTo(ce,pe),y.lineTo(le,ye),y.lineTo(G,R);y.clip(),y.transform(ue[0],ue[2],ue[1],ue[3],le,ye),y.translate(b[0]-B,b[3]-J);let we;if(S)we=S.canvas,y.scale(L,-L);else{const De=f[0],$e=De.extent;we=De.image,y.scale(Yt($e)/we.width,-us($e)/we.height)}y.drawImage(we,0,0),y.restore()}),S&&(Cc(S),xr.push(S.canvas)),h&&(y.save(),y.globalCompositeOperation="source-over",y.strokeStyle="black",y.lineWidth=1,c.getTriangles().forEach(function(k,V,E){const M=k.target,U=(M[0][0]-P[0])/a,N=-(M[0][1]-P[1])/a,q=(M[1][0]-P[0])/a,K=-(M[1][1]-P[1])/a,W=(M[2][0]-P[0])/a,Q=-(M[2][1]-P[1])/a;y.beginPath(),y.moveTo(q,K),y.lineTo(U,N),y.lineTo(W,Q),y.closePath(),y.stroke()}),y.restore()),y.canvas}const gk=10,dg=.25;class mk{constructor(e,n,r,o,a,l,c){this.sourceProj_=e,this.targetProj_=n;let f={};const g=c?yC(L=>Ru(c,Pr(L,this.targetProj_,this.sourceProj_))):Jg(this.targetProj_,this.sourceProj_);this.transformInv_=function(L){const P=L[0]+"/"+L[1];return f[P]||(f[P]=g(L)),f[P]},this.maxSourceExtent_=o,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&Yt(o)>=Yt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Yt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Yt(this.targetProj_.getExtent()):null;const h=ga(r),m=bC(r),v=wC(r),p=xC(r),y=this.transformInv_(h),x=this.transformInv_(m),b=this.transformInv_(v),S=this.transformInv_(p),T=gk+(l?Math.max(0,Math.ceil(Math.log2(Mu(r)/(l*l*256*256)))):0);if(this.addQuad_(h,m,v,p,y,x,b,S,T),this.wrapsXInSource_){let L=1/0;this.triangles_.forEach(function(P,k,V){L=Math.min(L,P.source[0][0],P.source[1][0],P.source[2][0])}),this.triangles_.forEach(P=>{if(Math.max(P.source[0][0],P.source[1][0],P.source[2][0])-L>this.sourceWorldWidth_/2){const k=[[P.source[0][0],P.source[0][1]],[P.source[1][0],P.source[1][1]],[P.source[2][0],P.source[2][1]]];k[0][0]-L>this.sourceWorldWidth_/2&&(k[0][0]-=this.sourceWorldWidth_),k[1][0]-L>this.sourceWorldWidth_/2&&(k[1][0]-=this.sourceWorldWidth_),k[2][0]-L>this.sourceWorldWidth_/2&&(k[2][0]-=this.sourceWorldWidth_);const V=Math.min(k[0][0],k[1][0],k[2][0]);Math.max(k[0][0],k[1][0],k[2][0])-V<this.sourceWorldWidth_/2&&(P.source=k)}})}f={}}addTriangle_(e,n,r,o,a,l){this.triangles_.push({source:[o,a,l],target:[e,n,r]})}addQuad_(e,n,r,o,a,l,c,f,g){const h=vt([a,l,c,f]),m=this.sourceWorldWidth_?Yt(h)/this.sourceWorldWidth_:null,v=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&m>.5&&m<1;let y=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const b=vt([e,n,r,o]);y=Yt(b)/this.targetWorldWidth_>dg||y}!p&&this.sourceProj_.isGlobal()&&m&&(y=m>dg||y)}if(!y&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!xc(h,this.maxSourceExtent_))return;let x=0;if(!y&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(f[0])||!isFinite(f[1]))){if(g>0)y=!0;else if(x=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(l[0])||!isFinite(l[1])?4:0)+(!isFinite(c[0])||!isFinite(c[1])?2:0)+(!isFinite(f[0])||!isFinite(f[1])?1:0),x!=1&&x!=2&&x!=4&&x!=8)return}if(g>0){if(!y){const b=[(e[0]+r[0])/2,(e[1]+r[1])/2],S=this.transformInv_(b);let T;p?T=(Wo(a[0],v)+Wo(c[0],v))/2-Wo(S[0],v):T=(a[0]+c[0])/2-S[0];const L=(a[1]+c[1])/2-S[1];y=T*T+L*L>this.errorThresholdSquared_}if(y){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const b=[(n[0]+r[0])/2,(n[1]+r[1])/2],S=this.transformInv_(b),T=[(o[0]+e[0])/2,(o[1]+e[1])/2],L=this.transformInv_(T);this.addQuad_(e,n,b,T,a,l,S,L,g-1),this.addQuad_(T,b,r,o,L,S,c,f,g-1)}else{const b=[(e[0]+n[0])/2,(e[1]+n[1])/2],S=this.transformInv_(b),T=[(r[0]+o[0])/2,(r[1]+o[1])/2],L=this.transformInv_(T);this.addQuad_(e,b,T,o,a,S,L,f,g-1),this.addQuad_(b,n,r,T,S,l,c,L,g-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(x&11)==0&&this.addTriangle_(e,r,o,a,c,f),(x&14)==0&&this.addTriangle_(e,r,n,a,c,l),x&&((x&13)==0&&this.addTriangle_(n,o,e,l,f,a),(x&7)==0&&this.addTriangle_(n,o,r,l,f,c))}calculateSourceExtent(){const e=Tr();return this.triangles_.forEach(function(n,r,o){const a=n.source;Xl(e,a[0]),Xl(e,a[1]),Xl(e,a[2])}),e}getTriangles(){return this.triangles_}}const vk=.5;class r0 extends am{constructor(e,n,r,o,a,l,c,f,g,h,m,v){super(a,Oe.IDLE,v),this.renderEdges_=m!==void 0?m:!1,this.pixelRatio_=c,this.gutter_=f,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=o,this.wrappedTileCoord_=l||a,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const p=o.getTileCoordExtent(this.wrappedTileCoord_),y=this.targetTileGrid_.getExtent();let x=this.sourceTileGrid_.getExtent();const b=y?br(p,y):p;if(Mu(b)===0){this.state=Oe.EMPTY;return}const S=e.getExtent();S&&(x?x=br(x,S):x=S);const T=o.getResolution(this.wrappedTileCoord_[0]),L=dk(e,r,b,T);if(!isFinite(L)||L<=0){this.state=Oe.EMPTY;return}const P=h!==void 0?h:vk;if(this.triangulation_=new mk(e,r,b,x,L*P,T),this.triangulation_.getTriangles().length===0){this.state=Oe.EMPTY;return}this.sourceZ_=n.getZForResolution(L);let k=this.triangulation_.calculateSourceExtent();if(x&&(e.canWrapX()?(k[1]=kr(k[1],x[1],x[3]),k[3]=kr(k[3],x[1],x[3])):k=br(k,x)),!Mu(k))this.state=Oe.EMPTY;else{let V=0,E=0;e.canWrapX()&&(V=Yt(S),E=Math.floor((k[0]-S[0])/V)),CC(k.slice(),e,!0).forEach(U=>{const N=n.getTileRangeForExtentAndZ(U,this.sourceZ_);for(let q=N.minX;q<=N.maxX;q++)for(let K=N.minY;K<=N.maxY;K++){const W=g(this.sourceZ_,q,K,c);if(W){const Q=E*V;this.sourceTiles_.push({tile:W,offset:Q})}}++E}),this.sourceTiles_.length===0&&(this.state=Oe.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{const r=n.tile;if(r&&r.getState()==Oe.LOADED){const o=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);o[0]+=n.offset,o[2]+=n.offset;const a=this.clipExtent_?.slice();a&&(a[0]+=n.offset,a[2]+=n.offset),e.push({extent:o,clipExtent:a,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Oe.ERROR;else{const n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),o=typeof r=="number"?r:r[0],a=typeof r=="number"?r:r[1],l=this.targetTileGrid_.getResolution(n),c=this.sourceTileGrid_.getResolution(this.sourceZ_),f=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=hk(o,a,this.pixelRatio_,c,this.sourceTileGrid_.getExtent(),l,f,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Oe.LOADED}this.changed()}load(){if(this.state==Oe.IDLE){this.state=Oe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const r=n.getState();if(r==Oe.IDLE||r==Oe.LOADING){e++;const o=kn(n,_i.CHANGE,a=>{const l=n.getState();(l==Oe.LOADED||l==Oe.ERROR||l==Oe.EMPTY)&&(pr(o),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(o)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n},r,o){n.getState()==Oe.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(pr),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Cc(this.canvas_.getContext("2d")),xr.push(this.canvas_),this.canvas_=null),super.release()}}class _k{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof SC&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){const r=this.entries_[e];return fi(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const n=this.entries_[e];return fi(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.key_;return e}getValues(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){fi(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function ia(t,e,n,r){return r!==void 0?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function pk(t,e,n){return t+"/"+e+"/"+n}function yk(t){return bk(t[0],t[1],t[2])}function bk(t,e,n){return(e<<t)+n}function wk(t,e){const n=t[0],r=t[1],o=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const a=e.getFullTileRange(n);return a?a.containsXY(r,o):!0}function gu(t,e,n,r){return`${t},${pk(e,n,r)}`}function mu(t,e,n){if(!(n in t))return t[n]=new Set([e]),!0;const r=t[n],o=r.has(e);return o||r.add(e),!o}function xk(t,e,n){const r=t[n];return r?r.delete(e):!1}function hg(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=br(e,Ko(n.extent,t.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const o=r.getTileGridForProjection(t.viewState.projection).getExtent();o&&(e=br(e,o))}return e}class Ck extends EC{constructor(e,n){super(e),n=n||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision_,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Tr(),this.tempTileRange_=new lm(0,0,0,0),this.tempTileCoord_=ia(0,0,0);const r=n.cacheSize!==void 0?n.cacheSize:512;this.tileCache_=new _k(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,n,r,o){const a=this.tileCache_,c=this.getLayer().getSource(),f=gu(c.getKey(),e,n,r);let g;if(a.containsKey(f))g=a.get(f);else{if(g=c.getTile(e,n,r,o.pixelRatio,o.viewState.projection),!g)return null;a.set(f,g)}return g}getTile(e,n,r,o){const a=this.getOrCreateTile(e,n,r,o);return a||null}getData(e){const n=this.frameState;if(!n)return null;const r=this.getLayer(),o=Ru(n.pixelToCoordinateTransform,e.slice()),a=r.getExtent();if(a&&!Sc(a,o))return null;const l=n.viewState,c=r.getRenderSource(),f=c.getTileGridForProjection(l.projection),g=c.getTilePixelRatio(n.pixelRatio);for(let h=f.getZForResolution(l.resolution);h>=f.getMinZoom();--h){const m=f.getTileCoordForCoordAndZ(o,h),v=this.getTile(h,m[1],m[2],n);if(!v||v.getState()!==Oe.LOADED)continue;const p=f.getOrigin(h),y=gi(f.getTileSize(h)),x=f.getResolution(h);let b;if(v instanceof um||v instanceof r0)b=v.getImage();else if(v instanceof ug){if(b=Hu(v.getData()),!b)continue}else continue;const S=Math.floor(g*((o[0]-p[0])/x-m[1]*y[0])),T=Math.floor(g*((p[1]-o[1])/x-m[2]*y[1])),L=Math.round(g*c.getGutterForProjection(l.projection));return this.getImageData(b,S+L,T+L)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const n=this.getLayer().getSource();if(!n)return!1;const r=n.getRevision();return this.renderedRevision_?this.renderedRevision_!==r&&(this.renderedRevision_=r,this.renderedSourceKey_===n.getKey()&&this.tileCache_.clear()):this.renderedRevision_=r,!0}enqueueTiles(e,n,r,o,a){const l=e.viewState,c=this.getLayer(),f=c.getRenderSource(),g=f.getTileGridForProjection(l.projection),h=He(f);h in e.wantedTiles||(e.wantedTiles[h]={});const m=e.wantedTiles[h],v=c.getMapInternal(),p=Math.max(r-a,g.getMinZoom(),g.getZForResolution(Math.min(c.getMaxResolution(),v?v.getView().getResolutionForZoom(Math.max(c.getMinZoom(),0)):g.getResolution(0)),f.zDirection)),y=l.rotation,x=y?kC(l.center,l.resolution,y,e.size):void 0;for(let b=r;b>=p;--b){const S=g.getTileRangeForExtentAndZ(n,b,this.tempTileRange_),T=g.getResolution(b);for(let L=S.minX;L<=S.maxX;++L)for(let P=S.minY;P<=S.maxY;++P){if(y&&!g.tileCoordIntersectsViewport([b,L,P],x))continue;const k=this.getTile(b,L,P,e);if(!k||!mu(o,k,b))continue;const E=k.getKey();if(m[E]=!0,k.getState()===Oe.IDLE&&!e.tileQueue.isKeyQueued(E)){const M=ia(b,L,P,this.tempTileCoord_);e.tileQueue.enqueue([k,h,g.getTileCoordCenter(M),T])}}}}findStaleTile_(e,n){const r=this.tileCache_,o=e[0],a=e[1],l=e[2],c=this.getStaleKeys();for(let f=0;f<c.length;++f){const g=gu(c[f],o,a,l);if(r.containsKey(g)){const h=r.peek(g);if(h.getState()===Oe.LOADED)return h.endTransition(He(this)),mu(n,h,o),!0}}return!1}findAltTiles_(e,n,r,o){const a=e.getTileRangeForTileCoordAndZ(n,r,this.tempTileRange_);if(!a)return!1;let l=!0;const c=this.tileCache_,g=this.getLayer().getRenderSource().getKey();for(let h=a.minX;h<=a.maxX;++h)for(let m=a.minY;m<=a.maxY;++m){const v=gu(g,r,h,m);let p=!1;if(c.containsKey(v)){const y=c.peek(v);y.getState()===Oe.LOADED&&(mu(o,y,r),p=!0)}p||(l=!1)}return l}renderFrame(e,n){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],o=e.viewState,a=o.projection,l=o.resolution,c=o.center,f=e.pixelRatio,g=this.getLayer(),h=g.getSource(),m=h.getTileGridForProjection(a),v=m.getZForResolution(l,h.zDirection),p=m.getResolution(v),y=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==y&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=y):this.renderedSourceKey_=y;let x=e.extent;const b=h.getTilePixelRatio(f);this.prepareContainer(e,n);const S=this.context.canvas.width,T=this.context.canvas.height,L=r.extent&&Ko(r.extent);L&&(x=br(x,Ko(r.extent)));const P=p*S/2/b,k=p*T/2/b,V=[c[0]-P,c[1]-k,c[0]+P,c[1]+k],E={};this.renderedTiles.length=0;const M=g.getPreload();if(e.nextExtent){const ce=m.getZForResolution(o.nextResolution,h.zDirection),pe=hg(e,e.nextExtent);this.enqueueTiles(e,pe,ce,E,M)}const U=hg(e,x);if(this.enqueueTiles(e,U,v,E,0),M>0&&setTimeout(()=>{this.enqueueTiles(e,U,v-1,E,M-1)},0),!(v in E))return this.container;const N=He(this),q=e.time;for(const ce of E[v]){const pe=ce.getState();if(pe===Oe.EMPTY)continue;const G=ce.tileCoord;if(pe===Oe.LOADED&&ce.getAlpha(N,q)===1){ce.endTransition(N);continue}if(pe!==Oe.ERROR&&(this.renderComplete=!1),this.findStaleTile_(G,E)){xk(E,ce,v),e.animate=!0;continue}if(this.findAltTiles_(m,G,v+1,E))continue;const J=m.getMinZoom();for(let Be=v-1;Be>=J&&!this.findAltTiles_(m,G,Be,E);--Be);}const K=p/l*f/b,W=this.getRenderContext(e);TC(this.tempTransform,S/2,T/2,K,K,0,-S/2,-T/2),r.extent&&this.clipUnrotated(W,e,L),h.getInterpolate()||(W.imageSmoothingEnabled=!1),this.preRender(W,e);const Q=Object.keys(E).map(Number);Q.sort(PC);let ie;const le=[],ye=[];for(let ce=Q.length-1;ce>=0;--ce){const pe=Q[ce],G=h.getTilePixelSize(pe,f,a),B=m.getResolution(pe)/p,J=G[0]*B*K,Be=G[1]*B*K,ue=m.getTileCoordForCoordAndZ(ga(V),pe),we=m.getTileCoordExtent(ue),De=Ru(this.tempTransform,[b*(we[0]-V[0])/p,b*(V[3]-we[3])/p]),$e=b*h.getGutterForProjection(a);for(const be of E[pe]){if(be.getState()!==Oe.LOADED)continue;const Ze=be.tileCoord,st=ue[1]-Ze[1],$i=Math.round(De[0]-(st-1)*J),zr=ue[2]-Ze[2],Ut=Math.round(De[1]-(zr-1)*Be),Ot=Math.round(De[0]-st*J),xn=Math.round(De[1]-zr*Be),Vt=$i-Ot,Ci=Ut-xn,Ts=Q.length===1;let In=!1;ie=[Ot,xn,Ot+Vt,xn,Ot+Vt,xn+Ci,Ot,xn+Ci];for(let Et=0,Si=le.length;Et<Si;++Et)if(!Ts&&pe<ye[Et]){const wt=le[Et];xc([Ot,xn,Ot+Vt,xn+Ci],[wt[0],wt[3],wt[4],wt[7]])&&(In||(W.save(),In=!0),W.beginPath(),W.moveTo(ie[0],ie[1]),W.lineTo(ie[2],ie[3]),W.lineTo(ie[4],ie[5]),W.lineTo(ie[6],ie[7]),W.moveTo(wt[6],wt[7]),W.lineTo(wt[4],wt[5]),W.lineTo(wt[2],wt[3]),W.lineTo(wt[0],wt[1]),W.clip())}le.push(ie),ye.push(pe),this.drawTile(be,e,Ot,xn,Vt,Ci,$e,Ts),In&&W.restore(),this.renderedTiles.unshift(be),this.updateUsedTiles(e.usedTiles,h,be)}}if(this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!AC(this.renderedExtent_,V),this.renderedExtent_=V,this.renderedPixelRatio=f,this.postRender(this.context,e),r.extent&&W.restore(),W.imageSmoothingEnabled=!0,this.renderComplete){const ce=(pe,G)=>{const R=He(h),B=G.wantedTiles[R],J=B?Object.keys(B).length:0;this.updateCacheSize(J),this.tileCache_.expireCache()};e.postRenderFunctions.push(ce)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,n,r,o,a,l,c,f){let g;if(e instanceof ug){if(g=Hu(e.getData()),!g)throw new Error("Rendering array data is not yet supported")}else g=this.getTileImage(e);if(!g)return;const h=this.getRenderContext(n),m=He(this),v=n.layerStatesArray[n.layerIndex],p=v.opacity*(f?e.getAlpha(m,n.time):1),y=p!==h.globalAlpha;y&&(h.save(),h.globalAlpha=p),h.drawImage(g,c,c,g.width-2*c,g.height-2*c,r,o,a,l),y&&h.restore(),p!==v.opacity?n.animate=!0:f&&e.endTransition(m)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,n,r){const o=He(n);o in e||(e[o]={}),e[o][r.getKey()]=!0}}const Io={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Sk extends Ou{constructor(e){e=e||{};const n=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Io.PRELOAD)}setPreload(e){this.set(Io.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Io.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Io.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class Ek extends Sk{constructor(e){super(e)}createRenderer(){return new Ck(this,{cacheSize:this.getCacheSize()})}}const ur=[0,0,0],ci=5;class s0{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,fi(FC(this.resolutions_,(o,a)=>a-o),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let o=0,a=this.resolutions_.length-1;o<a;++o)if(!n)n=this.resolutions_[o]/this.resolutions_[o+1];else if(this.resolutions_[o]/this.resolutions_[o+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,fi(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ga(r)),fi(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,fi(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:cm,fi(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((o,a)=>{const l=new lm(Math.min(0,o[0]),Math.max(o[0]-1,-1),Math.min(0,o[1]),Math.max(o[1]-1,-1));if(r){const c=this.getTileRangeForExtentAndZ(r,a);l.minX=Math.max(c.minX,l.minX),l.maxX=Math.min(c.maxX,l.maxX),l.minY=Math.max(c.minY,l.minY),l.maxY=Math.min(c.maxY,l.maxY)}return l}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,n,r){const o=this.getTileRangeForExtentAndZ(e,n);for(let a=o.minX,l=o.maxX;a<=l;++a)for(let c=o.minY,f=o.maxY;c<=f;++c)r([n,a,c])}forEachTileCoordParentTileRange(e,n,r,o){let a,l,c,f=null,g=e[0]-1;for(this.zoomFactor_===2?(l=e[1],c=e[2]):f=this.getTileCoordExtent(e,o);g>=this.minZoom;){if(l!==void 0&&c!==void 0?(l=Math.floor(l/2),c=Math.floor(c/2),a=or(l,l,c,c,r)):a=this.getTileRangeForExtentAndZ(f,g,r),n(g,a))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const a=e[1]*2,l=e[2]*2;return or(a,a+1,l,l+1,n)}const o=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,r){if(n>this.maxZoom||n<this.minZoom)return null;const o=e[0],a=e[1],l=e[2];if(n===o)return or(a,l,a,l,r);if(this.zoomFactor_){const f=Math.pow(this.zoomFactor_,n-o),g=Math.floor(a*f),h=Math.floor(l*f);if(n<o)return or(g,g,h,h,r);const m=Math.floor(f*(a+1))-1,v=Math.floor(f*(l+1))-1;return or(g,m,h,v,r)}const c=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(c,n,r)}getTileRangeForExtentAndZ(e,n,r){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,ur);const o=ur[1],a=ur[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,ur);const l=ur[1],c=ur[2];return or(o,l,a,c,r)}getTileCoordCenter(e){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),o=gi(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*o[0]*r,n[1]-(e[2]+.5)*o[1]*r]}getTileCoordExtent(e,n){const r=this.getOrigin(e[0]),o=this.getResolution(e[0]),a=gi(this.getTileSize(e[0]),this.tmpSize_),l=r[0]+e[1]*a[0]*o,c=r[1]-(e[2]+1)*a[1]*o,f=l+a[0]*o,g=c+a[1]*o;return fm(l,c,f,g,n)}getTileCoordForCoordAndResolution(e,n,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,r)}getTileCoordForXYAndResolution_(e,n,r,o,a){const l=this.getZForResolution(r),c=r/this.getResolution(l),f=this.getOrigin(l),g=gi(this.getTileSize(l),this.tmpSize_);let h=c*(e-f[0])/r/g[0],m=c*(f[1]-n)/r/g[1];return o?(h=_o(h,ci)-1,m=_o(m,ci)-1):(h=po(h,ci),m=po(m,ci)),ia(l,h,m,a)}getTileCoordForXYAndZ_(e,n,r,o,a){const l=this.getOrigin(r),c=this.getResolution(r),f=gi(this.getTileSize(r),this.tmpSize_);let g=(e-l[0])/c/f[0],h=(l[1]-n)/c/f[1];return o?(g=_o(g,ci)-1,h=_o(h,ci)-1):(g=po(g,ci),h=po(h,ci)),ia(r,g,h,a)}getTileCoordForCoordAndZ(e,n,r){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){const r=LC(this.resolutions_,e,n||0);return kr(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return IC(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const n=this.resolutions_.length,r=new Array(n);for(let o=this.minZoom;o<n;++o)r[o]=this.getTileRangeForExtentAndZ(e,o);this.fullTileRanges_=r}}function o0(t){let e=t.getDefaultTileGrid();return e||(e=Ak(t),t.setDefaultTileGrid(e)),e}function kk(t,e,n){const r=e[0],o=t.getTileCoordCenter(e),a=zc(n);if(!Sc(a,o)){const l=Yt(a),c=Math.ceil((a[0]-o[0])/l);return o[0]+=l*c,t.getTileCoordForCoordAndZ(o,r)}return e}function Tk(t,e,n,r){r=r!==void 0?r:"top-left";const o=a0(t,e,n);return new s0({extent:t,origin:MC(t,r),resolutions:o,tileSize:n})}function Pk(t){const e=t||{},n=e.extent||an("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:a0(n,e.maxZoom,e.tileSize,e.maxResolution)};return new s0(r)}function a0(t,e,n,r){e=e!==void 0?e:RC,n=gi(n!==void 0?n:cm);const o=us(t),a=Yt(t);r=r>0?r:Math.max(a/n[0],o/n[1]);const l=e+1,c=new Array(l);for(let f=0;f<l;++f)c[f]=r/Math.pow(2,f);return c}function Ak(t,e,n,r){const o=zc(t);return Tk(o,e,n,r)}function zc(t){t=an(t);let e=t.getExtent();if(!e){const n=180*om.degrees/t.getMetersPerUnit();e=fm(-n,-n,n,n)}return e}const Fk=/\{z\}/g,Lk=/\{x\}/g,Ik=/\{y\}/g,Mk=/\{-y\}/g;function Rk(t,e,n,r,o){return t.replace(Fk,e.toString()).replace(Lk,n.toString()).replace(Ik,r.toString()).replace(Mk,function(){if(o===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(o-r).toString()})}function Ok(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const r=n[1].charCodeAt(0),o=n[2].charCodeAt(0);let a;for(a=r;a<=o;++a)e.push(t.replace(n[0],String.fromCharCode(a)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const r=parseInt(n[2],10);for(let o=parseInt(n[1],10);o<=r;o++)e.push(t.replace(n[0],o.toString()));return e}return e.push(t),e}function Vk(t,e){return function(n,r,o){if(!n)return;let a;const l=n[0];if(e){const c=e.getFullTileRange(l);c&&(a=c.getHeight()-1)}return Rk(t,l,n[1],n[2],a)}}function Dk(t,e){const n=t.length,r=new Array(n);for(let o=0;o<n;++o)r[o]=Vk(t[o],e);return Gk(r)}function Gk(t){return t.length===1?t[0]:function(e,n,r){if(!e)return;const o=yk(e),a=Wo(o,t.length);return t[a](e,n,r)}}class Bk extends OC{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const n=[256,256];this.tileGrid&&gi(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tmpSize=[0,0],this.key_=e.key||He(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,r,o,a){return Pt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:o0(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,r){const o=this.getTileGridForProjection(r),a=this.getTilePixelRatio(n),l=gi(o.getTileSize(e),this.tmpSize);return a==1?l:VC(l,a,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){const r=n!==void 0?n:this.getProjection(),o=n!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=kk(o,e,r)),wk(e,o)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Nk extends Or{constructor(e,n){super(e),this.tile=n}}const vu={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class $c extends Bk{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===$c.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const n=e.target,r=He(n),o=n.getState();let a;o==Oe.LOADING?(this.tileLoadingKeys_[r]=!0,a=vu.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],a=o==Oe.ERROR?vu.TILELOADERROR:o==Oe.LOADED?vu.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new Nk(a,n))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){const n=Ok(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;const n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Dk(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,r){}}class Uk extends $c{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Wk,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:um,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Go(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||Go(n,e)))return this.tileGrid;const r=He(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=o0(e)),this.tileGridForProjection[r]}createTile_(e,n,r,o,a,l){const c=[e,n,r],f=this.getTileCoordForTileUrlFunction(c,a),g=f?this.tileUrlFunction(f,o,a):void 0,h=new this.tileClass(c,g!==void 0?Oe.IDLE:Oe.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=l,h.addEventListener(_i.CHANGE,this.handleTileChange.bind(this)),h}getTile(e,n,r,o,a){const l=this.getProjection();if(!l||!a||Go(l,a))return this.getTileInternal(e,n,r,o,l||a);const c=[e,n,r],f=this.getKey(),g=this.getTileGridForProjection(l),h=this.getTileGridForProjection(a),m=this.getTileCoordForTileUrlFunction(c,a),v=new r0(l,g,a,h,c,m,this.getTilePixelRatio(o),this.getGutter(),(p,y,x,b)=>this.getTileInternal(p,y,x,b,l),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return v.key=f,v}getTileInternal(e,n,r,o,a){const l=this.getKey();return this.createTile_(e,n,r,o,a,l)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,n){const r=an(e);if(r){const o=He(r);o in this.tileGridForProjection||(this.tileGridForProjection[o]=n)}}}function Wk(t,e){t.getImage().src=e}class zk extends Uk{constructor(e){e=e||{};const n=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:Pk({extent:zc(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const $k='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class jk extends zk{constructor(e){e=e||{};let n;e.attributions!==void 0?n=e.attributions:n=[$k];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",o=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:o,wrapX:e.wrapX,zDirection:e.zDirection})}}var Xk=class extends DC{constructor(e){e=e||{},super();var n=this.input=e.input;n||(n=this.input=document.createElement("INPUT"),e.type&&n.setAttribute("type",e.type),e.min!==void 0&&n.setAttribute("min",e.min),e.max!==void 0&&n.setAttribute("max",e.max),e.step!==void 0&&n.setAttribute("step",e.step),e.parent&&e.parent.appendChild(n)),e.disabled&&(n.disabled=!0),e.checked!==void 0&&(n.checked=!!e.checked),e.val!==void 0&&(n.value=e.val),e.hidden&&n.classList.add("ol-input-hidden"),n.addEventListener("focus",function(){this.element&&this.element.classList.add("ol-focus")}.bind(this));var r;n.addEventListener("focusout",function(){this.element&&(r&&clearTimeout(r),r=setTimeout(function(){this.element.classList.remove("ol-focus")}.bind(this),0))}.bind(this))}_listenDrag(e,n){var r=function(o){this.moving=!0,this.element.classList.add("ol-moving");var a=function(l){l.type==="pointerup"&&(document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",a),document.removeEventListener("pointercancel",a),setTimeout(function(){this.moving=!1,this.element.classList.remove("ol-moving")}.bind(this))),l.target===e&&n(l),l.stopPropagation(),l.preventDefault()}.bind(this);document.addEventListener("pointermove",a,!1),document.addEventListener("pointerup",a,!1),document.addEventListener("pointercancel",a,!1),o.stopPropagation(),o.preventDefault()}.bind(this);e.addEventListener("mousedown",r,!1),e.addEventListener("touchstart",r,!1)}setValue(e){e!==void 0&&(this.input.value=e),this.input.dispatchEvent(new Event("change"))}getValue(){return this.input.value}getInputElement(){return this.input}},jc=class extends Xk{constructor(e){e=e||{},super(e);var n=this.element=document.createElement("LABEL");e.html instanceof Element?n.appendChild(e.html):e.html!==void 0&&(n.innerHTML=e.html),n.className=("ol-ext-check ol-ext-checkbox "+(e.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(n,this.input),n.appendChild(this.input),n.appendChild(document.createElement("SPAN")),e.after&&n.appendChild(document.createTextNode(e.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))}isChecked(){return this.input.checked}},Hk=class extends jc{constructor(e){e=e||{},super(e),this.element.className=("ol-ext-toggle-switch "+(e.className||"")).trim()}},qk=class extends jc{constructor(e){e=e||{},super(e),this.element.className=("ol-ext-check ol-ext-radio "+(e.className||"")).trim()}},fe={};fe.create=function(t,e){e=e||{};var n;if(t==="TEXT")n=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(n);else{n=document.createElement(t),/button/i.test(t)&&n.setAttribute("type","button");for(var r in e)switch(r){case"className":{e.className&&e.className.trim&&n.setAttribute("class",e.className.trim());break}case"text":{n.innerText=e.text;break}case"html":{e.html instanceof Element?n.appendChild(e.html):e.html!==void 0&&(n.innerHTML=e.html);break}case"parent":{e.parent&&e.parent.appendChild(n);break}case"options":{if(/select/i.test(t))for(var o in e.options)fe.create("OPTION",{html:o,value:e.options[o],parent:n});break}case"style":{fe.setStyle(n,e.style);break}case"change":case"click":{fe.addListener(n,r,e[r]);break}case"on":{for(var a in e.on)fe.addListener(n,a,e.on[a]);break}case"checked":{n.checked=!!e.checked;break}default:{n.setAttribute(r,e[r]);break}}}return n};fe.createSwitch=function(t){var e=fe.create("INPUT",{type:"checkbox",on:t.on,click:t.click,change:t.change,parent:t.parent}),n=Object.assign({input:e},t||{});return new Hk(n),e};fe.createCheck=function(t){var e=fe.create("INPUT",{name:t.name,type:t.type==="radio"?"radio":"checkbox",on:t.on,parent:t.parent}),n=Object.assign({input:e},t||{});return t.type==="radio"?new qk(n):new jc(n),e};fe.setHTML=function(t,e){e instanceof Element?t.appendChild(e):e!==void 0&&(t.innerHTML=e)};fe.appendText=function(t,e){t.appendChild(document.createTextNode(e||""))};fe.addListener=function(t,e,n,r){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(o){t.addEventListener(o,n,r)})};fe.removeListener=function(t,e,n){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(r){t.removeEventListener(r,n)})};fe.show=function(t){t.style.display=""};fe.hide=function(t){t.style.display="none"};fe.hidden=function(t){return fe.getStyle(t,"display")==="none"};fe.toggle=function(t){t.style.display=t.style.display==="none"?"":"none"};fe.setStyle=function(t,e){for(var n in e)switch(n){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":{typeof e[n]=="number"?t.style[n]=e[n]+"px":t.style[n]=e[n];break}default:t.style[n]=e[n]}};fe.getStyle=function(t,e){var n,r=(t.ownerDocument||document).defaultView;if(r&&r.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),n=r.getComputedStyle(t,null).getPropertyValue(e);else if(t.currentStyle&&(e=e.replace(/-(\w)/g,function(o,a){return a.toUpperCase()}),n=t.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(n)))return function(o){var a=t.style.left,l=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=o||0,o=t.style.pixelLeft+"px",t.style.left=a,t.runtimeStyle.left=l,o}(n);return/px$/.test(n)?parseInt(n):n};fe.outerHeight=function(t){return t.offsetHeight+fe.getStyle(t,"marginBottom")};fe.outerWidth=function(t){return t.offsetWidth+fe.getStyle(t,"marginLeft")};fe.offsetRect=function(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}};fe.getFixedOffset=function(t){var e={left:0,top:0},n=function(r){if(!r)return e;if(fe.getStyle(r,"position")==="absolute"&&fe.getStyle(r,"transform")!=="none"){var o=r.getBoundingClientRect();return e.left+=o.left,e.top+=o.top,e}return n(r.offsetParent)};return n(t.offsetParent)};fe.positionRect=function(t,e){var n=0,r=0,o=function(a){if(a)return n+=a.offsetLeft,r+=a.offsetTop,o(a.offsetParent);var l={top:t.offsetTop+r,left:t.offsetLeft+n};return e&&(l.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,l.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),l.bottom=l.top+t.offsetHeight,l.right=l.top+t.offsetWidth,l};return o(t.offsetParent)};fe.scrollDiv=function(t,e){e=e||{};var n=!1,r=0,o,a=0,l=typeof e.onmove=="function"?e.onmove:function(){},c=e.vertical?"screenY":"screenX",f=e.vertical?"scrollTop":"scrollLeft",g=!1,h,m,v=0,p=function(){L&&(v++,setTimeout(y))},y=function(){if(L){if(v--,v)return;var E=t.clientHeight,M=t.scrollHeight;h=E/M,L.style.height=h*100+"%",L.style.top=t.scrollTop/M*100+"%",T.style.height=E+"px",E>M-.5?T.classList.add("ol-100pc"):T.classList.remove("ol-100pc")}},x=function(E){E.target.classList.contains("ol-noscroll")||(g=!1,n=E[c],a=new Date,t.classList.add("ol-move"),E.preventDefault(),window.addEventListener("pointermove",b),fe.addListener(window,["pointerup","pointercancel"],k))},b=function(E){if(n!==!1){var M=(m?-1/h:1)*(n-E[c]);g=g||Math.round(M),t[f]+=M,o=new Date,o-a&&(r=(r+M/(o-a))/2),n=E[c],a=o,M&&l(!0)}else g=!0},S=function(E){var M=E>0?Math.min(100,E/2):Math.max(-100,E/2);E-=M,t[f]+=M,-1<E&&E<1?(g?setTimeout(function(){t.classList.remove("ol-move")}):t.classList.remove("ol-move"),g=!1,l(!1)):setTimeout(function(){S(E)},40)},T,L;if(e.vertical&&e.minibar){var P=function(E){t.removeEventListener("pointermove",P),t.parentNode.classList.add("ol-miniscroll"),L=fe.create("DIV"),T=fe.create("DIV",{className:"ol-scroll",html:L}),t.parentNode.insertBefore(T,t),L.addEventListener("pointerdown",function(M){m=!0,x(M)}),e.mousewheel&&(fe.addListener(T,["mousewheel","DOMMouseScroll","onmousewheel"],function(M){V(M)}),fe.addListener(L,["mousewheel","DOMMouseScroll","onmousewheel"],function(M){V(M)})),t.parentNode.addEventListener("pointerenter",p),window.addEventListener("resize",p),E!==!1&&p()};t.parentNode?P(!1):t.addEventListener("pointermove",P),t.addEventListener("scroll",function(){p()})}t.style["touch-action"]="none",t.style.overflow="hidden",t.classList.add("ol-scrolldiv"),fe.addListener(t,["pointerdown"],function(E){m=!1,x(E)}),t.addEventListener("click",function(E){t.classList.contains("ol-move")&&(E.preventDefault(),E.stopPropagation())},!0);var k=function(E){a=new Date-a,a>100||m?r=0:a>0&&(r=((r||0)+(n-E[c])/a)/2),S(e.animate===!1?0:r*200),n=!1,r=0,a=0,t.classList.contains("ol-move")?t.classList.remove("ol-hasClick"):(t.classList.add("ol-hasClick"),setTimeout(function(){t.classList.remove("ol-hasClick")},500)),m=!1,window.removeEventListener("pointermove",b),fe.removeListener(window,["pointerup","pointercancel"],k)},V=function(E){var M=Math.max(-1,Math.min(1,E.wheelDelta||-E.detail));return t.classList.add("ol-move"),t[f]-=M*30,t.classList.remove("ol-move"),!1};return e.mousewheel&&fe.addListener(t,["mousewheel","DOMMouseScroll","onmousewheel"],V),{refresh:p}};fe.dispatchEvent=function(t,e){var n;try{n=new CustomEvent(t)}catch{n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,{})}e.dispatchEvent(n)};fe.setCursor=function(t,e){t instanceof dm&&(t=t.getTargetElement()),!("ontouchstart"in window)&&t instanceof Element&&(t.style.cursor=e)};var Kk=class extends Vr{constructor(e){e=e||{};var n=document.createElement("DIV");super({element:n,target:e.target}),this.contentElement=fe.create("DIV",{click:function(){this.get("hideOnClick")&&this.hide()}.bind(this),parent:n});var r=(e.className||"")+" ol-notification";e.target||(r+=" ol-unselectable ol-control ol-collapsed"),n.setAttribute("class",r),this.set("closeBox",e.closeBox),this.set("hideOnClick",e.hideOnClick)}show(e,n){var r=this,o=this.element;e&&(e instanceof Node?(this.contentElement.innerHTML="",this.contentElement.appendChild(e)):this.contentElement.innerHTML=e,this.get("closeBox")?(this.contentElement.classList.add("ol-close"),fe.create("SPAN",{className:"closeBox",click:function(){this.hide()}.bind(this),parent:this.contentElement})):this.contentElement.classList.remove("ol-close")),this._listener&&(clearTimeout(this._listener),this._listener=null),o.classList.add("ol-collapsed"),this._listener=setTimeout(function(){o.classList.remove("ol-collapsed"),!n||n>=0?r._listener=setTimeout(function(){o.classList.add("ol-collapsed"),r._listener=null},n||3e3):r._listener=null},100)}hide(){this._listener&&(clearTimeout(this._listener),this._listener=null),this.element.classList.add("ol-collapsed")}toggle(e){this.element.classList.contains("ol-collapsed")?this.show(null,e):this.hide()}},gg=class extends Vr{constructor(e){e=e||{};var n=fe.create("DIV",{className:((e.className||"")+" ol-progress-bar ol-unselectable ol-control").trim()});super({element:n,target:e.target}),this._waiting=fe.create("DIV",{html:e.label||"",className:"ol-waiting",parent:n}),this._bar=fe.create("DIV",{className:"ol-bar",parent:n}),this._layerlistener=[],this.setLayers(e.layers)}setPercent(e){this._bar.style.width=(Number(e)||0)*100+"%",e===void 0?fe.hide(this.element):fe.show(this.element)}setLabel(e){this._waiting.innerHTML=e}setLayers(e){this._layerlistener.forEach(function(a){yr(a)}),this._layerlistener=[],this.setPercent();var n=0,r=0;if(e instanceof Ou&&(e=[e]),!(!e||!e.forEach)){var o;e.forEach(function(a){a instanceof Ou&&(this._layerlistener.push(a.getSource().on("tileloadstart",function(){n++,this.setPercent(r/n),clearTimeout(o)}.bind(this))),this._layerlistener.push(a.getSource().on(["tileloadend","tileloaderror"],function(){r++,r===n?(n=r=0,this.setPercent(1),o=setTimeout(this.setPercent.bind(this),300)):this.setPercent(r/n)}.bind(this))))}.bind(this))}}},Yk=function(t,e){var n=t.getView(),r=n.getProjection(),o=n.getCenter(),a=t.getPixelFromCoordinate(o);a[1]+=1;var l=t.getCoordinateFromPixel(a),c=hm(Pr(o,r,"EPSG:4326"),Pr(l,r,"EPSG:4326"));return c*=(e||96)/.0254,c},Zk=function(t,e,n){if(t&&e){var r=e;if(typeof e=="string"&&(e=e.replace(":","/").split("/"),r=e[1],r||(r=e[0]||""),r=r.replace(/[^\d]/g,""),r=parseInt(r),e[1])){var o=parseInt(e[0]);o&&(r/=o)}if(!r)return;var a=t.getView(),l=a.getProjection(),c=a.getCenter(),f=t.getPixelFromCoordinate(c);f[1]+=1;var g=t.getCoordinateFromPixel(f),h=hm(Pr(c,l,"EPSG:4326"),Pr(g,l,"EPSG:4326"));return h*=(n||96)/.0254,a.setResolution(a.getResolution()*r/h),r}},Jk=class extends Vr{constructor(e){e=e||{},e.typing===void 0&&(e.typing=300);var n=document.createElement("DIV"),r=(e.className||"")+" ol-scale";e.target||(r+=" ol-unselectable ol-control"),super({element:n,target:e.target}),this._input=document.createElement("INPUT"),this._input.value="-",n.setAttribute("class",r),e.editable===!1&&(this._input.readOnly=!0),n.appendChild(this._input),this._input.addEventListener("change",this.setScale.bind(this)),this.set("ppi",e.ppi||96)}setMap(e){this._listener&&yr(this._listener),this._listener=null,super.setMap(e),e&&(this._listener=e.on("moveend",this.getScale.bind(this)))}getScale(){var e=this.getMap();if(e){var n=Yk(e,this.get("ppi"));return this._input.value=this.formatScale(n),n}}formatScale(e){return e>100?e=Math.round(e/100)*100:e=Math.round(e),"1 / "+e.toLocaleString()}setScale(e){var n=this.getMap();n&&e&&(e.target&&(e=e.target.value),Zk(n,e,this.get("ppi"))),this.getScale()}};const{min:Qk,max:eT}=Math,Di=(t,e=0,n=1)=>Qk(eT(e,t),n),Xc=t=>{t._clipped=!1,t._unclipped=t.slice(0);for(let e=0;e<=3;e++)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]=Di(t[e],0,255)):e===3&&(t[e]=Di(t[e],0,1));return t},l0={};for(let t of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])l0[`[object ${t}]`]=t.toLowerCase();function Le(t){return l0[Object.prototype.toString.call(t)]||"object"}const ke=(t,e=null)=>t.length>=3?Array.prototype.slice.call(t):Le(t[0])=="object"&&e?e.split("").filter(n=>t[0][n]!==void 0).map(n=>t[0][n]):t[0].slice(0),Br=t=>{if(t.length<2)return null;const e=t.length-1;return Le(t[e])=="string"?t[e].toLowerCase():null},{PI:wa,min:u0,max:c0}=Math,ln=t=>Math.round(t*100)/100,qu=t=>Math.round(t*100)/100,jn=wa*2,_u=wa/3,tT=wa/180,nT=180/wa;function f0(t){return[...t.slice(0,3).reverse(),...t.slice(3)]}const Se={format:{},autodetect:[]};class Z{constructor(...e){const n=this;if(Le(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let r=Br(e),o=!1;if(!r){o=!0,Se.sorted||(Se.autodetect=Se.autodetect.sort((a,l)=>l.p-a.p),Se.sorted=!0);for(let a of Se.autodetect)if(r=a.test(...e),r)break}if(Se.format[r]){const a=Se.format[r].apply(null,o?e:e.slice(0,-1));n._rgb=Xc(a)}else throw new Error("unknown format: "+e);n._rgb.length===3&&n._rgb.push(1)}toString(){return Le(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const iT="3.1.2",_e=(...t)=>new Z(...t);_e.version=iT;const Ar={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},rT=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,sT=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,d0=t=>{if(t.match(rT)){(t.length===4||t.length===7)&&(t=t.substr(1)),t.length===3&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const e=parseInt(t,16),n=e>>16,r=e>>8&255,o=e&255;return[n,r,o,1]}if(t.match(sT)){(t.length===5||t.length===9)&&(t=t.substr(1)),t.length===4&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16),n=e>>24&255,r=e>>16&255,o=e>>8&255,a=Math.round((e&255)/255*100)/100;return[n,r,o,a]}throw new Error(`unknown hex color: ${t}`)},{round:Mo}=Math,h0=(...t)=>{let[e,n,r,o]=ke(t,"rgba"),a=Br(t)||"auto";o===void 0&&(o=1),a==="auto"&&(a=o<1?"rgba":"rgb"),e=Mo(e),n=Mo(n),r=Mo(r);let c="000000"+(e<<16|n<<8|r).toString(16);c=c.substr(c.length-6);let f="0"+Mo(o*255).toString(16);switch(f=f.substr(f.length-2),a.toLowerCase()){case"rgba":return`#${c}${f}`;case"argb":return`#${f}${c}`;default:return`#${c}`}};Z.prototype.name=function(){const t=h0(this._rgb,"rgb");for(let e of Object.keys(Ar))if(Ar[e]===t)return e.toLowerCase();return t};Se.format.named=t=>{if(t=t.toLowerCase(),Ar[t])return d0(Ar[t]);throw new Error("unknown color name: "+t)};Se.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&Le(t)==="string"&&Ar[t.toLowerCase()])return"named"}});Z.prototype.alpha=function(t,e=!1){return t!==void 0&&Le(t)==="number"?e?(this._rgb[3]=t,this):new Z([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]};Z.prototype.clipped=function(){return this._rgb._clipped||!1};const Fn={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},oT=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function qn(t){const e=oT.get(String(t).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+t);Fn.labWhitePoint=t,Fn.Xn=e[0],Fn.Zn=e[1]}function _s(){return Fn.labWhitePoint}const Hc=(...t)=>{t=ke(t,"lab");const[e,n,r]=t,[o,a,l]=aT(e,n,r),[c,f,g]=g0(o,a,l);return[c,f,g,t.length>3?t[3]:1]},aT=(t,e,n)=>{const{kE:r,kK:o,kKE:a,Xn:l,Yn:c,Zn:f}=Fn,g=(t+16)/116,h=.002*e+g,m=g-.005*n,v=h*h*h,p=m*m*m,y=v>r?v:(116*h-16)/o,x=t>a?Math.pow((t+16)/116,3):t/o,b=p>r?p:(116*m-16)/o,S=y*l,T=x*c,L=b*f;return[S,T,L]},pu=t=>{const e=Math.sign(t);return t=Math.abs(t),(t<=.0031308?t*12.92:1.055*Math.pow(t,1/2.4)-.055)*e},g0=(t,e,n)=>{const{MtxAdaptMa:r,MtxAdaptMaI:o,MtxXYZ2RGB:a,RefWhiteRGB:l,Xn:c,Yn:f,Zn:g}=Fn,h=c*r.m00+f*r.m10+g*r.m20,m=c*r.m01+f*r.m11+g*r.m21,v=c*r.m02+f*r.m12+g*r.m22,p=l.X*r.m00+l.Y*r.m10+l.Z*r.m20,y=l.X*r.m01+l.Y*r.m11+l.Z*r.m21,x=l.X*r.m02+l.Y*r.m12+l.Z*r.m22,b=(t*r.m00+e*r.m10+n*r.m20)*(p/h),S=(t*r.m01+e*r.m11+n*r.m21)*(y/m),T=(t*r.m02+e*r.m12+n*r.m22)*(x/v),L=b*o.m00+S*o.m10+T*o.m20,P=b*o.m01+S*o.m11+T*o.m21,k=b*o.m02+S*o.m12+T*o.m22,V=pu(L*a.m00+P*a.m10+k*a.m20),E=pu(L*a.m01+P*a.m11+k*a.m21),M=pu(L*a.m02+P*a.m12+k*a.m22);return[V*255,E*255,M*255]},qc=(...t)=>{const[e,n,r,...o]=ke(t,"rgb"),[a,l,c]=m0(e,n,r),[f,g,h]=lT(a,l,c);return[f,g,h,...o.length>0&&o[0]<1?[o[0]]:[]]};function lT(t,e,n){const{Xn:r,Yn:o,Zn:a,kE:l,kK:c}=Fn,f=t/r,g=e/o,h=n/a,m=f>l?Math.pow(f,1/3):(c*f+16)/116,v=g>l?Math.pow(g,1/3):(c*g+16)/116,p=h>l?Math.pow(h,1/3):(c*h+16)/116;return[116*v-16,500*(m-v),200*(v-p)]}function yu(t){const e=Math.sign(t);return t=Math.abs(t),(t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4))*e}const m0=(t,e,n)=>{t=yu(t/255),e=yu(e/255),n=yu(n/255);const{MtxRGB2XYZ:r,MtxAdaptMa:o,MtxAdaptMaI:a,Xn:l,Yn:c,Zn:f,As:g,Bs:h,Cs:m}=Fn;let v=t*r.m00+e*r.m10+n*r.m20,p=t*r.m01+e*r.m11+n*r.m21,y=t*r.m02+e*r.m12+n*r.m22;const x=l*o.m00+c*o.m10+f*o.m20,b=l*o.m01+c*o.m11+f*o.m21,S=l*o.m02+c*o.m12+f*o.m22;let T=v*o.m00+p*o.m10+y*o.m20,L=v*o.m01+p*o.m11+y*o.m21,P=v*o.m02+p*o.m12+y*o.m22;return T*=x/g,L*=b/h,P*=S/m,v=T*a.m00+L*a.m10+P*a.m20,p=T*a.m01+L*a.m11+P*a.m21,y=T*a.m02+L*a.m12+P*a.m22,[v,p,y]};Z.prototype.lab=function(){return qc(this._rgb)};const uT=(...t)=>new Z(...t,"lab");Object.assign(_e,{lab:uT,getLabWhitePoint:_s,setLabWhitePoint:qn});Se.format.lab=Hc;Se.autodetect.push({p:2,test:(...t)=>{if(t=ke(t,"lab"),Le(t)==="array"&&t.length===3)return"lab"}});Z.prototype.darken=function(t=1){const e=this,n=e.lab();return n[0]-=Fn.Kn*t,new Z(n,"lab").alpha(e.alpha(),!0)};Z.prototype.brighten=function(t=1){return this.darken(-t)};Z.prototype.darker=Z.prototype.darken;Z.prototype.brighter=Z.prototype.brighten;Z.prototype.get=function(t){const[e,n]=t.split("."),r=this[e]();if(n){const o=e.indexOf(n)-(e.substr(0,2)==="ok"?2:0);if(o>-1)return r[o];throw new Error(`unknown channel ${n} in mode ${e}`)}else return r};const{pow:cT}=Math,fT=1e-7,dT=20;Z.prototype.luminance=function(t,e="rgb"){if(t!==void 0&&Le(t)==="number"){if(t===0)return new Z([0,0,0,this._rgb[3]],"rgb");if(t===1)return new Z([255,255,255,this._rgb[3]],"rgb");let n=this.luminance(),r=dT;const o=(l,c)=>{const f=l.interpolate(c,.5,e),g=f.luminance();return Math.abs(t-g)<fT||!r--?f:g>t?o(l,f):o(f,c)},a=(n>t?o(new Z([0,0,0]),this):o(this,new Z([255,255,255]))).rgb();return new Z([...a,this._rgb[3]])}return hT(...this._rgb.slice(0,3))};const hT=(t,e,n)=>(t=bu(t),e=bu(e),n=bu(n),.2126*t+.7152*e+.0722*n),bu=t=>(t/=255,t<=.03928?t/12.92:cT((t+.055)/1.055,2.4)),Ft={},Fr=(t,e,n=.5,...r)=>{let o=r[0]||"lrgb";if(!Ft[o]&&!r.length&&(o=Object.keys(Ft)[0]),!Ft[o])throw new Error(`interpolation mode ${o} is not defined`);return Le(t)!=="object"&&(t=new Z(t)),Le(e)!=="object"&&(e=new Z(e)),Ft[o](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))};Z.prototype.mix=Z.prototype.interpolate=function(t,e=.5,...n){return Fr(this,t,e,...n)};Z.prototype.premultiply=function(t=!1){const e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new Z([e[0]*n,e[1]*n,e[2]*n,n],"rgb")};const{sin:gT,cos:mT}=Math,v0=(...t)=>{let[e,n,r]=ke(t,"lch");return isNaN(r)&&(r=0),r=r*tT,[e,mT(r)*n,gT(r)*n]},Kc=(...t)=>{t=ke(t,"lch");const[e,n,r]=t,[o,a,l]=v0(e,n,r),[c,f,g]=Hc(o,a,l);return[c,f,g,t.length>3?t[3]:1]},vT=(...t)=>{const e=f0(ke(t,"hcl"));return Kc(...e)},{sqrt:_T,atan2:pT,round:yT}=Math,_0=(...t)=>{const[e,n,r]=ke(t,"lab"),o=_T(n*n+r*r);let a=(pT(r,n)*nT+360)%360;return yT(o*1e4)===0&&(a=Number.NaN),[e,o,a]},Yc=(...t)=>{const[e,n,r,...o]=ke(t,"rgb"),[a,l,c]=qc(e,n,r),[f,g,h]=_0(a,l,c);return[f,g,h,...o.length>0&&o[0]<1?[o[0]]:[]]};Z.prototype.lch=function(){return Yc(this._rgb)};Z.prototype.hcl=function(){return f0(Yc(this._rgb))};const bT=(...t)=>new Z(...t,"lch"),wT=(...t)=>new Z(...t,"hcl");Object.assign(_e,{lch:bT,hcl:wT});Se.format.lch=Kc;Se.format.hcl=vT;["lch","hcl"].forEach(t=>Se.autodetect.push({p:2,test:(...e)=>{if(e=ke(e,t),Le(e)==="array"&&e.length===3)return t}}));Z.prototype.saturate=function(t=1){const e=this,n=e.lch();return n[1]+=Fn.Kn*t,n[1]<0&&(n[1]=0),new Z(n,"lch").alpha(e.alpha(),!0)};Z.prototype.desaturate=function(t=1){return this.saturate(-t)};Z.prototype.set=function(t,e,n=!1){const[r,o]=t.split("."),a=this[r]();if(o){const l=r.indexOf(o)-(r.substr(0,2)==="ok"?2:0);if(l>-1){if(Le(e)=="string")switch(e.charAt(0)){case"+":a[l]+=+e;break;case"-":a[l]+=+e;break;case"*":a[l]*=+e.substr(1);break;case"/":a[l]/=+e.substr(1);break;default:a[l]=+e}else if(Le(e)==="number")a[l]=e;else throw new Error("unsupported value for Color.set");const c=new Z(a,r);return n?(this._rgb=c._rgb,this):c}throw new Error(`unknown channel ${o} in mode ${r}`)}else return a};Z.prototype.tint=function(t=.5,...e){return Fr(this,"white",t,...e)};Z.prototype.shade=function(t=.5,...e){return Fr(this,"black",t,...e)};const xT=(t,e,n)=>{const r=t._rgb,o=e._rgb;return new Z(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"rgb")};Ft.rgb=xT;const{sqrt:wu,pow:cr}=Math,CT=(t,e,n)=>{const[r,o,a]=t._rgb,[l,c,f]=e._rgb;return new Z(wu(cr(r,2)*(1-n)+cr(l,2)*n),wu(cr(o,2)*(1-n)+cr(c,2)*n),wu(cr(a,2)*(1-n)+cr(f,2)*n),"rgb")};Ft.lrgb=CT;const ST=(t,e,n)=>{const r=t.lab(),o=e.lab();return new Z(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"lab")};Ft.lab=ST;const Nr=(t,e,n,r)=>{let o,a;r==="hsl"?(o=t.hsl(),a=e.hsl()):r==="hsv"?(o=t.hsv(),a=e.hsv()):r==="hcg"?(o=t.hcg(),a=e.hcg()):r==="hsi"?(o=t.hsi(),a=e.hsi()):r==="lch"||r==="hcl"?(r="hcl",o=t.hcl(),a=e.hcl()):r==="oklch"&&(o=t.oklch().reverse(),a=e.oklch().reverse());let l,c,f,g,h,m;(r.substr(0,1)==="h"||r==="oklch")&&([l,f,h]=o,[c,g,m]=a);let v,p,y,x;return!isNaN(l)&&!isNaN(c)?(c>l&&c-l>180?x=c-(l+360):c<l&&l-c>180?x=c+360-l:x=c-l,p=l+n*x):isNaN(l)?isNaN(c)?p=Number.NaN:(p=c,(h==1||h==0)&&r!="hsv"&&(v=g)):(p=l,(m==1||m==0)&&r!="hsv"&&(v=f)),v===void 0&&(v=f+n*(g-f)),y=h+n*(m-h),r==="oklch"?new Z([y,v,p],r):new Z([p,v,y],r)},p0=(t,e,n)=>Nr(t,e,n,"lch");Ft.lch=p0;Ft.hcl=p0;const ET=t=>{if(Le(t)=="number"&&t>=0&&t<=16777215){const e=t>>16,n=t>>8&255,r=t&255;return[e,n,r,1]}throw new Error("unknown num color: "+t)},kT=(...t)=>{const[e,n,r]=ke(t,"rgb");return(e<<16)+(n<<8)+r};Z.prototype.num=function(){return kT(this._rgb)};const TT=(...t)=>new Z(...t,"num");Object.assign(_e,{num:TT});Se.format.num=ET;Se.autodetect.push({p:5,test:(...t)=>{if(t.length===1&&Le(t[0])==="number"&&t[0]>=0&&t[0]<=16777215)return"num"}});const PT=(t,e,n)=>{const r=t.num(),o=e.num();return new Z(r+n*(o-r),"num")};Ft.num=PT;const{floor:AT}=Math,FT=(...t)=>{t=ke(t,"hcg");let[e,n,r]=t,o,a,l;r=r*255;const c=n*255;if(n===0)o=a=l=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const f=AT(e),g=e-f,h=r*(1-n),m=h+c*(1-g),v=h+c*g,p=h+c;switch(f){case 0:[o,a,l]=[p,v,h];break;case 1:[o,a,l]=[m,p,h];break;case 2:[o,a,l]=[h,p,v];break;case 3:[o,a,l]=[h,m,p];break;case 4:[o,a,l]=[v,h,p];break;case 5:[o,a,l]=[p,h,m];break}}return[o,a,l,t.length>3?t[3]:1]},LT=(...t)=>{const[e,n,r]=ke(t,"rgb"),o=u0(e,n,r),a=c0(e,n,r),l=a-o,c=l*100/255,f=o/(255-l)*100;let g;return l===0?g=Number.NaN:(e===a&&(g=(n-r)/l),n===a&&(g=2+(r-e)/l),r===a&&(g=4+(e-n)/l),g*=60,g<0&&(g+=360)),[g,c,f]};Z.prototype.hcg=function(){return LT(this._rgb)};const IT=(...t)=>new Z(...t,"hcg");_e.hcg=IT;Se.format.hcg=FT;Se.autodetect.push({p:1,test:(...t)=>{if(t=ke(t,"hcg"),Le(t)==="array"&&t.length===3)return"hcg"}});const MT=(t,e,n)=>Nr(t,e,n,"hcg");Ft.hcg=MT;const{cos:fr}=Math,RT=(...t)=>{t=ke(t,"hsi");let[e,n,r]=t,o,a,l;return isNaN(e)&&(e=0),isNaN(n)&&(n=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(l=(1-n)/3,o=(1+n*fr(jn*e)/fr(_u-jn*e))/3,a=1-(l+o)):e<2/3?(e-=1/3,o=(1-n)/3,a=(1+n*fr(jn*e)/fr(_u-jn*e))/3,l=1-(o+a)):(e-=2/3,a=(1-n)/3,l=(1+n*fr(jn*e)/fr(_u-jn*e))/3,o=1-(a+l)),o=Di(r*o*3),a=Di(r*a*3),l=Di(r*l*3),[o*255,a*255,l*255,t.length>3?t[3]:1]},{min:OT,sqrt:VT,acos:DT}=Math,GT=(...t)=>{let[e,n,r]=ke(t,"rgb");e/=255,n/=255,r/=255;let o;const a=OT(e,n,r),l=(e+n+r)/3,c=l>0?1-a/l:0;return c===0?o=NaN:(o=(e-n+(e-r))/2,o/=VT((e-n)*(e-n)+(e-r)*(n-r)),o=DT(o),r>n&&(o=jn-o),o/=jn),[o*360,c,l]};Z.prototype.hsi=function(){return GT(this._rgb)};const BT=(...t)=>new Z(...t,"hsi");_e.hsi=BT;Se.format.hsi=RT;Se.autodetect.push({p:2,test:(...t)=>{if(t=ke(t,"hsi"),Le(t)==="array"&&t.length===3)return"hsi"}});const NT=(t,e,n)=>Nr(t,e,n,"hsi");Ft.hsi=NT;const Ku=(...t)=>{t=ke(t,"hsl");const[e,n,r]=t;let o,a,l;if(n===0)o=a=l=r*255;else{const c=[0,0,0],f=[0,0,0],g=r<.5?r*(1+n):r+n-r*n,h=2*r-g,m=e/360;c[0]=m+1/3,c[1]=m,c[2]=m-1/3;for(let v=0;v<3;v++)c[v]<0&&(c[v]+=1),c[v]>1&&(c[v]-=1),6*c[v]<1?f[v]=h+(g-h)*6*c[v]:2*c[v]<1?f[v]=g:3*c[v]<2?f[v]=h+(g-h)*(2/3-c[v])*6:f[v]=h;[o,a,l]=[f[0]*255,f[1]*255,f[2]*255]}return t.length>3?[o,a,l,t[3]]:[o,a,l,1]},y0=(...t)=>{t=ke(t,"rgba");let[e,n,r]=t;e/=255,n/=255,r/=255;const o=u0(e,n,r),a=c0(e,n,r),l=(a+o)/2;let c,f;return a===o?(c=0,f=Number.NaN):c=l<.5?(a-o)/(a+o):(a-o)/(2-a-o),e==a?f=(n-r)/(a-o):n==a?f=2+(r-e)/(a-o):r==a&&(f=4+(e-n)/(a-o)),f*=60,f<0&&(f+=360),t.length>3&&t[3]!==void 0?[f,c,l,t[3]]:[f,c,l]};Z.prototype.hsl=function(){return y0(this._rgb)};const UT=(...t)=>new Z(...t,"hsl");_e.hsl=UT;Se.format.hsl=Ku;Se.autodetect.push({p:2,test:(...t)=>{if(t=ke(t,"hsl"),Le(t)==="array"&&t.length===3)return"hsl"}});const WT=(t,e,n)=>Nr(t,e,n,"hsl");Ft.hsl=WT;const{floor:zT}=Math,$T=(...t)=>{t=ke(t,"hsv");let[e,n,r]=t,o,a,l;if(r*=255,n===0)o=a=l=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const c=zT(e),f=e-c,g=r*(1-n),h=r*(1-n*f),m=r*(1-n*(1-f));switch(c){case 0:[o,a,l]=[r,m,g];break;case 1:[o,a,l]=[h,r,g];break;case 2:[o,a,l]=[g,r,m];break;case 3:[o,a,l]=[g,h,r];break;case 4:[o,a,l]=[m,g,r];break;case 5:[o,a,l]=[r,g,h];break}}return[o,a,l,t.length>3?t[3]:1]},{min:jT,max:XT}=Math,HT=(...t)=>{t=ke(t,"rgb");let[e,n,r]=t;const o=jT(e,n,r),a=XT(e,n,r),l=a-o;let c,f,g;return g=a/255,a===0?(c=Number.NaN,f=0):(f=l/a,e===a&&(c=(n-r)/l),n===a&&(c=2+(r-e)/l),r===a&&(c=4+(e-n)/l),c*=60,c<0&&(c+=360)),[c,f,g]};Z.prototype.hsv=function(){return HT(this._rgb)};const qT=(...t)=>new Z(...t,"hsv");_e.hsv=qT;Se.format.hsv=$T;Se.autodetect.push({p:2,test:(...t)=>{if(t=ke(t,"hsv"),Le(t)==="array"&&t.length===3)return"hsv"}});const KT=(t,e,n)=>Nr(t,e,n,"hsv");Ft.hsv=KT;function ra(t,e){let n=t.length;Array.isArray(t[0])||(t=[t]),Array.isArray(e[0])||(e=e.map(l=>[l]));let r=e[0].length,o=e[0].map((l,c)=>e.map(f=>f[c])),a=t.map(l=>o.map(c=>Array.isArray(l)?l.reduce((f,g,h)=>f+g*(c[h]||0),0):c.reduce((f,g)=>f+g*l,0)));return n===1&&(a=a[0]),r===1?a.map(l=>l[0]):a}const Zc=(...t)=>{t=ke(t,"lab");const[e,n,r,...o]=t,[a,l,c]=YT([e,n,r]),[f,g,h]=g0(a,l,c);return[f,g,h,...o.length>0&&o[0]<1?[o[0]]:[]]};function YT(t){var e=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],n=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],r=ra(n,t);return ra(e,r.map(o=>o**3))}const Jc=(...t)=>{const[e,n,r,...o]=ke(t,"rgb"),a=m0(e,n,r);return[...ZT(a),...o.length>0&&o[0]<1?[o[0]]:[]]};function ZT(t){const e=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],n=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],r=ra(e,t);return ra(n,r.map(o=>Math.cbrt(o)))}Z.prototype.oklab=function(){return Jc(this._rgb)};const JT=(...t)=>new Z(...t,"oklab");Object.assign(_e,{oklab:JT});Se.format.oklab=Zc;Se.autodetect.push({p:2,test:(...t)=>{if(t=ke(t,"oklab"),Le(t)==="array"&&t.length===3)return"oklab"}});const QT=(t,e,n)=>{const r=t.oklab(),o=e.oklab();return new Z(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"oklab")};Ft.oklab=QT;const eP=(t,e,n)=>Nr(t,e,n,"oklch");Ft.oklch=eP;const{pow:xu,sqrt:Cu,PI:Su,cos:mg,sin:vg,atan2:tP}=Math,nP=(t,e="lrgb",n=null)=>{const r=t.length;n||(n=Array.from(new Array(r)).map(()=>1));const o=r/n.reduce(function(m,v){return m+v});if(n.forEach((m,v)=>{n[v]*=o}),t=t.map(m=>new Z(m)),e==="lrgb")return iP(t,n);const a=t.shift(),l=a.get(e),c=[];let f=0,g=0;for(let m=0;m<l.length;m++)if(l[m]=(l[m]||0)*n[0],c.push(isNaN(l[m])?0:n[0]),e.charAt(m)==="h"&&!isNaN(l[m])){const v=l[m]/180*Su;f+=mg(v)*n[0],g+=vg(v)*n[0]}let h=a.alpha()*n[0];t.forEach((m,v)=>{const p=m.get(e);h+=m.alpha()*n[v+1];for(let y=0;y<l.length;y++)if(!isNaN(p[y]))if(c[y]+=n[v+1],e.charAt(y)==="h"){const x=p[y]/180*Su;f+=mg(x)*n[v+1],g+=vg(x)*n[v+1]}else l[y]+=p[y]*n[v+1]});for(let m=0;m<l.length;m++)if(e.charAt(m)==="h"){let v=tP(g/c[m],f/c[m])/Su*180;for(;v<0;)v+=360;for(;v>=360;)v-=360;l[m]=v}else l[m]=l[m]/c[m];return h/=r,new Z(l,e).alpha(h>.99999?1:h,!0)},iP=(t,e)=>{const n=t.length,r=[0,0,0,0];for(let o=0;o<t.length;o++){const a=t[o],l=e[o]/n,c=a._rgb;r[0]+=xu(c[0],2)*l,r[1]+=xu(c[1],2)*l,r[2]+=xu(c[2],2)*l,r[3]+=c[3]*l}return r[0]=Cu(r[0]),r[1]=Cu(r[1]),r[2]=Cu(r[2]),r[3]>.9999999&&(r[3]=1),new Z(Xc(r))},{pow:rP}=Math;function sa(t){let e="rgb",n=_e("#ccc"),r=0,o=[0,1],a=[],l=[0,0],c=!1,f=[],g=!1,h=0,m=1,v=!1,p={},y=!0,x=1;const b=function(E){if(E=E||["#fff","#000"],E&&Le(E)==="string"&&_e.brewer&&_e.brewer[E.toLowerCase()]&&(E=_e.brewer[E.toLowerCase()]),Le(E)==="array"){E.length===1&&(E=[E[0],E[0]]),E=E.slice(0);for(let M=0;M<E.length;M++)E[M]=_e(E[M]);a.length=0;for(let M=0;M<E.length;M++)a.push(M/(E.length-1))}return k(),f=E},S=function(E){if(c!=null){const M=c.length-1;let U=0;for(;U<M&&E>=c[U];)U++;return U-1}return 0};let T=E=>E,L=E=>E;const P=function(E,M){let U,N;if(M==null&&(M=!1),isNaN(E)||E===null)return n;M?N=E:c&&c.length>2?N=S(E)/(c.length-2):m!==h?N=(E-h)/(m-h):N=1,N=L(N),M||(N=T(N)),x!==1&&(N=rP(N,x)),N=l[0]+N*(1-l[0]-l[1]),N=Di(N,0,1);const q=Math.floor(N*1e4);if(y&&p[q])U=p[q];else{if(Le(f)==="array")for(let K=0;K<a.length;K++){const W=a[K];if(N<=W){U=f[K];break}if(N>=W&&K===a.length-1){U=f[K];break}if(N>W&&N<a[K+1]){N=(N-W)/(a[K+1]-W),U=_e.interpolate(f[K],f[K+1],N,e);break}}else Le(f)==="function"&&(U=f(N));y&&(p[q]=U)}return U};var k=()=>p={};b(t);const V=function(E){const M=_e(P(E));return g&&M[g]?M[g]():M};return V.classes=function(E){if(E!=null){if(Le(E)==="array")c=E,o=[E[0],E[E.length-1]];else{const M=_e.analyze(o);E===0?c=[M.min,M.max]:c=_e.limits(M,"e",E)}return V}return c},V.domain=function(E){if(!arguments.length)return o;h=E[0],m=E[E.length-1],a=[];const M=f.length;if(E.length===M&&h!==m)for(let U of Array.from(E))a.push((U-h)/(m-h));else{for(let U=0;U<M;U++)a.push(U/(M-1));if(E.length>2){const U=E.map((q,K)=>K/(E.length-1)),N=E.map(q=>(q-h)/(m-h));N.every((q,K)=>U[K]===q)||(L=q=>{if(q<=0||q>=1)return q;let K=0;for(;q>=N[K+1];)K++;const W=(q-N[K])/(N[K+1]-N[K]);return U[K]+W*(U[K+1]-U[K])})}}return o=[h,m],V},V.mode=function(E){return arguments.length?(e=E,k(),V):e},V.range=function(E,M){return b(E),V},V.out=function(E){return g=E,V},V.spread=function(E){return arguments.length?(r=E,V):r},V.correctLightness=function(E){return E==null&&(E=!0),v=E,k(),v?T=function(M){const U=P(0,!0).lab()[0],N=P(1,!0).lab()[0],q=U>N;let K=P(M,!0).lab()[0];const W=U+(N-U)*M;let Q=K-W,ie=0,le=1,ye=20;for(;Math.abs(Q)>.01&&ye-- >0;)(function(){return q&&(Q*=-1),Q<0?(ie=M,M+=(le-M)*.5):(le=M,M+=(ie-M)*.5),K=P(M,!0).lab()[0],Q=K-W})();return M}:T=M=>M,V},V.padding=function(E){return E!=null?(Le(E)==="number"&&(E=[E,E]),l=E,V):l},V.colors=function(E,M){arguments.length<2&&(M="hex");let U=[];if(arguments.length===0)U=f.slice(0);else if(E===1)U=[V(.5)];else if(E>1){const N=o[0],q=o[1]-N;U=sP(0,E).map(K=>V(N+K/(E-1)*q))}else{t=[];let N=[];if(c&&c.length>2)for(let q=1,K=c.length,W=1<=K;W?q<K:q>K;W?q++:q--)N.push((c[q-1]+c[q])*.5);else N=o;U=N.map(q=>V(q))}return _e[M]&&(U=U.map(N=>N[M]())),U},V.cache=function(E){return E!=null?(y=E,V):y},V.gamma=function(E){return E!=null?(x=E,V):x},V.nodata=function(E){return E!=null?(n=_e(E),V):n},V}function sP(t,e,n){let r=[],o=t<e,a=e;for(let l=t;o?l<a:l>a;o?l++:l--)r.push(l);return r}const oP=function(t){let e=[1,1];for(let n=1;n<t;n++){let r=[1];for(let o=1;o<=e.length;o++)r[o]=(e[o]||0)+e[o-1];e=r}return e},aP=function(t){let e,n,r,o;if(t=t.map(a=>new Z(a)),t.length===2)[n,r]=t.map(a=>a.lab()),e=function(a){const l=[0,1,2].map(c=>n[c]+a*(r[c]-n[c]));return new Z(l,"lab")};else if(t.length===3)[n,r,o]=t.map(a=>a.lab()),e=function(a){const l=[0,1,2].map(c=>(1-a)*(1-a)*n[c]+2*(1-a)*a*r[c]+a*a*o[c]);return new Z(l,"lab")};else if(t.length===4){let a;[n,r,o,a]=t.map(l=>l.lab()),e=function(l){const c=[0,1,2].map(f=>(1-l)*(1-l)*(1-l)*n[f]+3*(1-l)*(1-l)*l*r[f]+3*(1-l)*l*l*o[f]+l*l*l*a[f]);return new Z(c,"lab")}}else if(t.length>=5){let a,l,c;a=t.map(f=>f.lab()),c=t.length-1,l=oP(c),e=function(f){const g=1-f,h=[0,1,2].map(m=>a.reduce((v,p,y)=>v+l[y]*g**(c-y)*f**y*p[m],0));return new Z(h,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e},lP=t=>{const e=aP(t);return e.scale=()=>sa(e),e},{round:b0}=Math;Z.prototype.rgb=function(t=!0){return t===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(b0)};Z.prototype.rgba=function(t=!0){return this._rgb.slice(0,4).map((e,n)=>n<3?t===!1?e:b0(e):e)};const uP=(...t)=>new Z(...t,"rgb");Object.assign(_e,{rgb:uP});Se.format.rgb=(...t)=>{const e=ke(t,"rgba");return e[3]===void 0&&(e[3]=1),e};Se.autodetect.push({p:3,test:(...t)=>{if(t=ke(t,"rgba"),Le(t)==="array"&&(t.length===3||t.length===4&&Le(t[3])=="number"&&t[3]>=0&&t[3]<=1))return"rgb"}});const wn=(t,e,n)=>{if(!wn[n])throw new Error("unknown blend mode "+n);return wn[n](t,e)},wi=t=>(e,n)=>{const r=_e(n).rgb(),o=_e(e).rgb();return _e.rgb(t(r,o))},xi=t=>(e,n)=>{const r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r},cP=t=>t,fP=(t,e)=>t*e/255,dP=(t,e)=>t>e?e:t,hP=(t,e)=>t>e?t:e,gP=(t,e)=>255*(1-(1-t/255)*(1-e/255)),mP=(t,e)=>e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255)),vP=(t,e)=>255*(1-(1-e/255)/(t/255)),_P=(t,e)=>t===255?255:(t=255*(e/255)/(1-t/255),t>255?255:t);wn.normal=wi(xi(cP));wn.multiply=wi(xi(fP));wn.screen=wi(xi(gP));wn.overlay=wi(xi(mP));wn.darken=wi(xi(dP));wn.lighten=wi(xi(hP));wn.dodge=wi(xi(_P));wn.burn=wi(xi(vP));const{pow:pP,sin:yP,cos:bP}=Math;function wP(t=300,e=-1.5,n=1,r=1,o=[0,1]){let a=0,l;Le(o)==="array"?l=o[1]-o[0]:(l=0,o=[o,o]);const c=function(f){const g=jn*((t+120)/360+e*f),h=pP(o[0]+l*f,r),v=(a!==0?n[0]+f*a:n)*h*(1-h)/2,p=bP(g),y=yP(g),x=h+v*(-.14861*p+1.78277*y),b=h+v*(-.29227*p-.90649*y),S=h+v*(1.97294*p);return _e(Xc([x*255,b*255,S*255,1]))};return c.start=function(f){return f==null?t:(t=f,c)},c.rotations=function(f){return f==null?e:(e=f,c)},c.gamma=function(f){return f==null?r:(r=f,c)},c.hue=function(f){return f==null?n:(n=f,Le(n)==="array"?(a=n[1]-n[0],a===0&&(n=n[1])):a=0,c)},c.lightness=function(f){return f==null?o:(Le(f)==="array"?(o=f,l=f[1]-f[0]):(o=[f,f],l=0),c)},c.scale=()=>_e.scale(c),c.hue(n),c}const xP="0123456789abcdef",{floor:CP,random:SP}=Math,EP=()=>{let t="#";for(let e=0;e<6;e++)t+=xP.charAt(CP(SP()*16));return new Z(t,"hex")},{log:_g,pow:kP,floor:TP,abs:PP}=Math;function w0(t,e=null){const n={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Le(t)==="object"&&(t=Object.values(t)),t.forEach(r=>{e&&Le(r)==="object"&&(r=r[e]),r!=null&&!isNaN(r)&&(n.values.push(r),n.sum+=r,r<n.min&&(n.min=r),r>n.max&&(n.max=r),n.count+=1)}),n.domain=[n.min,n.max],n.limits=(r,o)=>x0(n,r,o),n}function x0(t,e="equal",n=7){Le(t)=="array"&&(t=w0(t));const{min:r,max:o}=t,a=t.values.sort((c,f)=>c-f);if(n===1)return[r,o];const l=[];if(e.substr(0,1)==="c"&&(l.push(r),l.push(o)),e.substr(0,1)==="e"){l.push(r);for(let c=1;c<n;c++)l.push(r+c/n*(o-r));l.push(o)}else if(e.substr(0,1)==="l"){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");const c=Math.LOG10E*_g(r),f=Math.LOG10E*_g(o);l.push(r);for(let g=1;g<n;g++)l.push(kP(10,c+g/n*(f-c)));l.push(o)}else if(e.substr(0,1)==="q"){l.push(r);for(let c=1;c<n;c++){const f=(a.length-1)*c/n,g=TP(f);if(g===f)l.push(a[g]);else{const h=f-g;l.push(a[g]*(1-h)+a[g+1]*h)}}l.push(o)}else if(e.substr(0,1)==="k"){let c;const f=a.length,g=new Array(f),h=new Array(n);let m=!0,v=0,p=null;p=[],p.push(r);for(let b=1;b<n;b++)p.push(r+b/n*(o-r));for(p.push(o);m;){for(let S=0;S<n;S++)h[S]=0;for(let S=0;S<f;S++){const T=a[S];let L=Number.MAX_VALUE,P;for(let k=0;k<n;k++){const V=PP(p[k]-T);V<L&&(L=V,P=k),h[P]++,g[S]=P}}const b=new Array(n);for(let S=0;S<n;S++)b[S]=null;for(let S=0;S<f;S++)c=g[S],b[c]===null?b[c]=a[S]:b[c]+=a[S];for(let S=0;S<n;S++)b[S]*=1/h[S];m=!1;for(let S=0;S<n;S++)if(b[S]!==p[S]){m=!0;break}p=b,v++,v>200&&(m=!1)}const y={};for(let b=0;b<n;b++)y[b]=[];for(let b=0;b<f;b++)c=g[b],y[c].push(a[b]);let x=[];for(let b=0;b<n;b++)x.push(y[b][0]),x.push(y[b][y[b].length-1]);x=x.sort((b,S)=>b-S),l.push(x[0]);for(let b=1;b<x.length;b+=2){const S=x[b];!isNaN(S)&&l.indexOf(S)===-1&&l.push(S)}}return l}const AP=(t,e)=>{t=new Z(t),e=new Z(e);const n=t.luminance(),r=e.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const pg=.027,FP=5e-4,LP=.1,yg=1.14,Ro=.022,bg=1.414,IP=(t,e)=>{t=new Z(t),e=new Z(e),t.alpha()<1&&(t=Fr(e,t,t.alpha(),"rgb"));const n=wg(...t.rgb()),r=wg(...e.rgb()),o=n>=Ro?n:n+Math.pow(Ro-n,bg),a=r>=Ro?r:r+Math.pow(Ro-r,bg),l=Math.pow(a,.56)-Math.pow(o,.57),c=Math.pow(a,.65)-Math.pow(o,.62),f=Math.abs(a-o)<FP?0:o<a?l*yg:c*yg;return(Math.abs(f)<LP?0:f>0?f-pg:f+pg)*100};function wg(t,e,n){return .2126729*Math.pow(t/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(n/255,2.4)}const{sqrt:zn,pow:ft,min:MP,max:RP,atan2:xg,abs:Cg,cos:Oo,sin:Sg,exp:OP,PI:Eg}=Math;function VP(t,e,n=1,r=1,o=1){var a=function(J){return 360*J/(2*Eg)},l=function(J){return 2*Eg*J/360};t=new Z(t),e=new Z(e);const[c,f,g]=Array.from(t.lab()),[h,m,v]=Array.from(e.lab()),p=(c+h)/2,y=zn(ft(f,2)+ft(g,2)),x=zn(ft(m,2)+ft(v,2)),b=(y+x)/2,S=.5*(1-zn(ft(b,7)/(ft(b,7)+ft(25,7)))),T=f*(1+S),L=m*(1+S),P=zn(ft(T,2)+ft(g,2)),k=zn(ft(L,2)+ft(v,2)),V=(P+k)/2,E=a(xg(g,T)),M=a(xg(v,L)),U=E>=0?E:E+360,N=M>=0?M:M+360,q=Cg(U-N)>180?(U+N+360)/2:(U+N)/2,K=1-.17*Oo(l(q-30))+.24*Oo(l(2*q))+.32*Oo(l(3*q+6))-.2*Oo(l(4*q-63));let W=N-U;W=Cg(W)<=180?W:N<=U?W+360:W-360,W=2*zn(P*k)*Sg(l(W)/2);const Q=h-c,ie=k-P,le=1+.015*ft(p-50,2)/zn(20+ft(p-50,2)),ye=1+.045*V,ce=1+.015*V*K,pe=30*OP(-ft((q-275)/25,2)),R=-(2*zn(ft(V,7)/(ft(V,7)+ft(25,7))))*Sg(2*l(pe)),B=zn(ft(Q/(n*le),2)+ft(ie/(r*ye),2)+ft(W/(o*ce),2)+R*(ie/(r*ye))*(W/(o*ce)));return RP(0,MP(100,B))}function DP(t,e,n="lab"){t=new Z(t),e=new Z(e);const r=t.get(n),o=e.get(n);let a=0;for(let l in r){const c=(r[l]||0)-(o[l]||0);a+=c*c}return Math.sqrt(a)}const GP=(...t)=>{try{return new Z(...t),!0}catch{return!1}},BP={cool(){return sa([_e.hsl(180,1,.9),_e.hsl(250,.7,.4)])},hot(){return sa(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Yu={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},C0=Object.keys(Yu),kg=new Map(C0.map(t=>[t.toLowerCase(),t])),NP=typeof Proxy=="function"?new Proxy(Yu,{get(t,e){const n=e.toLowerCase();if(kg.has(n))return t[kg.get(n)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(C0)}}):Yu,UP=(...t)=>{t=ke(t,"cmyk");const[e,n,r,o]=t,a=t.length>4?t[4]:1;return o===1?[0,0,0,a]:[e>=1?0:255*(1-e)*(1-o),n>=1?0:255*(1-n)*(1-o),r>=1?0:255*(1-r)*(1-o),a]},{max:Tg}=Math,WP=(...t)=>{let[e,n,r]=ke(t,"rgb");e=e/255,n=n/255,r=r/255;const o=1-Tg(e,Tg(n,r)),a=o<1?1/(1-o):0,l=(1-e-o)*a,c=(1-n-o)*a,f=(1-r-o)*a;return[l,c,f,o]};Z.prototype.cmyk=function(){return WP(this._rgb)};const zP=(...t)=>new Z(...t,"cmyk");Object.assign(_e,{cmyk:zP});Se.format.cmyk=UP;Se.autodetect.push({p:2,test:(...t)=>{if(t=ke(t,"cmyk"),Le(t)==="array"&&t.length===4)return"cmyk"}});const $P=(...t)=>{const e=ke(t,"hsla");let n=Br(t)||"lsa";return e[0]=ln(e[0]||0)+"deg",e[1]=ln(e[1]*100)+"%",e[2]=ln(e[2]*100)+"%",n==="hsla"||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),n="hsla"):e.length=3,`${n.substr(0,3)}(${e.join(" ")})`},jP=(...t)=>{const e=ke(t,"lab");let n=Br(t)||"lab";return e[0]=ln(e[0])+"%",e[1]=ln(e[1]),e[2]=ln(e[2]),n==="laba"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`},XP=(...t)=>{const e=ke(t,"lch");let n=Br(t)||"lab";return e[0]=ln(e[0])+"%",e[1]=ln(e[1]),e[2]=isNaN(e[2])?"none":ln(e[2])+"deg",n==="lcha"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`},HP=(...t)=>{const e=ke(t,"lab");return e[0]=ln(e[0]*100)+"%",e[1]=qu(e[1]),e[2]=qu(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`},S0=(...t)=>{const[e,n,r,...o]=ke(t,"rgb"),[a,l,c]=Jc(e,n,r),[f,g,h]=_0(a,l,c);return[f,g,h,...o.length>0&&o[0]<1?[o[0]]:[]]},qP=(...t)=>{const e=ke(t,"lch");return e[0]=ln(e[0]*100)+"%",e[1]=qu(e[1]),e[2]=isNaN(e[2])?"none":ln(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`},{round:Eu}=Math,KP=(...t)=>{const e=ke(t,"rgba");let n=Br(t)||"rgb";if(n.substr(0,3)==="hsl")return $P(y0(e),n);if(n.substr(0,3)==="lab"){const r=_s();qn("d50");const o=jP(qc(e),n);return qn(r),o}if(n.substr(0,3)==="lch"){const r=_s();qn("d50");const o=XP(Yc(e),n);return qn(r),o}return n.substr(0,5)==="oklab"?HP(Jc(e)):n.substr(0,5)==="oklch"?qP(S0(e)):(e[0]=Eu(e[0]),e[1]=Eu(e[1]),e[2]=Eu(e[2]),(n==="rgba"||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),n="rgba"),`${n.substr(0,3)}(${e.slice(0,n==="rgb"?3:4).join(" ")})`)},E0=(...t)=>{t=ke(t,"lch");const[e,n,r,...o]=t,[a,l,c]=v0(e,n,r),[f,g,h]=Zc(a,l,c);return[f,g,h,...o.length>0&&o[0]<1?[o[0]]:[]]},Zn=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,yn=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,oa=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,un=/\s*/.source,Ur=/\s+/.source,Qc=/\s*,\s*/.source,xa=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,Wr=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,k0=new RegExp("^rgba?\\("+un+[Zn,Zn,Zn].join(Ur)+Wr+"\\)$"),T0=new RegExp("^rgb\\("+un+[Zn,Zn,Zn].join(Qc)+un+"\\)$"),P0=new RegExp("^rgba\\("+un+[Zn,Zn,Zn,yn].join(Qc)+un+"\\)$"),A0=new RegExp("^hsla?\\("+un+[xa,oa,oa].join(Ur)+Wr+"\\)$"),F0=new RegExp("^hsl?\\("+un+[xa,oa,oa].join(Qc)+un+"\\)$"),L0=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,I0=new RegExp("^lab\\("+un+[yn,yn,yn].join(Ur)+Wr+"\\)$"),M0=new RegExp("^lch\\("+un+[yn,yn,xa].join(Ur)+Wr+"\\)$"),R0=new RegExp("^oklab\\("+un+[yn,yn,yn].join(Ur)+Wr+"\\)$"),O0=new RegExp("^oklch\\("+un+[yn,yn,xa].join(Ur)+Wr+"\\)$"),{round:V0}=Math,dr=t=>t.map((e,n)=>n<=2?Di(V0(e),0,255):e),dt=(t,e=0,n=100,r=!1)=>(typeof t=="string"&&t.endsWith("%")&&(t=parseFloat(t.substring(0,t.length-1))/100,r?t=e+(t+1)*.5*(n-e):t=e+t*(n-e)),+t),Rt=(t,e)=>t==="none"?e:t,ef=t=>{if(t=t.toLowerCase().trim(),t==="transparent")return[0,0,0,0];let e;if(Se.format.named)try{return Se.format.named(t)}catch{}if((e=t.match(k0))||(e=t.match(T0))){let n=e.slice(1,4);for(let o=0;o<3;o++)n[o]=+dt(Rt(n[o],0),0,255);n=dr(n);const r=e[4]!==void 0?+dt(e[4],0,1):1;return n[3]=r,n}if(e=t.match(P0)){const n=e.slice(1,5);for(let r=0;r<4;r++)n[r]=+dt(n[r],0,255);return n}if((e=t.match(A0))||(e=t.match(F0))){const n=e.slice(1,4);n[0]=+Rt(n[0].replace("deg",""),0),n[1]=+dt(Rt(n[1],0),0,100)*.01,n[2]=+dt(Rt(n[2],0),0,100)*.01;const r=dr(Ku(n)),o=e[4]!==void 0?+dt(e[4],0,1):1;return r[3]=o,r}if(e=t.match(L0)){const n=e.slice(1,4);n[1]*=.01,n[2]*=.01;const r=Ku(n);for(let o=0;o<3;o++)r[o]=V0(r[o]);return r[3]=+e[4],r}if(e=t.match(I0)){const n=e.slice(1,4);n[0]=dt(Rt(n[0],0),0,100),n[1]=dt(Rt(n[1],0),-125,125,!0),n[2]=dt(Rt(n[2],0),-125,125,!0);const r=_s();qn("d50");const o=dr(Hc(n));qn(r);const a=e[4]!==void 0?+dt(e[4],0,1):1;return o[3]=a,o}if(e=t.match(M0)){const n=e.slice(1,4);n[0]=dt(n[0],0,100),n[1]=dt(Rt(n[1],0),0,150,!1),n[2]=+Rt(n[2].replace("deg",""),0);const r=_s();qn("d50");const o=dr(Kc(n));qn(r);const a=e[4]!==void 0?+dt(e[4],0,1):1;return o[3]=a,o}if(e=t.match(R0)){const n=e.slice(1,4);n[0]=dt(Rt(n[0],0),0,1),n[1]=dt(Rt(n[1],0),-.4,.4,!0),n[2]=dt(Rt(n[2],0),-.4,.4,!0);const r=dr(Zc(n)),o=e[4]!==void 0?+dt(e[4],0,1):1;return r[3]=o,r}if(e=t.match(O0)){const n=e.slice(1,4);n[0]=dt(Rt(n[0],0),0,1),n[1]=dt(Rt(n[1],0),0,.4,!1),n[2]=+Rt(n[2].replace("deg",""),0);const r=dr(E0(n)),o=e[4]!==void 0?+dt(e[4],0,1):1;return r[3]=o,r}};ef.test=t=>k0.test(t)||A0.test(t)||I0.test(t)||M0.test(t)||R0.test(t)||O0.test(t)||T0.test(t)||P0.test(t)||F0.test(t)||L0.test(t)||t==="transparent";Z.prototype.css=function(t){return KP(this._rgb,t)};const YP=(...t)=>new Z(...t,"css");_e.css=YP;Se.format.css=ef;Se.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&Le(t)==="string"&&ef.test(t))return"css"}});Se.format.gl=(...t)=>{const e=ke(t,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};const ZP=(...t)=>new Z(...t,"gl");_e.gl=ZP;Z.prototype.gl=function(){const t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};Z.prototype.hex=function(t){return h0(this._rgb,t)};const JP=(...t)=>new Z(...t,"hex");_e.hex=JP;Se.format.hex=d0;Se.autodetect.push({p:4,test:(t,...e)=>{if(!e.length&&Le(t)==="string"&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});const{log:Vo}=Math,D0=t=>{const e=t/100;let n,r,o;return e<66?(n=255,r=e<6?0:-155.25485562709179-.44596950469579133*(r=e-2)+104.49216199393888*Vo(r),o=e<20?0:-254.76935184120902+.8274096064007395*(o=e-10)+115.67994401066147*Vo(o)):(n=351.97690566805693+.114206453784165*(n=e-55)-40.25366309332127*Vo(n),r=325.4494125711974+.07943456536662342*(r=e-50)-28.0852963507957*Vo(r),o=255),[n,r,o,1]},{round:QP}=Math,eA=(...t)=>{const e=ke(t,"rgb"),n=e[0],r=e[2];let o=1e3,a=4e4;const l=.4;let c;for(;a-o>l;){c=(a+o)*.5;const f=D0(c);f[2]/f[0]>=r/n?a=c:o=c}return QP(c)};Z.prototype.temp=Z.prototype.kelvin=Z.prototype.temperature=function(){return eA(this._rgb)};const ku=(...t)=>new Z(...t,"temp");Object.assign(_e,{temp:ku,kelvin:ku,temperature:ku});Se.format.temp=Se.format.kelvin=Se.format.temperature=D0;Z.prototype.oklch=function(){return S0(this._rgb)};const tA=(...t)=>new Z(...t,"oklch");Object.assign(_e,{oklch:tA});Se.format.oklch=E0;Se.autodetect.push({p:2,test:(...t)=>{if(t=ke(t,"oklch"),Le(t)==="array"&&t.length===3)return"oklch"}});Object.assign(_e,{analyze:w0,average:nP,bezier:lP,blend:wn,brewer:NP,Color:Z,colors:Ar,contrast:AP,contrastAPCA:IP,cubehelix:wP,deltaE:VP,distance:DP,input:Se,interpolate:Fr,limits:x0,mix:Fr,random:EP,scale:sa,scales:BP,valid:GP});class nA{colorSet;fontFace;pointSize;pointFillColor;pointFillOpacity;pointStrokeColor;pointStrokeOpacity;pointStrokeWidth;fillColor;fillOpacity;strokeColor;strokeOpacity;strokeWidth;textColor;textStyle;textOpacity;textStrokeColor;textStrokeOpacity;textStrokeWidth;iconOpacity;iconTextStyle;gridColor;gridOpacity;gridTextStyle;constructor(e="light-blue",n="'Roboto', 'Noto Sans JP','Noto Color Emoji', sans-serif"){this.colorSet=sE[i0.camelCase(e)],this.fontFace=n}getStyle(){return new Xn({fill:new mn({color:_e(this.fillColor).alpha(this.fillOpacity).css()}),stroke:new Kt({color:_e(this.strokeColor).alpha(this.strokeOpacity).css(),width:this.strokeWidth}),image:new Vu({radius:this.pointSize,stroke:new Kt({color:_e(this.pointStrokeColor).alpha(this.pointStrokeOpacity).css(),width:this.pointStrokeWidth}),fill:new mn({color:_e(this.pointFillColor).alpha(this.pointFillOpacity).css()})}),text:new yo({font:this.textStyle,fill:new mn({color:_e(this.textColor).alpha(this.textOpacity).css()}),stroke:new Kt({color:_e(this.textStrokeColor).alpha(this.textStrokeOpacity).css(),width:this.textStrokeWidth}),overflow:!0,text:""})})}getIconStyle(e){return new Xn({image:new gm({anchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",src:`./img/markers/${e}.png`,scale:.75,opacity:this.iconOpacity}),text:new yo({offsetX:0,offsetY:10,font:this.textStyle,fill:new mn({color:_e(this.textColor).alpha(this.textOpacity).css()}),stroke:new Kt({color:_e(this.textStrokeColor).alpha(this.textStrokeOpacity).css(),width:this.textStrokeWidth}),overflow:!0,text:""})})}getLabelStyle(e){return new Xn({text:new yo({font:this.textStyle,fill:new mn({color:_e(this.textColor).alpha(this.textOpacity).css()}),stroke:new Kt({color:_e(this.textStrokeColor).alpha(this.textStrokeOpacity).css(),width:this.textStrokeWidth}),overflow:!0,offsetY:e,text:""})})}getGridStyle(){return new Xn({stroke:new Kt({color:_e(this.gridColor).alpha(this.gridOpacity).css()}),text:new yo({font:this.gridTextStyle,fill:new mn({color:_e(this.colorSet.accent2).css()}),stroke:new Kt({color:_e(this.colorSet.lighten1).alpha(this.textStrokeOpacity).css(),width:1})})})}}class Ni extends nA{pointFillColor=this.colorSet.accent1||this.colorSet.lighten4;pointFillOpacity=.35;pointStrokeColor=this.colorSet.accent3||this.colorSet.lighten3;pointStrokeOpacity=1;pointStrokeWidth=1;pointSize=5;pointTextStyle=`400 0.3rem ${this.fontFace}`;fillColor=this.colorSet.accent1||this.colorSet.lighten4;fillOpacity=.25;strokeColor=this.colorSet.accent3||this.colorSet.lighten3;strokeOpacity=.75;strokeWidth=1;textColor=this.colorSet.darken4;textStyle=`600 1rem ${this.fontFace}`;textOpacity=1;textStrokeColor=this.colorSet.lighten5;textStrokeOpacity=.5;textStrokeWidth=2.5;iconOpacity=1;iconTextStyle=`500 0.75rem ${this.fontFace}`;gridColor=this.colorSet.base;gridOpacity=.5;gridTextStyle=`900 1.5rem ${this.fontFace}`}class ks extends Ni{fillOpacity=0;textStrokeOpacity=.75;textStyle=`600 1.5rem ${this.fontFace}`}class iA extends ks{pointFillColor=this.colorSet.accent4||this.colorSet.base;pointFillOpacity=1;pointStrokeColor=this.colorSet.accent2||this.colorSet.lighten4;pointStrokeOpacity=1;pointStrokeWidth=2;fillColor=this.colorSet.accent1||this.colorSet.lighten5;fillOpacity=.25;strokeWidth=3;textStrokeColor=this.colorSet.lighten5;textStrokeOpacity=1}const lt={ACTIVE:"active",INACTIVE:"inactive",HOVER:"hover",SELECTED:"selected"};class Tu extends Ni{}class rA extends Ni{pointFillOpacity=.5;pointStrokeOpacity=1;fillOpacity=.5;textOpacity=1;strokeOpacity=1;textStrokeOpacity=1}class Pg extends Ni{pointFillOpacity=.05;pointStrokeOpacity=.25;fillOpacity=.05;strokeOpacity=.25;iconOpacity=.5;textOpacity=.5;textStrokeOpacity=.25}class sA extends ks{}class oA extends ks{textStrokeOpacity=1;textOpacity=1;fillOpacity=.1}class aA extends ks{fillOpacity=0;strokeOpacity=.25;textOpacity=.5;textStrokeOpacity=.25}class Ag extends Ni{pointFillColor=this.colorSet.accent4||this.colorSet.base;pointFillOpacity=1;pointStrokeColor=this.colorSet.accent2||this.colorSet.lighten4;pointStrokeOpacity=1;pointStrokeWidth=2;fillColor=this.colorSet.accent1||this.colorSet.lighten5;fillOpacity=.5;strokeWidth=3;textStrokeColor=this.colorSet.lighten5;textStrokeOpacity=1}class Do{static fontFace="'Roboto', 'Noto Sans JP','Noto Color Emoji', sans-serif";static getStyle(e,n=lt.ACTIVE){let r;switch(n){case lt.INACTIVE:r=new Pg(e,this.fontFace);break;case lt.SELECTED:r=new Ag(e,this.fontFace);break;case lt.HOVER:r=new rA(e,this.fontFace);break;case lt.ACTIVE:r=new Tu(e,this.fontFace);break;default:r=new Ni(e,this.fontFace)}return r.getStyle(e)}static getSectionPolygonStyle(e,n=lt.ACTIVE){let r;switch(n){case lt.INACTIVE:r=new aA(e,this.fontFace);break;case lt.SELECTED:r=new iA(e,this.fontFace);break;case lt.HOVER:r=new oA(e,this.fontFace);break;case lt.ACTIVE:r=new sA(e,this.fontFace);break;default:r=new ks(e,this.fontFace)}return r.getStyle(e)}static getIconStyle(e="pin",n="blue-grey",r=lt.ACTIVE){let o;switch(r){case lt.INACTIVE:o=new Pg(n,this.fontFace);break;case lt.SELECTED:o=new Ag(n,this.fontFace);break;case lt.ACTIVE:o=new Tu(n,this.fontFace);break;default:o=new Tu(n,this.fontFace)}return o.getIconStyle(e)}static getGridStyle(e="light-blue"){return new Ni(e,this.fontFace).getGridStyle()}}const lA=new Xn({image:new gm({anchor:[.5,86],anchorXUnits:"fraction",anchorYUnits:"pixels",src:"/img/spotlight-poi2_hdpi.png",crossOrigin:"anonymous",opacity:1,size:[54,86],scale:.5})});function Fg(t,e=0,n=0,r=void 0){t&&t.setStyle((o,a)=>{const l=o.getProperties(),c=o.getGeometry(),g=(l.level??0)===e?lt.ACTIVE:lt.INACTIVE,h=Zu(o,r??g,t.getProperties().id);return c?.getType()==="Point"&&l.icon&&n!==0&&h.getImage()?.setScale(n/a),h})}function Zu(t,e=lt.ACTIVE,n){const r=Dx(),o=t.getProperties();let a;if(o.icon?(a=Do.getIconStyle(o.icon,o.color,e),a.getText()?.setText(o.annotation?.toString())):(!o.annotation&&r.featureNumberVisibility&&(o.annotation=7,o.annotationStyle="500 0.5rem"),n==="sectionLayer"&&t.getGeometry()?.getType()==="Polygon"?a=Do.getSectionPolygonStyle(o.color,e):a=Do.getStyle(o.color,e)),e!==lt.SELECTED){o.thickness&&a.getStroke()?.setWidth(o.thickness);const l=a.getFill();if(o.opacity&&l){const c=o.opacity,f=_e(l.getColor());let g=e===lt.ACTIVE?c:c/2;e===lt.HOVER&&(g=.25),a.getFill()?.setColor(_e(f).alpha(g).css())}}return o.annotation&&!o.icon&&(t.getGeometry()?.getType()==="Point"&&typeof o.annotation!="number"&&a.getImage()?.setOpacity(0),a.getText()?.setText(o.annotation.toString()),o.annotationStyle&&a.getText()?.setFont(`${o.annotationStyle} ${Do.fontFace}`)),a}const uA=yi({__name:"MapComponent",props:{zoom:{type:Number,default:6},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:18},extentLimit:{type:Array,default:()=>{}},center:{type:Array,default:()=>[139.766667,35.681111]},contextMenu:{type:Boolean,default:!0},loadingMessage:{type:String,default:"Now Loading..."}},emits:["ready","contextmenu"],setup(t,{expose:e,emit:n}){const r=t,o=n,a=$x(),l=Fc(),c=se(),f=te({get:()=>l.zoom,set:k=>l.setZoom(k)}),g=te({get:()=>l.coordinate,set:k=>l.setCoordinate(k)}),h=a?.query;h.x&&h.y?g.value=[parseFloat(h.y),parseFloat(h.x)]:r.center&&(g.value=r.center),f.value=h.zoom?parseInt(h.zoom):r.zoom;const m=new et({geometry:new bt(g.value),name:"cursor"}),v=new GC({projection:"EPSG:4326",center:g.value,zoom:f.value,minZoom:r.minZoom,maxZoom:r.maxZoom,extent:r.extentLimit}),p=new BC;p.setProjection(v.getProjection()),p.setTracking(!0),p.on("change:position",()=>{const k=p.getPosition();m.setGeometry(k?new bt(k):void 0)});const y=new Kn({zIndex:999,style:lA,visible:!0,source:new bn({features:[m]}),properties:{id:"cursorLayer"}}),x=new Kk,b=tt(new dm({controls:[new NC,new sk({coordinateFormat:WC(6)}),new lk,new UC({collapsible:!1}),new gg({label:r.loadingMessage}),new Jk({}),new ak,x],view:v,layers:i0.compact([new Ek({zIndex:0,properties:{id:"osm"},source:new jk,visible:!0}),y])}));b.value.getInteractions().getArray().filter(k=>k instanceof zC)[0].setActive(!1);const L=new zi({condition:yc,layers:[y]});L.on("select",()=>{}),b.value.addInteraction(L),a?.query.x&&a?.query.y&&y.setVisible(!0),b.value.on("moveend",()=>{const k=b.value.getView(),V=k.getCenter()??r.center;g.value=[V[0],V[1]],f.value=k.getZoom()??0});const P=new gg({label:r.loadingMessage,layers:b.value.getAllLayers()});return b.value.addControl(P),ca(()=>{c.value&&(b.value.setTarget(c.value),o("ready",c.value)),b.value.getViewport().addEventListener("contextmenu",k=>{k.preventDefault(),o("contextmenu",k)})}),jx(()=>b.value.setTarget()),e({map:b,notification:x}),(k,V)=>(vn(),Xx("div",{ref_key:"ol",ref:c,class:"map-component py-0 px-0"},null,512))}});var Pu={exports:{}};/*! streamsaver. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */var Lg;function cA(){return Lg||(Lg=1,function(t){((e,n)=>{t.exports=n()})("streamSaver",()=>{const e=typeof window=="object"?window:this;e.HTMLElement;let n=null,r=!1;const o=y=>{try{y()}catch{}},a=e.WebStreamsPolyfill||{},l=e.isSecureContext;let c=/constructor/i.test(e.HTMLElement)||!!e.safari||!!e.WebKitPoint;const f=l||"MozAppearance"in document.documentElement.style?"iframe":"navigate",g={createWriteStream:p,WritableStream:e.WritableStream||a.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function h(y){if(!y)throw new Error("meh");const x=document.createElement("iframe");return x.hidden=!0,x.src=y,x.loaded=!1,x.name="iframe",x.isIframe=!0,x.postMessage=(...b)=>x.contentWindow.postMessage(...b),x.addEventListener("load",()=>{x.loaded=!0},{once:!0}),document.body.appendChild(x),x}function m(y){const x="width=200,height=100",b=document.createDocumentFragment(),S={frame:e.open(y,"popup",x),loaded:!1,isIframe:!1,isPopup:!0,remove(){S.frame.close()},addEventListener(...L){b.addEventListener(...L)},dispatchEvent(...L){b.dispatchEvent(...L)},removeEventListener(...L){b.removeEventListener(...L)},postMessage(...L){S.frame.postMessage(...L)}},T=L=>{L.source===S.frame&&(S.loaded=!0,e.removeEventListener("message",T),S.dispatchEvent(new Event("load")))};return e.addEventListener("message",T),S}try{new Response(new ReadableStream),l&&!("serviceWorker"in navigator)&&(c=!0)}catch{c=!0}o(()=>{const{readable:y}=new TransformStream,x=new MessageChannel;x.port1.postMessage(y,[y]),x.port1.close(),x.port2.close(),r=!0,Object.defineProperty(g,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})});function v(){n||(n=l?h(g.mitm):m(g.mitm))}function p(y,x,b){let S={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},T=0,L=null,P=null,k=null;if(Number.isFinite(x)?([b,x]=[x,b],S.size=b,S.writableStrategy=x):x&&x.highWaterMark?(S.size=b,S.writableStrategy=x):S=x||{},!c){v(),P=new MessageChannel,y=encodeURIComponent(y.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const E={transferringReadable:r,pathname:S.pathname||Math.random().toString().slice(-6)+"/"+y,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+y}};S.size&&(E.headers["Content-Length"]=S.size);const M=[E,"*",[P.port2]];if(r){const U=f==="iframe"?void 0:{transform(q,K){if(!(q instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");T+=q.length,K.enqueue(q),L&&(location.href=L,L=null)},flush(){L&&(location.href=L)}};k=new g.TransformStream(U,S.writableStrategy,S.readableStrategy);const N=k.readable;P.port1.postMessage({readableStream:N},[N])}P.port1.onmessage=U=>{U.data.download?f==="navigate"?(n.remove(),n=null,T?location.href=U.data.download:L=U.data.download):(n.isPopup&&(n.remove(),n=null,f==="iframe"&&h(g.mitm)),h(U.data.download)):U.data.abort&&(V=[],P.port1.postMessage("abort"),P.port1.onmessage=null,P.port1.close(),P.port2.close(),P=null)},n.loaded?n.postMessage(...M):n.addEventListener("load",()=>{n.postMessage(...M)},{once:!0})}let V=[];return!c&&k&&k.writable||new g.WritableStream({write(E){if(!(E instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");if(c){V.push(E);return}P.port1.postMessage(E),T+=E.length,L&&(location.href=L,L=null)},close(){if(c){const E=new Blob(V,{type:"application/octet-stream; charset=utf-8"}),M=document.createElement("a");M.href=URL.createObjectURL(E),M.download=y,M.click()}else P.port1.postMessage("end")},abort(){V=[],P.port1.postMessage("abort"),P.port1.onmessage=null,P.port1.close(),P.port2.close(),P=null}},S.writableStrategy)}return g})}(Pu)),Pu.exports}var G0=cA();const fA=yi({__name:"MapContextMenu",props:{map:{type:Object,default:void 0}},setup(t,{expose:e}){const n=t,r=Hx(),o=ua(),a=Fc(),l=se(!1),c=se({x:0,y:0}),f=se([0,0]),g=te(()=>a.zoom),h=async()=>{const y=r.resolve({query:{x:f.value[1].toFixed(6).toString(),y:f.value[0].toFixed(6).toString(),zoom:Math.round(g.value).toString()}});await navigator.clipboard.writeText(location.origin+y.href),o.setMessage("Copied to clipboard this coordinate link url.")},m=async(y=!1)=>{if(!n.map)return;const x=n.map;o.setLoading(!0),x.once("rendercomplete",()=>{const b=x.getSize()??[0,0],S=document.createElement("canvas");S.width=b[0],S.height=b[1];const T=S.getContext("2d");T.fillStyle="#1d3b58",T.fillRect(0,0,S.width,S.height);let L;Array.prototype.forEach.call(document.querySelectorAll(".ol-layer canvas"),k=>{if(k.width<0)return;const V=k.parentNode.style.opacity;T.globalAlpha=V===""?1:Number(V),L=k.style.transform.match(/^matrix\(([^(]*)\)$/)[1].split(",").map(Number),CanvasRenderingContext2D.prototype.setTransform.apply(T,L),T.drawImage(k,0,0)});const P=document.querySelector(".ol-fixedoverlay");P&&T.drawImage(P,0,0),CanvasRenderingContext2D.prototype.setTransform.apply(T,[1,0,0,1,0,0]),S.toBlob(async k=>{if(k)if(y){const V=G0.createWriteStream("map.png",{size:k.size});await new Response(k).body?.pipeTo(V)}else await navigator.clipboard.write([new ClipboardItem({"image/png":Promise.resolve(k)})]),o.setMessage("Copied to clipboard map image.")},"image/png",.9)}),x.renderSync(),o.setLoading(!1)};return e({show:y=>{n.map&&y&&(c.value={x:y.clientX,y:y.clientY},f.value=n.map.getEventCoordinate(y)),l.value=!0},hide:()=>{l.value=!1},position:c,coordinate:f}),(y,x)=>(vn(),Pn(Hm,{modelValue:l.value,"onUpdate:modelValue":x[2]||(x[2]=b=>l.value=b),absolute:"",style:qe(`top: ${c.value.y}px; left: ${c.value.x}px`)},{default:H(()=>[F(Hg,{density:"compact"},{default:H(()=>[F(Gx,null,{default:H(()=>[F(_t,{size:"small"},{default:H(()=>x[3]||(x[3]=[he("mdi-crosshairs")])),_:1,__:[3]}),x[7]||(x[7]=he(" Coordinate ")),F(_t,{size:"small"},{default:H(()=>x[4]||(x[4]=[he("mdi-arrow-left-right")])),_:1,__:[4]}),he(" "+vi(f.value[0].toFixed(6))+", ",1),F(_t,{size:"small"},{default:H(()=>x[5]||(x[5]=[he("mdi-arrow-up-down")])),_:1,__:[5]}),he(" "+vi(f.value[1].toFixed(6))+"   ",1),F(_t,{size:"small"},{default:H(()=>x[6]||(x[6]=[he("mdi-magnify")])),_:1,__:[6]}),he(" Zoom: "+vi(Math.round(g.value)),1)]),_:1,__:[7]}),F(vr,{"prepend-icon":"mdi-link-variant",title:"Copy link to the clipboard",onClick:h}),F($n),F(vr,{"prepend-icon":"mdi-image-marker",title:"Copy the map image to the clipboard",onClick:x[0]||(x[0]=b=>m(!1))}),F(vr,{"prepend-icon":"mdi-file-image-marker",title:"Save map image to file",onClick:x[1]||(x[1]=b=>m(!0))})]),_:1})]),_:1},8,["modelValue","style"]))}}),dA=yi({__name:"ConfirmModal",props:{title:{type:String,required:!0},message:{type:String,default:""},discardable:{type:Boolean,default:!1},danger:{type:Boolean,default:!1}},emits:["submit","cancel","discard"],setup(t,{expose:e,emit:n}){const r=n,o=se(!1),a=se(null),l=h=>{a.value=h,o.value=!0},c=()=>{r("cancel"),a.value=null,o.value=!1},f=()=>{r("discard",a.value),a.value=null,o.value=!1},g=()=>{r("submit",a.value),c()};return e({show:l}),(h,m)=>(vn(),Pn(Ss,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=v=>o.value=v),persistent:"","max-width":"640px",onKeydown:da(c,["esc"])},{default:H(()=>[F(Es,{title:t.title,subtitle:t.message},{append:H(()=>[F(Qe,{text:"Close"},{activator:H(({props:v})=>[F(Ee,oe(v,{icon:"mdi-close",variant:"plain",onClick:c}),null,16)]),_:1})]),default:H(()=>[F(Gr,null,{default:H(()=>[t.discardable?(vn(),Pn(Ee,{key:0,color:"orange","prepend-icon":"mdi-undo-variant",variant:"plain",onClick:f},{default:H(()=>m[1]||(m[1]=[he(" Discard ")])),_:1,__:[1]})):$l("",!0),F(Ir),t.danger?(vn(),Pn(Ee,{key:1,color:"red","prepend-icon":"mdi-close-octagon",variant:"text",onClick:g},{default:H(()=>m[2]||(m[2]=[he(" OK ")])),_:1,__:[2]})):$l("",!0),F(Ee,{variant:"text",color:"secondary","prepend-icon":"mdi-cancel",onClick:c},{default:H(()=>m[3]||(m[3]=[he(" Cancel ")])),_:1,__:[3]}),t.danger?$l("",!0):(vn(),Pn(Ee,{key:2,variant:"text",color:"primary","prepend-icon":"mdi-check",onClick:g},{default:H(()=>m[4]||(m[4]=[he(" OK ")])),_:1,__:[4]}))]),_:1})]),_:1},8,["title","subtitle"])]),_:1},8,["modelValue"]))}}),hs={id:void 0,name:void 0,description:void 0,annotation:void 0,annotationStyle:void 0,icon:void 0,color:"light-blue",opacity:void 0,thickness:void 0,level:0},hA=["red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","blue-grey","grey"],gA=yi({__name:"PropertiesEditorModal",emits:["submit","delete"],setup(t,{expose:e,emit:n}){const r=n,o=bm(),a=se(!1),l=se(hs),c=se(),f=se("basic"),g=se(!0);nt(a,y=>{y||(c.value=void 0,l.value=hs)});const h=y=>{a.value=!0,c.value=y,l.value=y.getProperties(),g.value=y.getGeometry().flatCoordinates.length===2},m=()=>{a.value=!1,l.value=hs},v=()=>{c.value&&(c.value.setProperties(l.value),r("submit",c.value)),a.value=!1},p=()=>{r("delete",c.value),a.value=!1};return nt(a,y=>{y||(f.value="basic",l.value.description="")}),e({show:h}),(y,x)=>(vn(),Pn(Ss,{modelValue:a.value,"onUpdate:modelValue":x[9]||(x[9]=b=>a.value=b),persistent:"","max-width":"1024px",onKeydown:da(m,["esc"])},{default:H(()=>[F(Es,{title:"Edit Properties",subtitle:"Edit the properties of the selected feature."},{append:H(()=>[F(Qe,{text:"Close"},{activator:H(({props:b})=>[F(Ee,oe(b,{icon:"mdi-close",variant:"plain",onClick:m}),null,16)]),_:1})]),default:H(()=>[F(ba,null,{default:H(()=>[F(bE,{modelValue:f.value,"onUpdate:modelValue":x[0]||(x[0]=b=>f.value=b)},{default:H(()=>[F(zu,{value:"basic","prepend-icon":"mdi-information"},{default:H(()=>x[10]||(x[10]=[he("Basic")])),_:1,__:[10]}),F(zu,{value:"description","prepend-icon":"mdi-message-text"},{default:H(()=>x[11]||(x[11]=[he("Description")])),_:1,__:[11]})]),_:1},8,["modelValue"]),F(Wu,{modelValue:f.value,"onUpdate:modelValue":x[8]||(x[8]=b=>f.value=b)},{default:H(()=>[F(na,{value:"basic"},{default:H(()=>[F(US,null,{default:H(()=>[F(ar,{cols:"12",md:"6"},{default:H(()=>[F(di,{modelValue:l.value.name,"onUpdate:modelValue":x[1]||(x[1]=b=>l.value.name=b),label:"name",hint:"The name that pops up when you click a feature.","prepend-icon":"mdi-map-marker"},null,8,["modelValue"])]),_:1}),F(ar,{cols:"12",md:"6"},{default:H(()=>[F(di,{modelValue:l.value.annotation,"onUpdate:modelValue":x[2]||(x[2]=b=>l.value.annotation=b),label:"Annotation",hint:"Text to display directly above the feature.","prepend-icon":"mdi-form-textbox"},null,8,["modelValue"])]),_:1}),F(ar,{cols:"12",md:"3"},{default:H(()=>[F(S2,{modelValue:l.value.color,"onUpdate:modelValue":x[3]||(x[3]=b=>l.value.color=b),items:Tn(hA),label:"Feature Color","prepend-icon":"mdi-palette"},{item:H(({props:b,item:S})=>[F(vr,oe(b,{title:S.title}),{prepend:H(()=>[F(_t,{color:S.value},{default:H(()=>[he(" mdi-checkbox-"+vi(S.value===l.value.color?"marked":"blank"),1)]),_:2},1032,["color"])]),_:2},1040,["title"])]),selection:H(({item:b})=>[F(_t,{color:b.value},{default:H(()=>x[12]||(x[12]=[he("mdi-checkbox-blank")])),_:2,__:[12]},1032,["color"]),he(" "+vi(b.title),1)]),_:1},8,["modelValue","items"])]),_:1}),F(ar,{cols:"12",sm:"6",md:"3"},{default:H(()=>[F(di,{modelValue:l.value.thickness,"onUpdate:modelValue":x[4]||(x[4]=b=>l.value.thickness=b),modelModifiers:{number:!0},label:"Feature line thickness",hint:" If set to 0, only annotations will be displayed.",type:"number",minimum:"0","prepend-icon":"mdi-format-line-weight",suffix:"px"},null,8,["modelValue"])]),_:1}),F(ar,{cols:"12",sm:"6",md:"3"},{default:H(()=>[F(di,{modelValue:l.value.annotationStyle,"onUpdate:modelValue":x[5]||(x[5]=b=>l.value.annotationStyle=b),label:"Annotation Text style",hint:"Set font weight and font-size. Default is `500 0.75rem`.",placeholder:"500 0.75rem","prepend-icon":"mdi-format-font"},null,8,["modelValue"])]),_:1}),F(ar,{cols:"12",sm:"6",md:"3"},{default:H(()=>[F(di,{modelValue:l.value.opacity,"onUpdate:modelValue":x[6]||(x[6]=b=>l.value.opacity=b),modelModifiers:{number:!0},label:"Fill Opacity",hint:"Transparency of fills in Point and Polygons (0 to 1)",type:"number",minimum:"0",maximum:"1","prepend-icon":"mdi-opacity",step:"0.1"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),F(na,{value:"description"},{default:H(()=>[F(Qn,{hint:"The text to display in the popup. You can use Markdown notation.","persistent-hint":""},{default:H(()=>[F(Tn(wm),{modelValue:l.value.description,"onUpdate:modelValue":x[7]||(x[7]=b=>l.value.description=b),lang:Tn(sS)(),dark:Tn(o).current.value.dark,gutter:"",wrap:"",basic:""},null,8,["modelValue","lang","dark"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),F(Gr,null,{default:H(()=>[F(Ee,{color:"red",variant:"text","prepend-icon":"mdi-delete",onClick:p},{default:H(()=>x[13]||(x[13]=[he("Delate")])),_:1,__:[13]}),F(Ir),F(Ee,{color:"secondary",variant:"text","prepend-icon":"mdi-cancel",onClick:m},{default:H(()=>x[14]||(x[14]=[he(" Cancel ")])),_:1,__:[14]}),F(Ee,{color:"primary",variant:"text","prepend-icon":"mdi-check",onClick:v},{default:H(()=>x[15]||(x[15]=[he("Save")])),_:1,__:[15]})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),mA=yi({__name:"ExportModal",setup(t,{expose:e}){const n=ua(),r=_a(),o=se(!1),a=se("geojson"),l=se(!1),c=se("export-"+new Date().toLocaleDateString()),f=()=>o.value=!0,g=()=>o.value=!1,h=async()=>{n.setLoading(!0),await At();const m=r.exportBlob(a.value,l.value),v=G0.createWriteStream(`${c.value}.json`,{size:m.size});await new Response(m).body?.pipeTo(v),n.setLoading(!1),g()};return e({show:f}),(m,v)=>(vn(),Pn(Ss,{modelValue:o.value,"onUpdate:modelValue":v[3]||(v[3]=p=>o.value=p),"max-width":"480px",onKeydown:da(g,["esc"])},{default:H(()=>[F(Es,{title:"Export",subtitle:"Import a local GeoJSON / TopoJSON file."},{append:H(()=>[F(Qe,{text:"Close"},{activator:H(({props:p})=>[F(Ee,oe(p,{icon:"mdi-close",variant:"plain",onClick:g}),null,16)]),_:1})]),default:H(()=>[F(ba,null,{default:H(()=>[F(cE,{modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=p=>a.value=p),label:"File Type",inline:""},{default:H(()=>[F(eg,{label:"GeoJson",value:"geojson"}),F(eg,{label:"TopoJson",value:"topojson"})]),_:1},8,["modelValue"]),F(di,{modelValue:c.value,"onUpdate:modelValue":v[1]||(v[1]=p=>c.value=p),"prepend-icon":"mdi-file-download-outline",label:"Filename",suffix:`.${a.value}`,"hide-details":""},null,8,["modelValue","suffix"]),F(dE,{modelValue:l.value,"onUpdate:modelValue":v[2]||(v[2]=p=>l.value=p),label:"Compress"},null,8,["modelValue"])]),_:1}),F(Gr,null,{default:H(()=>[F(Ir),F(Ee,{variant:"text",color:"secondary","prepend-icon":"mdi-cancel",onClick:g},{default:H(()=>v[4]||(v[4]=[he(" Cancel ")])),_:1,__:[4]}),F(Ee,{variant:"text",color:"primary","prepend-icon":"mdi-file-download",onClick:h},{default:H(()=>v[5]||(v[5]=[he(" Save ")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});function vA(t){return t}function _A(t){if(t==null)return vA;var e,n,r=t.scale[0],o=t.scale[1],a=t.translate[0],l=t.translate[1];return function(c,f){f||(e=n=0);var g=2,h=c.length,m=new Array(h);for(m[0]=(e+=c[0])*r+a,m[1]=(n+=c[1])*o+l;g<h;)m[g]=c[g],++g;return m}}function pA(t,e){for(var n,r=t.length,o=r-e;o<--r;)n=t[o],t[o++]=t[r],t[r]=n}function yA(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return Ig(t,n)})}:Ig(t,e)}function Ig(t,e){var n=e.id,r=e.bbox,o=e.properties==null?{}:e.properties,a=bA(t,e);return n==null&&r==null?{type:"Feature",properties:o,geometry:a}:r==null?{type:"Feature",id:n,properties:o,geometry:a}:{type:"Feature",id:n,bbox:r,properties:o,geometry:a}}function bA(t,e){var n=_A(t.transform),r=t.arcs;function o(h,m){m.length&&m.pop();for(var v=r[h<0?~h:h],p=0,y=v.length;p<y;++p)m.push(n(v[p],p));h<0&&pA(m,y)}function a(h){return n(h)}function l(h){for(var m=[],v=0,p=h.length;v<p;++v)o(h[v],m);return m.length<2&&m.push(m[0]),m}function c(h){for(var m=l(h);m.length<4;)m.push(m[0]);return m}function f(h){return h.map(c)}function g(h){var m=h.type,v;switch(m){case"GeometryCollection":return{type:m,geometries:h.geometries.map(g)};case"Point":v=a(h.coordinates);break;case"MultiPoint":v=h.coordinates.map(a);break;case"LineString":v=l(h.arcs);break;case"MultiLineString":v=h.arcs.map(l);break;case"Polygon":v=f(h.arcs);break;case"MultiPolygon":v=h.arcs.map(f);break;default:return null}return{type:m,coordinates:v}}return g(e)}const wA=yi({__name:"ImportModal",emits:["loaded"],setup(t,{expose:e,emit:n}){const r=n,o=ua(),a=_a(),l=te({get:()=>o.loading,set:S=>o.setLoading(S)}),c=te({get:()=>o.progress,set:S=>o.setProgress(S)}),f=se(),g=se(!1),h=se([]),m=se(!1),v=new FileReader;v.onloadstart=S=>{l.value=!0,S.lengthComputable&&(c.value=Math.round(S.loaded/S.total*100))},v.onloadend=()=>{c.value=100,l.value=!1};const p=se(!1),y=()=>p.value=!0,x=()=>p.value=!1,b=async()=>{if(l.value=!0,g.value=!1,!f.value)return;const S=new FileReader;S.readAsText(f.value),S.onload=async()=>{const T=S.result;let L;try{L=JSON.parse(T)}catch{g.value=!0,h.value=["GeoJson parse error."];return}if(L.type==="Topology")try{L=yA(L,"data")}catch{g.value=!0,h.value=["Topojson parse error."],l.value=!1;return}m.value&&(L=km(L)),L.type==="FeatureCollection"&&L.features.forEach(P=>(P.id=Xu(),P)),a.setGeoJson(L),a.setRefresh(!0),g.value=!1,f.value=void 0,l.value=!1,r("loaded"),await At(),x(),o.setMessage("GeoJson loaded successfully.")}};return e({show:y,hide:x}),(S,T)=>(vn(),Pn(Ss,{modelValue:p.value,"onUpdate:modelValue":T[2]||(T[2]=L=>p.value=L),"max-width":"480px",onKeydown:da(x,["esc"])},{default:H(()=>[F(Es,null,{title:H(()=>T[3]||(T[3]=[he("Import")])),append:H(()=>[F(Qe,{text:"Close"},{activator:H(({props:L})=>[F(Ee,oe(L,{icon:"mdi-close",variant:"plain",onClick:x}),null,16)]),_:1})]),default:H(()=>[F(Gc,null,{default:H(()=>T[4]||(T[4]=[he("Import a local GeoJSON / TopoJSON file.")])),_:1,__:[4]}),F(ba,null,{default:H(()=>[F(aE,{modelValue:f.value,"onUpdate:modelValue":T[0]||(T[0]=L=>f.value=L),"show-size":"",required:"",placeholder:"Choose a GeoJSON file.",label:"GeoJson","prepend-icon":"mdi-paperclip",accept:"application/geo+json",onEmptied:T[1]||(T[1]=L=>f.value=void 0)},null,8,["modelValue"])]),_:1}),F(Gr,null,{default:H(()=>[F(Ir),F(Ee,{color:"secondary","prepend-icon":"mdi-cancel",variant:"text",onClick:x},{default:H(()=>T[5]||(T[5]=[he(" Cancel ")])),_:1,__:[5]}),F(Ee,{color:"primary","prepend-icon":"mdi-check",variant:"text",onClick:b},{default:H(()=>T[6]||(T[6]=[he("OK")])),_:1,__:[6]})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),xA=yi({__name:"SourceModal",emits:{close:()=>!0},setup(t,{expose:e,emit:n}){const r=n,o=_a(),a=bm(),l=se(),c=se(),f=se(),g=se(a.current.value.dark),h=se(!1),m=se(JSON.stringify(o.geojson,null,2)),v=se(0),p=()=>{h.value=!0,m.value=JSON.stringify(o.geojson,null,2)},y=()=>{try{const L=JSON.parse(m.value);o.setGeoJson(L)}catch{return}o.setRefresh(!0),x()},x=()=>{r("close"),h.value=!1},b=()=>c.value?.show(),S=()=>l.value?.show(),T=()=>{m.value=JSON.stringify(o.geojson,null,2)};return e({show:p}),(L,P)=>(vn(),Pn(Ss,{modelValue:h.value,"onUpdate:modelValue":P[1]||(P[1]=k=>h.value=k),fullscreen:"",transition:"dialog-bottom-transition"},{default:H(()=>[F(Es,{class:"d-flex flex-column"},{title:H(()=>P[2]||(P[2]=[he("Source")])),append:H(()=>[F(Qe,{text:"Close"},{activator:H(({props:k})=>[F(Ee,oe(k,{icon:"mdi-close",variant:"plain",onClick:x}),null,16)]),_:1})]),default:H(()=>[F(Gc,{class:"flex-grow-0",style:{"flex-basis":"auto"}},{default:H(()=>P[3]||(P[3]=[he("Geojson source")])),_:1,__:[3]}),F(Tn(wm),{ref_key:"editor",ref:f,modelValue:m.value,"onUpdate:modelValue":P[0]||(P[0]=k=>m.value=k),class:"flex-grow-1",style:{"flex-basis":"0","overflow-y":"scroll"},dark:g.value,lang:Tn(aS)(),linter:Tn(oS)(),gutter:"",basic:"",wrap:""},null,8,["modelValue","dark","lang","linter"]),F(Gr,{class:"flex-grow-0",style:{"flex-basis":"auto"}},{default:H(()=>[F(Ee,{color:"orange","prepend-icon":"mdi-upload",variant:"text",onClick:b},{default:H(()=>P[4]||(P[4]=[he(" Import ")])),_:1,__:[4]}),F(Ee,{disabled:v.value!==0,color:"green","prepend-icon":"mdi-download",variant:"text",onClick:S},{default:H(()=>P[5]||(P[5]=[he(" Export ")])),_:1,__:[5]},8,["disabled"]),F(Ir),F(Ee,{color:"secondary","prepend-icon":"mdi-close",variant:"text",onClick:x},{default:H(()=>P[6]||(P[6]=[he(" Cancel ")])),_:1,__:[6]}),F(Ee,{disabled:f.value?.diagnosticCount!==0,color:"primary","prepend-icon":"mdi-check",variant:"text",onClick:y},{default:H(()=>P[7]||(P[7]=[he(" OK ")])),_:1,__:[7]},8,["disabled"])]),_:1})]),_:1}),F(wA,{ref_key:"importModal",ref:c,onLoaded:T},null,512),F(mA,{ref_key:"exportModal",ref:l},null,512)]),_:1},8,["modelValue"]))}});var CA=class extends zi{constructor(e){super(e),this.on("select",function(n){this.getFeatures().clear(),this.delete(n.selected)}.bind(this))}_getSources(e){if(!this.getMap())return[];e||(e=this.getMap().getLayers());var n=[];return e.forEach(function(r){r.getLayers?n=n.concat(this._getSources(r.getLayers())):r.getSource&&r.getSource()instanceof bn&&n.push(r.getSource())}.bind(this)),n}delete(e){if(e&&(e.length||e.getLength())){this.dispatchEvent({type:"deletestart",features:e});var n=[];this._getSources().forEach(function(r){try{e.forEach(function(o){r.removeFeature(o),n.push(o)})}catch{}}),this.dispatchEvent({type:"deleteend",features:n})}}},SA=class extends $o{constructor(e){e=e||{};var n=function(a,l){var c=a[0].pop();return(!this.getPolygon()||this.getPolygon().intersectsCoordinate(c))&&(this.lastOKCoord=[c[0],c[1]]),a[0].push([this.lastOKCoord[0],this.lastOKCoord[1]]),l?l.setCoordinates([a[0].concat([a[0][0]])]):l=new Gi(a),l},r=e.geometryFunction;if(r?e.geometryFunction=function(a,l,c){return l=n.bind(this)(a,l),r.bind(this)(a,l,c)}:e.geometryFunction=n,e.type="Polygon",super(e),this._select=new zi({style:e.style}),this._select.setActive(!1),e.layers&&(typeof e.layers=="function"?this.layers_=e.layers:e.layers.indexOf&&(this.layers_=function(a){return e.layers.indexOf(a)>=0})),typeof e.featureFilter=="function")this._features=e.featureFilter;else if(e.featureFilter){var o=e.featureFilter;this._features=function(a){return o.indexOf?!!o[o.indexOf(a)]:!!o.item(o.getArray().indexOf(a))}}else this._features=function(){return!0};this.on("drawstart",this._startDrawing.bind(this)),this.on("drawend",this._finishDrawing.bind(this))}setMap(e){this.getMap()&&this.getMap().removeInteraction(this._select),e&&e.addInteraction(this._select),super.setMap.call(this,e)}setActive(e){this._select&&this._select.getFeatures().clear(),super.setActive.call(this,e)}removeLastPoint(){this._feature&&this._feature.getGeometry().getCoordinates()[0].length>2&&super.removeLastPoint.call(this)}getPolygon(){return this._polygon}_startDrawing(e){var n=this.getMap();this._feature=e.feature;var r=e.feature.getGeometry().getCoordinates()[0][0];this._current=null,n.forEachFeatureAtPixel(n.getPixelFromCoordinate(r),function(o,a){if(!this._current&&this._features(o,a)){var l=o.getGeometry();if(l.getType()==="Polygon"&&l.intersectsCoordinate(r))this._polygonIndex=!1,this._polygon=l,this._current=o;else if(l.getType()==="MultiPolygon"&&l.intersectsCoordinate(r)){for(var c=0,f;f=l.getPolygon(c);c++)if(f.intersectsCoordinate(r)){this._polygonIndex=c,this._polygon=f,this._current=o;break}}}}.bind(this),{layerFilter:this.layers_}),this._select.getFeatures().clear(),this._current?this._select.getFeatures().push(this._current):(this.setActive(!1),this.setActive(!0))}_finishDrawing(e){e.hole=e.feature,e.feature=this._select.getFeatures().item(0),this.dispatchEvent({type:"modifystart",features:[this._current]});var n=e.hole.getGeometry().getCoordinates()[0];if(n.length>3)if(this._polygonIndex!==!1){for(var r=e.feature.getGeometry(),o=new ha([]),a=0,l;l=r.getPolygon(a);a++)a===this._polygonIndex&&l.appendLinearRing(new Bh(n)),o.appendPolygon(l);e.feature.setGeometry(o)}else this.getPolygon().appendLinearRing(new Bh(n));this.dispatchEvent({type:"modifyend",features:[this._current]}),this._feature=null,this._select.getFeatures().clear()}_geometryFn(e,n){var r=e[0].pop();return(!this.getPolygon()||this.getPolygon().intersectsCoordinate(r))&&(this.lastOKCoord=[r[0],r[1]]),e[0].push([this.lastOKCoord[0],this.lastOKCoord[1]]),n?n.setCoordinates([e[0].concat([e[0][0]])]):n=new Gi(e),n}},B0;(function(){var t=[255,255,255,1],e=[0,153,255,1],n=3,r=[new Xn({stroke:new Kt({color:t,width:n+2})}),new Xn({image:new Vu({radius:n*2,fill:new mn({color:e}),stroke:new Kt({color:t,width:n/2})}),stroke:new Kt({color:e,width:n}),fill:new mn({color:[255,255,255,.5]})})];B0=function(o){if(o===!0)return r;o=o||{};var a=new mn({color:o.fillColor||"rgba(255,255,255,0.4)"}),l=new Kt({color:o.color||"#3399CC",width:1.25}),c=new Xn({image:new Vu({fill:a,stroke:l,radius:5}),fill:a,stroke:l});return[c]}})();const EA=B0;var Ju=class extends wc{constructor(e){e=e||{},super({handleEvent:function(o){return n.handleEvent_(o)}});var n=this;this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.maxCircleCoordinates_=e.maxCircleCoordinates||100,this.features_=e.features,this.source_=e.source,this.conditionFn_=e.condition,this.squareFn_=e.squareCondition,this.centeredFn_=e.centerCondition,this.canRotate_=e.canRotate!==!1,this.geometryName_=e.geometryName||"geometry",this.setSides(e.sides);var r=EA(!0);this.sketch_=new pn,this.overlayLayer_=new Kn({source:new bn({features:this.sketch_,useSpatialIndex:!1}),name:"DrawRegular overlay",displayInLayerSwitcher:!1,style:e.style||r})}setMap(e){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),super.setMap(e),this.overlayLayer_.setMap(e)}setActive(e){this.reset(),super.setActive(e)}reset(){this.overlayLayer_&&this.overlayLayer_.getSource().clear(),this.started_=!1}setSides(e){e=parseInt(e),this.sides_=e>2?e:0}canRotate(e){return(e===!0||e===!1)&&(this.canRotate_=e),this.canRotate_}getSides(){return this.sides_}getGeom_(){if(this.overlayLayer_.getSource().clear(),!this.center_)return!1;var e;if(this.coord_){var n=this.center_,r=this.coord_,o,a,l,c,f;if(!this.sides_&&this.square_&&!this.centered_)return n=[(r[0]+n[0])/2,(r[1]+n[1])/2],o=[r[0]-n[0],r[1]-n[1]],l=Math.sqrt(o[0]*o[0]+o[1]*o[1]),c=new Au(n,l,"XY"),f=this.getMap().getPixelFromCoordinate(n),a=Math.max(100,Math.abs(f[0]-this.coordPx_[0]),Math.abs(f[1]-this.coordPx_[1])),a=Math.min(this.maxCircleCoordinates_,Math.round(a/3)),Bo(c,a,0);var g=this.canRotate_&&this.centered_&&this.square_;if(o=[r[0]-n[0],r[1]-n[1]],this.square_&&!g){var h=Math.max(Math.abs(o[0]),Math.abs(o[1]));r=[n[0]+(o[0]>0?h:-h),n[1]+(o[1]>0?h:-h)]}if(l=Math.sqrt(o[0]*o[0]+o[1]*o[1]),l>0){c=new Au(n,l,"XY");var m;if(g?m=Math.atan2(o[1],o[0]):m=this.startAngle[this.sides_]||this.startAngle.default,this.sides_?e=Bo(c,this.sides_,m):(f=this.getMap().getPixelFromCoordinate(this.center_),a=Math.max(100,Math.abs(f[0]-this.coordPx_[0]),Math.abs(f[1]-this.coordPx_[1])),a=Math.min(this.maxCircleCoordinates_,Math.round(a/(this.centered_?3:5))),e=Bo(c,a,0)),g)return e;var v=e.getExtent();this.centered_?n=[2*this.center_[0]-this.coord_[0],2*this.center_[1]-this.coord_[1]]:n=this.center_;var p=(n[0]-r[0])/(v[0]-v[2]),y=(n[1]-r[1])/(v[1]-v[3]);if(this.square_){var x=Math.min(Math.abs(p),Math.abs(y));p=Math.sign(p)*x,y=Math.sign(y)*x}var b=[n[0]-v[0]*p,n[1]-v[1]*y];return e.applyTransform(function(S,T,L){for(var P=0;P<S.length;P+=L)T[P]=S[P]*p+b[0],T[P+1]=S[P+1]*y+b[1];return T}),e}}return new bt(this.center_)}drawSketch_(e){if(this.overlayLayer_.getSource().clear(),e){this.square_=this.squareFn_?this.squareFn_(e):e.originalEvent.shiftKey,this.centered_=this.centeredFn_?this.centeredFn_(e):e.originalEvent.metaKey||e.originalEvent.ctrlKey;var n=this.getGeom_();if(n){var r=this.feature_;return n.getType()==="Polygon"&&r.getGeometry().setCoordinates(n.getCoordinates()),this.overlayLayer_.getSource().addFeature(r),this.coord_&&this.square_&&(this.canRotate_&&this.centered_&&this.coord_||!this.sides_&&!this.centered_)&&this.overlayLayer_.getSource().addFeature(new et(new _r([this.center_,this.coord_]))),r}}}drawPoint_(e,n){n||this.overlayLayer_.getSource().clear(),this.overlayLayer_.getSource().addFeature(new et(new bt(e)))}handleEvent_(e){var n,r;switch(this._eventTime=new Date,e.type){case"pointerdown":{if(this.conditionFn_&&!this.conditionFn_(e))break;this.downPx_=e.pixel,this.start_(e);var o=500;this._longTouch=!1,setTimeout(function(){this._longTouch=new Date-this._eventTime>.9*o,this._longTouch&&this.handleMoveEvent_(e)}.bind(this),o),this.lastEvent=e.type;break}case"pointerup":{this.started_&&this.coord_&&(n=this.downPx_[0]-e.pixel[0],r=this.downPx_[1]-e.pixel[1],n*n+r*r<=this.squaredClickTolerance_&&(this.lastEvent=="pointerdown"||this.lastEvent=="pointermove"||this.lastEvent=="keydown"?this.end_(e):(n=this.upPx_[0]-e.pixel[0],r=this.upPx_[1]-e.pixel[1],n*n+r*r<=this.squaredClickTolerance_?this.end_(e):(this.handleMoveEvent_(e),this.drawPoint_(e.coordinate,!0))))),this.upPx_=e.pixel;break}case"pointerdrag":{if(this.started_){var a=this.getMap().getPixelFromCoordinate(this.center_);n=a[0]-e.pixel[0],r=a[1]-e.pixel[1],n*n+r*r<=this.squaredClickTolerance_&&this.reset()}return!this._longTouch}case"pointermove":{this.started_?(n=this.downPx_[0]-e.pixel[0],r=this.downPx_[1]-e.pixel[1],n*n+r*r>this.squaredClickTolerance_&&(this.handleMoveEvent_(e),this.lastEvent=e.type)):this.drawPoint_(e.coordinate);break}default:{if(this.started_&&(e.type==="click"||e.type==="singleclick"||e.type==="dblclick"))return!1;this.lastEvent=e.type;break}}return!0}finishDrawing(){this.started_&&this.coord_&&this.end_({pixel:this.upPx_,coordinate:this.coord_})}handleMoveEvent_(e){if(this.started_){this.coord_=e.coordinate,this.coordPx_=e.pixel;var n=this.drawSketch_(e);this.dispatchEvent({type:"drawing",feature:n,pixel:e.pixel,startCoordinate:this.center_,coordinate:e.coordinate,square:this.square_,centered:this.centered_})}else this.drawPoint_(e.coordinate)}start_(e){if(this.started_)this.coord_=e.coordinate;else{this.started_=!0,this.center_=e.coordinate,this.coord_=null;var n=this.feature_=new et({});n.setGeometryName(this.geometryName_||"geometry"),n.setGeometry(new Gi([[e.coordinate,e.coordinate,e.coordinate]])),this.drawSketch_(e),this.dispatchEvent({type:"drawstart",feature:n,pixel:e.pixel,coordinate:e.coordinate})}}end_(e){if(this.coord_=e.coordinate,this.started_=!1,this.coord_&&(this.center_[0]!==this.coord_[0]||this.center_[1]!==this.coord_[1])){var n=this.feature_;n.setGeometry(this.getGeom_()),this.source_?this.source_.addFeature(n):this.features_&&this.features_.push(n),this.dispatchEvent({type:"drawend",feature:n,pixel:e.pixel,coordinate:e.coordinate,square:this.square_,centered:this.centered_})}else this.dispatchEvent({type:"drawcancel",feature:null,pixel:e.pixel,coordinate:e.coordinate,square:this.square_,centered:this.centered_});this.center_=this.coord_=null,this.drawSketch_()}};Ju.prototype.startAngle={default:Math.PI/2,3:-Math.PI/2,4:Math.PI/4};var kA=class extends zi{constructor(e,n){if(e=e||{},e.condition||(e.condition=$C),super(e),this.setActive(e.active!==!1),this.set("name",e.name),this._attributes=n,this.on("select",function(a){this.getFeatures().clear(),this.fill(a.selected,this._attributes)}.bind(this)),e.cursor===void 0){var r=document.createElement("CANVAS");r.width=r.height=32;var o=r.getContext("2d");o.beginPath(),o.moveTo(9,3),o.lineTo(2,9),o.lineTo(10,17),o.lineTo(17,11),o.closePath(),o.fillStyle="#fff",o.fill(),o.stroke(),o.beginPath(),o.moveTo(6,4),o.lineTo(0,8),o.lineTo(0,13),o.lineTo(3,17),o.lineTo(3,8),o.closePath(),o.fillStyle="#000",o.fill(),o.stroke(),o.moveTo(8,8),o.lineTo(10,0),o.lineTo(11,0),o.lineTo(13,3),o.lineTo(13,7),o.stroke(),this._cursor="url("+r.toDataURL()+") 0 13, auto"}e.cursor&&(this._cursor=e.cursor)}setCursor(e){this._cursor=e}getCursor(){return this._cursor}setActive(e){e!==this.getActive()&&(super.setActive(e),this.getMap()&&this._cursor&&(e?(this._previousCursor=this.getMap().getTargetElement().style.cursor,fe.setCursor(this.getMap(),this._cursor)):(fe.setCursor(this.getMap(),this._previousCursor),this._previousCursor=void 0)))}setAttributes(e){this._attributes=e}setAttribute(e,n){this._attributes[e]=n}getAttributes(){return this._attributes}getAttribute(e){return this._attributes[e]}fill(e,n){if(e.length&&n){for(var r=!1,o=0,a;a=e[o];o++){for(var l in n)a.get(l)!==n[l]&&(r=!0);if(r)break}r&&(this.dispatchEvent({type:"setattributestart",features:e,properties:n}),e.forEach(function(c){for(var f in n)c.set(f,n[f])}),this.dispatchEvent({type:"setattributeend",features:e,properties:n}))}}},jo=class extends ys{constructor(e){e=e||{},super({handleDownEvent:function(r){return n.handleDownEvent_(r)},handleDragEvent:function(r){return this.handleDragEvent_(r)},handleMoveEvent:function(r){return this.handleMoveEvent_(r)},handleUpEvent:function(r){return this.handleUpEvent_(r)}});var n=this;this.selection_=new pn,this.handles_=new pn,this.overlayLayer_=new Kn({source:new bn({features:this.handles_,useSpatialIndex:!1,wrapX:!1}),name:"Transform overlay",displayInLayerSwitcher:!1,style:function(r){return n.style[(r.get("handle")||"default")+(r.get("constraint")||"")+(r.get("option")||"")]},updateWhileAnimating:!0,updateWhileInteracting:!0}),this.features_=e.features,typeof e.filter=="function"&&(this._filter=e.filter),this.layers_=e.layers?e.layers instanceof Array?e.layers:[e.layers]:null,this._handleEvent=e.condition||function(){return!0},this.addFn_=e.addCondition||function(){return!1},this.setPointRadius(e.pointRadius),this.set("translateFeature",e.translateFeature!==!1),this.set("translate",e.translate!==!1),this.set("translateBBox",e.translateBBox===!0),this.set("stretch",e.stretch!==!1),this.set("scale",e.scale!==!1),this.set("rotate",e.rotate!==!1),this.set("keepAspectRatio",e.keepAspectRatio||function(r){return r.originalEvent.shiftKey}),this.set("modifyCenter",e.modifyCenter||function(r){return r.originalEvent.metaKey||r.originalEvent.ctrlKey}),this.set("noFlip",e.noFlip||!1),this.set("selection",e.selection!==!1),this.set("hitTolerance",e.hitTolerance||0),this.set("enableRotatedTransform",e.enableRotatedTransform||!1),this.set("keepRectangle",e.keepRectangle||!1),this.set("buffer",e.buffer||0),this.on("propertychange",function(){this.drawSketch_()}),this.setDefaultStyle()}setMap(e){var n=this.getMap();n&&(n.removeLayer(this.overlayLayer_),this.previousCursor_&&fe.setCursor(n,this.previousCursor_),this.previousCursor_=void 0),super.setMap(e),this.overlayLayer_.setMap(e),e===null&&this.select(null),e!==null&&(this.isTouch=/touch/.test(e.getViewport().className),this.setDefaultStyle())}setActive(e){this.select(null),this.overlayLayer_&&this.overlayLayer_.setVisible(e),super.setActive(e)}setDefaultStyle(e){e=e||{};var n=e.pointStroke||new Kt({color:[255,0,0,1],width:1}),r=e.stroke||new Kt({color:[255,0,0,1],width:1,lineDash:[4,4]}),o=e.fill||new mn({color:[255,0,0,.01]}),a=e.pointFill||new mn({color:[255,255,255,.8]}),l=new Hl({fill:a,stroke:n,radius:this.isTouch?12:6,displacement:this.isTouch?[24,-24]:[12,-12],points:15});l.setDisplacement||(l.getAnchor()[0]=this.isTouch?-10:-5);var c=new Hl({fill:a,stroke:n,radius:this.isTouch?16:8,points:4,angle:Math.PI/4}),f=new Hl({fill:a,stroke:n,radius:this.isTouch?12:6,points:4,angle:Math.PI/4});function g(h,m,v){return[new Xn({image:h,stroke:m,fill:v})]}this.style={default:g(c,r,o),translate:g(c,n,a),rotate:g(l,n,a),rotate0:g(c,n,a),scale:g(c,n,a),scale1:g(c,n,a),scale2:g(c,n,a),scale3:g(c,n,a),scalev:g(f,n,a),scaleh1:g(f,n,a),scalev2:g(f,n,a),scaleh3:g(f,n,a)},this.drawSketch_()}setStyle(e,n){if(n){n instanceof Array?this.style[e]=n:this.style[e]=[n];for(var r=0;r<this.style[e].length;r++){var o=this.style[e][r].getImage();o&&(e=="rotate"&&(o.getAnchor()[0]=-5),this.isTouch&&o.setScale(1.8));var a=this.style[e][r].getText();a&&(e=="rotate"&&a.setOffsetX(this.isTouch?14:7),this.isTouch&&a.setScale(1.8))}this.drawSketch_()}}getFeatureAtPixel_(e){var n=this;return this.getMap().forEachFeatureAtPixel(e,function(r,o){var a=!1;if(!o){if(r===n.bbox_)return n.get("translateBBox")?{feature:r,handle:"translate",constraint:"",option:""}:!1;if(n.handles_.forEach(function(c){c===r&&(a=!0)}),a)return{feature:r,handle:r.get("handle"),constraint:r.get("constraint"),option:r.get("option")}}if(!n.get("selection"))return n.selection_.getArray().some(function(c){return r===c})?{feature:r}:null;if(n._filter)return n._filter(r,o)?{feature:r}:null;if(n.layers_){for(var l=0;l<n.layers_.length;l++)if(n.layers_[l]===o)return{feature:r};return null}else return n.features_?(n.features_.forEach(function(c){c===r&&(a=!0)}),a?{feature:r}:null):{feature:r}},{hitTolerance:this.get("hitTolerance")})||{}}getGeometryRotateToZero_(e,n){var r=e.getGeometry(),o=this.getMap().getView().getRotation();if(o===0||!this.get("enableRotatedTransform"))return n?r.clone():r;var a=r.clone();return a.rotate(o*-1,this.getMap().getView().getCenter()),a}_isRectangle(e){if(this.get("keepRectangle")&&e.getType()==="Polygon"){var n=e.getCoordinates()[0];return n.length===5}return!1}drawSketch_(e){var n,r,o,a=this.selection_.item(0)&&this._isRectangle(this.selection_.item(0).getGeometry());if(this.overlayLayer_.getSource().clear(),!!this.selection_.getLength()){var l=this.getMap().getView().getRotation(),c=this.getGeometryRotateToZero_(this.selection_.item(0)).getExtent(),f;a&&(f=this.getGeometryRotateToZero_(this.selection_.item(0)).getCoordinates()[0].slice(0,4),f.unshift(f[3])),c=bc(c,this.get("buffer")),this.selection_.forEach(function(x){var b=this.getGeometryRotateToZero_(x).getExtent();No(c,b)}.bind(this));var g=this.selection_.getLength()===1?this._pointRadius(this.selection_.item(0)):0;if(g&&!(g instanceof Array)&&(g=[g,g]),e===!0)this.ispt_||(this.overlayLayer_.getSource().addFeature(new et({geometry:new bt(this.center_),handle:"rotate0"})),o=bo(c),this.get("enableRotatedTransform")&&l!==0&&o.rotate(l,this.getMap().getView().getCenter()),r=this.bbox_=new et(o),this.overlayLayer_.getSource().addFeature(r));else{if(this.ispt_){var h=this.getMap().getPixelFromCoordinate(Uo(c));if(h){var m=g&&g[0]||10,v=g&&g[1]||10;c=vt([this.getMap().getCoordinateFromPixel([h[0]-m,h[1]-v]),this.getMap().getCoordinateFromPixel([h[0]+m,h[1]+v])])}}o=a?new Gi([f]):bo(c),this.get("enableRotatedTransform")&&l!==0&&o.rotate(l,this.getMap().getView().getCenter()),r=this.bbox_=new et(o);var p=[],y=o.getCoordinates()[0];if(!this.ispt_||g){if(p.push(r),!this.iscircle_&&!this.ispt_&&this.get("stretch")&&this.get("scale"))for(n=0;n<y.length-1;n++)r=new et({geometry:new bt([(y[n][0]+y[n+1][0])/2,(y[n][1]+y[n+1][1])/2]),handle:"scale",constraint:n%2?"h":"v",option:n}),p.push(r);if(this.get("scale"))for(n=0;n<y.length-1;n++)r=new et({geometry:new bt(y[n]),handle:"scale",option:n}),p.push(r);this.get("translate")&&!this.get("translateFeature")&&(r=new et({geometry:new bt([(y[0][0]+y[2][0])/2,(y[0][1]+y[2][1])/2]),handle:"translate"}),p.push(r))}!this.iscircle_&&this.get("rotate")&&(r=new et({geometry:new bt(y[3]),handle:"rotate"}),p.push(r)),this.overlayLayer_.getSource().addFeatures(p)}}}select(e,n){if(!e){this.selection_&&(this.selection_.clear(),this.drawSketch_());return}if(!(!e.getGeometry||!e.getGeometry())){if(n)this.selection_.push(e);else{var r=this.selection_.getArray().indexOf(e);this.selection_.removeAt(r)}this.ispt_=this.selection_.getLength()===1?this.selection_.item(0).getGeometry().getType()=="Point":!1,this.iscircle_=this.selection_.getLength()===1?this.selection_.item(0).getGeometry().getType()=="Circle":!1,this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",feature:e,features:this.selection_})}}setSelection(e){this.selection_.clear(),e.forEach(function(n){this.selection_.push(n)}.bind(this)),this.ispt_=this.selection_.getLength()===1?this.selection_.item(0).getGeometry().getType()=="Point":!1,this.iscircle_=this.selection_.getLength()===1?this.selection_.item(0).getGeometry().getType()=="Circle":!1,this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",features:this.selection_})}watchFeatures_(){this._featureListeners&&this._featureListeners.forEach(function(e){yr(e)}),this._featureListeners=[],this.selection_.forEach(function(e){this._featureListeners.push(e.on("change",function(){this.isUpdating_||this.drawSketch_()}.bind(this)))}.bind(this))}handleDownEvent_(e){if(this._handleEvent(e,this.selection_)){var n=this.getFeatureAtPixel_(e.pixel),r=n.feature;if(this.selection_.getLength()&&this.selection_.getArray().indexOf(r)>=0&&(this.ispt_&&this.get("translate")||this.get("translateFeature"))&&(n.handle="translate"),n.handle){this.mode_=n.handle,this.opt_=n.option,this.constraint_=n.constraint;var o=this.getMap().getView().getRotation();this.coordinate_=r.get("handle")?r.getGeometry().getCoordinates():e.coordinate,this.pixel_=this.getMap().getCoordinateFromPixel(this.coordinate_),this.geoms_=[],this.rotatedGeoms_=[];for(var a=Tr(),l=Tr(),c=0,f;f=this.selection_.item(c);c++)if(this.geoms_.push(f.getGeometry().clone()),a=No(a,f.getGeometry().getExtent()),this.get("enableRotatedTransform")&&o!==0){var g=this.getGeometryRotateToZero_(f,!0);this.rotatedGeoms_.push(g),l=No(l,g.getExtent())}if(this.extent_=bo(a).getCoordinates()[0],this.get("enableRotatedTransform")&&o!==0&&(this.rotatedExtent_=bo(l).getCoordinates()[0]),this.mode_==="rotate"){this.center_=this.getCenter()||Uo(a);var h=e.map.getTargetElement();fe.setCursor(h,this.Cursors.rotate0),this.previousCursor_=h.style.cursor}else this.center_=Uo(a);return this.angle_=Math.atan2(this.center_[1]-e.coordinate[1],this.center_[0]-e.coordinate[0]),this.dispatchEvent({type:this.mode_+"start",feature:this.selection_.item(0),features:this.selection_,pixel:e.pixel,coordinate:e.coordinate}),!0}else if(this.get("selection")){if(r){this.addFn_(e)||this.selection_.clear();var m=this.selection_.getArray().indexOf(r);m<0?this.selection_.push(r):this.selection_.removeAt(m)}else this.selection_.clear();return this.ispt_=this.selection_.getLength()===1?this.selection_.item(0).getGeometry().getType()=="Point":!1,this.iscircle_=this.selection_.getLength()===1?this.selection_.item(0).getGeometry().getType()=="Circle":!1,this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",feature:r,features:this.selection_,pixel:e.pixel,coordinate:e.coordinate}),!1}}}getCenter(){return this.get("center")}setCenter(e){return this.set("center",e)}handleDragEvent_(e){if(this._handleEvent(e,this.features_)){var n=this.getMap().getView().getRotation(),r,o,a,l,c=[this.coordinate_[0],this.coordinate_[1]],f=[e.coordinate[0],e.coordinate[1]];switch(this.isUpdating_=!0,this.mode_){case"rotate":{var g=Math.atan2(this.center_[1]-f[1],this.center_[0]-f[0]);if(!this.ispt)for(r=0,a;a=this.selection_.item(r);r++)l=this.geoms_[r].clone(),l.rotate(g-this.angle_,this.center_),l.getType()=="Circle"&&l.setCenterAndRadius(l.getCenter(),l.getRadius()),a.setGeometry(l);this.drawSketch_(!0),this.dispatchEvent({type:"rotating",feature:this.selection_.item(0),features:this.selection_,angle:g-this.angle_,pixel:e.pixel,coordinate:e.coordinate});break}case"translate":{var h=f[0]-c[0],m=f[1]-c[1];for(r=0,a;a=this.selection_.item(r);r++)a.getGeometry().translate(h,m);this.handles_.forEach(function(U){U.getGeometry().translate(h,m)}),this.coordinate_=e.coordinate,this.dispatchEvent({type:"translating",feature:this.selection_.item(0),features:this.selection_,delta:[h,m],pixel:e.pixel,coordinate:e.coordinate});break}case"scale":{var v=this.center_;if(this.get("modifyCenter")(e)){var p=this.extent_;this.get("enableRotatedTransform")&&n!==0&&(p=this.rotatedExtent_),v=p[(Number(this.opt_)+2)%4]}var y=this.geoms_.length==1&&this._isRectangle(this.geoms_[0]),x=this.constraint_,b=this.opt_,S=this.coordinate_,T=e.coordinate;if(this.get("enableRotatedTransform")&&n!==0){var L=new bt(this.coordinate_);L.rotate(n*-1,v),S=L.getCoordinates();var P=new bt(e.coordinate);P.rotate(n*-1,v),T=P.getCoordinates()}var k=(T[0]-v[0])/(S[0]-v[0]),V=(T[1]-v[1])/(S[1]-v[1]),E=[T[0]-S[0],T[1]-S[1]];if(this.get("enableRotatedTransform")&&n!==0){var M=new bt(v);M.rotate(n*-1,this.getMap().getView().getCenter()),v=M.getCoordinates()}for(this.get("noFlip")&&(k<0&&(k=-k),V<0&&(V=-V)),this.constraint_?this.constraint_=="h"?k=1:V=1:this.get("keepAspectRatio")(e)&&(k=V=Math.min(k,V)),r=0,a;a=this.selection_.item(r);r++)l=n===0||!this.get("enableRotatedTransform")?this.geoms_[r].clone():this.rotatedGeoms_[r].clone(),l.applyTransform(function(U,N,q){if(q<2)return N;if(y){var K=[[6],[0,8],[2],[4]],W=[U[0],U[1]],Q=[U[2],U[3]],ie=[U[4],U[5]],le=[U[6],U[7]],ye=[U[8],U[9]];if(x){var ce=b%2===0?this._countVector(W,Q):this._countVector(le,W),pe=this._projectVectorOnVector(E,ce),G=b+1<K.length?b+1:0,R=[...K[b],...K[G]];for(o=0;o<U.length;o+=q)N[o]=R.includes(o)?U[o]+pe[0]:U[o],N[o+1]=R.includes(o)?U[o+1]+pe[1]:U[o+1]}else{var B,J;switch(b){case 0:E=this._countVector(le,T),B=this._projectVectorOnVector(E,this._countVector(ie,le)),J=this._projectVectorOnVector(E,this._countVector(W,le)),[N[0],N[1]]=this._movePoint(W,B),[N[4],N[5]]=this._movePoint(ie,J),[N[6],N[7]]=this._movePoint(le,E),[N[8],N[9]]=this._movePoint(ye,B);break;case 1:E=this._countVector(W,T),B=this._projectVectorOnVector(E,this._countVector(le,W)),J=this._projectVectorOnVector(E,this._countVector(Q,W)),[N[0],N[1]]=this._movePoint(W,E),[N[2],N[3]]=this._movePoint(Q,B),[N[6],N[7]]=this._movePoint(le,J),[N[8],N[9]]=this._movePoint(ye,E);break;case 2:E=this._countVector(Q,T),B=this._projectVectorOnVector(E,this._countVector(W,Q)),J=this._projectVectorOnVector(E,this._countVector(ie,Q)),[N[0],N[1]]=this._movePoint(W,J),[N[2],N[3]]=this._movePoint(Q,E),[N[4],N[5]]=this._movePoint(ie,B),[N[8],N[9]]=this._movePoint(ye,J);break;case 3:E=this._countVector(ie,T),B=this._projectVectorOnVector(E,this._countVector(Q,ie)),J=this._projectVectorOnVector(E,this._countVector(le,ie)),[N[2],N[3]]=this._movePoint(Q,J),[N[4],N[5]]=this._movePoint(ie,E),[N[6],N[7]]=this._movePoint(le,B);break}}}else for(o=0;o<U.length;o+=q)k!=1&&(N[o]=v[0]+(U[o]-v[0])*k),V!=1&&(N[o+1]=v[1]+(U[o+1]-v[1])*V);return l.getType()=="Circle"&&l.setCenterAndRadius(l.getCenter(),l.getRadius()),N}.bind(this)),this.get("enableRotatedTransform")&&n!==0&&l.rotate(n,this.getMap().getView().getCenter()),a.setGeometry(l);this.drawSketch_(),this.dispatchEvent({type:"scaling",feature:this.selection_.item(0),features:this.selection_,scale:[k,V],pixel:e.pixel,coordinate:e.coordinate});break}}this.isUpdating_=!1}}handleMoveEvent_(e){if(this._handleEvent(e,this.features_)&&!this.mode_){var n=this.getFeatureAtPixel_(e.pixel),r=e.map.getTargetElement();if(n.feature){var o=n.handle?this.Cursors[(n.handle||"default")+(n.constraint||"")+(n.option||"")]:this.Cursors.select;this.previousCursor_===void 0&&(this.previousCursor_=r.style.cursor),fe.setCursor(r,o)}else this.previousCursor_!==void 0&&fe.setCursor(r,this.previousCursor_),this.previousCursor_=void 0}}handleUpEvent_(e){if(this.mode_==="rotate"){var n=e.map.getTargetElement();fe.setCursor(n,this.Cursors.default),this.previousCursor_=void 0}return this.dispatchEvent({type:this.mode_+"end",feature:this.selection_.item(0),features:this.selection_,oldgeom:this.geoms_[0],oldgeoms:this.geoms_}),this.drawSketch_(),this.mode_=null,!1}setPointRadius(e){typeof e=="function"?this._pointRadius=e:this._pointRadius=function(){return e}}getFeatures(){return this.selection_}_projectVectorOnVector(e,n){var r=(e[0]*n[0]+e[1]*n[1])/(n[0]*n[0]+n[1]*n[1]);return[n[0]*r,n[1]*r]}_countVector(e,n){return[n[0]-e[0],n[1]-e[1]]}_movePoint(e,n){return[e[0]+n[0],e[1]+n[1]]}};jo.prototype.Cursors={default:"auto",select:"pointer",translate:"move",rotate:"move",rotate0:"move",scale:"nesw-resize",scale1:"nwse-resize",scale2:"nesw-resize",scale3:"nwse-resize",scalev:"ew-resize",scaleh1:"ns-resize",scalev2:"ew-resize",scaleh3:"ns-resize"};function TA(t,e,n=2,r){const o=e.getSource();if(o)switch(t){case"translate":return new JE({features:r,hitTolerance:n});case"modify":return new jE({source:o});case"delete":return new CA({layers:[e]});case"point":return new $o({source:o,type:"Point"});case"line":return new $o({source:o,type:"LineString"});case"square":return new Ju({source:o,sides:4,canRotate:!0});case"circle":return new Ju({source:o,sides:2,canRotate:!1});case"polygon":return new $o({source:o,type:"Polygon"});case"transform":{jo.prototype.Cursors.rotate="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXAgMAAACdRDwzAAAAAXNSR0IArs4c6QAAAAlQTFRF////////AAAAjvTD7AAAAAF0Uk5TAEDm2GYAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH2wwSEgUFmXJDjQAAAEZJREFUCNdjYMAOuCCk6goQpbp0GpRSAFKcqdNmQKgIILUoNAxIMUWFhoKosNDQBKDgVAilCqcaQBogFFNoGNjsqSgUTgAAM3ES8k912EAAAAAASUVORK5CYII=') 5 5, auto",jo.prototype.Cursors.rotate0="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAABGdBTUEAALGOfPtRkwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAZUlEQVR42sSTQQrAMAgEHcn/v7w9tYgNNsGW7kkI2TgbRZJ15NbU+waAAFV11MiXz0yq2sxMEiVCDDcHLeky8nQAUDJnM88IuyGOGf/n3wjcQ1zhf+xgxSS+PkXY7aQ9yvy+jccAMs9AI/bwo38AAAAASUVORK5CYII=') 5 5, auto";const a=new jo({enableRotatedTransform:!1,addCondition:_c,layers:[e],hitTolerance:n,translateFeature:!0,scale:!0,rotate:!0,keepRectangle:!1,translate:!0,stretch:!0});return a.on(["select"],l=>{}),a}case"fill":return new kA({name:"fill color"},{color:"red"});case"hole":{const a=new SA({layers:[e],type:"Polygon"});return o.removeFeature(a.getPolygon()),a}}}const qA=yi({__name:"HomeView",setup(t){const e=ua(),n=Fc(),r=_a(),o=FS(),a=se(),l=se(),c=se(),f=se(),g=se(),h=se(!1),m=se("default"),v=se(2),p=se(!1),y=te({get:()=>e.message,set:G=>e.setMessage(G)}),x=te({get:()=>r.geojson,set:G=>r.setGeoJson(G)}),b=te({get:()=>r.requestRefresh,set:G=>r.setRefresh(G)}),S=te({get:()=>e.loading,set:G=>e.setLoading(G)}),T=te({get:()=>n.level,set:G=>n.setLevel(G)}),L=te({get:()=>new Eo().readFeatures(x.value),set:G=>{let R=0;G.forEach(B=>{R++,B.getId()||B.setId(Xu());let J=B.getProperties();J||(J=hs,J.no=R),B.setProperties(J)}),x.value=JSON.parse(new Eo().writeFeatures(G))}}),P=new Kn({properties:{id:"locationLayer"},zIndex:5}),k=new bn({features:L.value}),V=new Kn({source:k,style:G=>Zu(G),zIndex:10,properties:{id:"editorLayer"}}),E=new zi({condition:G=>G.type===qt.SINGLECLICK,layers:[V],hitTolerance:v.value,style:G=>Zu(G,lt.SELECTED),multi:!1}),M=new ZE({source:k});let U;const N=new _n;nt(()=>m.value,G=>{const R=a.value?.map;!R||!G||(E.getFeatures().clear(),!(U&&(R.removeInteraction(U),G==="default"))&&(p.value?R.removeInteraction(M):R.addInteraction(M),U=TA(G,V,v.value,E.getFeatures()),U&&(U.on("drawend",B=>{const J=hs;return B.feature.setId(Xu()),B.feature.setProperties(J),m.value="translate",B}),U.on("change",B=>{}),U.on("error",B=>{}),U.on("propertychange",B=>{}),R.addInteraction(U))))}),nt(()=>T.value,G=>{const R=a.value?.map;if(!R)return;const B=R.getLayers();B.forEach(J=>(J instanceof Kn&&Fg(J,G),J)),R.setLayers(B)}),nt(()=>y.value,G=>a.value?.notification.show(G));const q=async()=>{!a.value?.map||!b.value||(k.clear(),k.addFeatures(new Eo().readFeatures(x.value)),V.setSource(k),await At())},K=()=>E.getFeatures().clear(),W=async G=>{const R=G.getId();if(!R)return;const B=k.getFeatureById(R);B&&(B.setProperties(G.getProperties()),await At(),L.value=k.getFeatures(),b.value=!0,K())},Q=async G=>{const R=G.getId();if(!R)return;const B=k.getFeatureById(R);B&&(k.removeFeature(B),K(),L.value=k.getFeatures(),b.value=!0,await At())},ie=()=>{L.value=k.getFeatures(),f.value?.show()},le=()=>g.value?.show(),ye=()=>{r.clear(),q()},ce=()=>{const G=a.value?.map;G&&(p.value?G.removeInteraction(M):G.addInteraction(M),p.value=!p.value)};ca(async()=>{const G=a.value?.map;G&&(S.value=!0,P.setSource(new bn({features:new Eo().readFeatures(o.geojson)})),Fg(P,T.value),G.addLayer(P),G.addLayer(V),G.addInteraction(N),G.addInteraction(E),E.on("select",async R=>{if(m.value!=="edit")return;const B=R.selected[0].getId();if(!B)return;const J=k.getFeatureById(B);J&&c.value?.show(J)}),S.value=!1)});const pe=G=>{a.value?.map&&l.value?.show(G)};return qx(()=>{const G=a.value?.map;G&&U&&G.addInteraction(U)}),Kx(async(G,R,B)=>{G.params.region!==R.params.region&&(h.value=!1),B(),await At(),G.params.region!==R.params.region&&(h.value=!0)}),(G,R)=>(vn(),Pn(lS,{fluid:"",class:"px-0 py-0 d-flex flex-column h-100"},{default:H(()=>[F(Nx,{color:"primary",dense:"",elevation:"2"},{default:H(()=>[F(Bx,{modelValue:m.value,"onUpdate:modelValue":R[0]||(R[0]=B=>m.value=B),class:"px-0",variant:"text",theme:"dark"},{default:H(()=>[F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-cursor-default",tile:"",value:"default"},B),null,16)]),default:H(()=>[R[3]||(R[3]=he(" Default "))]),_:1,__:[3]}),F($n,{vertical:""}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-vector-point-select",tile:"",value:"edit"},B),null,16)]),default:H(()=>[R[4]||(R[4]=he(" Edit Properties "))]),_:1,__:[4]}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-arrow-all",tile:"",value:"translate"},B),null,16)]),default:H(()=>[R[5]||(R[5]=he(" Move "))]),_:1,__:[5]}),F($n,{vertical:""}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-vector-polyline-edit",tile:"",value:"modify"},B),null,16)]),default:H(()=>[R[6]||(R[6]=he(" Modify (Alt + Click to delete point.) "))]),_:1,__:[6]}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-vector-square-edit",tile:"",value:"transform"},B),null,16)]),default:H(()=>[R[7]||(R[7]=he(" Rotate "))]),_:1,__:[7]}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-vector-square-remove",tile:"",value:"delete"},B),null,16)]),default:H(()=>[R[8]||(R[8]=he(" Delete "))]),_:1,__:[8]}),F($n,{vertical:""}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-vector-point-plus",tile:"",value:"point"},B),null,16)]),default:H(()=>[R[9]||(R[9]=he(" Point "))]),_:1,__:[9]}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-vector-line",tile:"",value:"line"},B),null,16)]),default:H(()=>[R[10]||(R[10]=he(" Line "))]),_:1,__:[10]}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-vector-polygon",tile:"",value:"polygon"},B),null,16)]),default:H(()=>[R[11]||(R[11]=he(" Polygon "))]),_:1,__:[11]}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-vector-difference",tile:"",value:"hole"},B),null,16)]),default:H(()=>[R[12]||(R[12]=he(" Draw Hole "))]),_:1,__:[12]}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-vector-square",tile:"",value:"square"},B),null,16)]),default:H(()=>[R[13]||(R[13]=he(" Square "))]),_:1,__:[13]}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-vector-circle",tile:"",value:"circle"},B),null,16)]),default:H(()=>[R[14]||(R[14]=he(" Circle "))]),_:1,__:[14]}),F($n,{vertical:""}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-format-color-fill",tile:"",value:"fill"},B),null,16)]),default:H(()=>[R[15]||(R[15]=he(" Fill "))]),_:1,__:[15]})]),_:1},8,["modelValue"]),F($n,{vertical:""}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:`mdi-grid${p.value?"":"-off"}`,tile:""},B,{onClick:ce}),null,16,["icon"])]),default:H(()=>[R[16]||(R[16]=he(" Snap "))]),_:1,__:[16]}),F($n,{vertical:""}),F(Ir),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-undo",tile:""},B,{onClick:R[1]||(R[1]=J=>Tn(N).undo())}),null,16)]),default:H(()=>[R[17]||(R[17]=he(" Undo "))]),_:1,__:[17]}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-redo",tile:""},B,{onClick:R[2]||(R[2]=J=>Tn(N).redo())}),null,16)]),default:H(()=>[R[18]||(R[18]=he(" Redo "))]),_:1,__:[18]}),F($n,{vertical:""}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-delete",tile:""},B,{onClick:le}),null,16)]),default:H(()=>[R[19]||(R[19]=he(" Clear "))]),_:1,__:[19]}),F($n,{vertical:""}),F(Qe,{location:"bottom"},{activator:H(({props:B})=>[F(Ee,oe({icon:"mdi-code-json",tile:""},B,{onClick:ie}),null,16)]),default:H(()=>[R[20]||(R[20]=he(" Geojson Source "))]),_:1,__:[20]}),F(dA,{ref_key:"confirmModal",ref:g,title:"Clear",message:"Are you sure you want to remove all pins?",danger:"",onSubmit:ye},null,512),F(gA,{ref_key:"propertiesModal",ref:c,onSubmit:W,onDelete:Q,onCancel:K},null,512),F(xA,{ref_key:"codeModal",ref:f,onClose:q},null,512)]),_:1}),F(uA,{ref_key:"mapComponent",ref:a,onContextmenu:pe},null,512),F(fA,{ref_key:"mapContextMenu",ref:l,map:a.value?.map},null,8,["map"])]),_:1}))}});export{qA as default};
